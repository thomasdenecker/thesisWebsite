{"version":3,"sources":["utils/metadata.js","assets/images/logo-black-red.png","constants/api.js","ducks/notifications.js","utils/apiErrors.js","translations/en.js","translations/index.js","utils/fetch.js","utils/validation.js","ducks/utils.js","utils/helpers.js","ducks/config.js","constants/keyboardShortcuts.js","components/Splitter.js","components/Icon.js","components/Accordion.js","ducks/collections.js","containers/Sidebar.js","constants/index.js","containers/Header.js","containers/Notifications.js","containers/App.js","components/metadata/statics/StaticMetaSimple.js","components/metadata/statics/StaticMetaObjectItem.js","components/metadata/statics/StaticMetaObject.js","components/metadata/statics/StaticMetaArrayItem.js","components/metadata/statics/StaticMetaArray.js","components/metadata/StaticMetaButton.js","components/metadata/statics/StaticMetaField.js","components/FilePreview.js","components/Breadcrumbs.js","components/form/InputSearch.js","ducks/staticfiles.js","containers/views/StaticIndex.js","components/FilePicker.js","components/metadata/MetaTags.js","components/metadata/MetaSimple.js","components/metadata/MetaButtons.js","components/metadata/MetaObjectItem.js","components/metadata/MetaObject.js","components/metadata/MetaArrayItem.js","components/metadata/MetaArray.js","components/metadata/MetaField.js","ducks/metadata.js","ducks/siteMeta.js","containers/MetaFields.js","components/DataGUI.js","components/Editor.js","components/Errors.js","components/Button.js","containers/views/Configuration.js","components/Explorer.js","ducks/pages.js","containers/views/Pages.js","components/form/InputPath.js","components/form/InputTitle.js","utils/highlighter.js","components/MarkdownEditor.js","components/MarkdownPageBody.js","containers/views/PageEdit.js","components/CreateMarkdownPage.js","containers/views/PageNew.js","containers/views/Documents.js","containers/views/DocumentEdit.js","containers/views/DocumentNew.js","ducks/datafiles.js","containers/views/DataFiles.js","containers/views/DataFileEdit.js","containers/views/DataFileNew.js","ducks/drafts.js","containers/views/Drafts.js","containers/views/DraftEdit.js","containers/views/DraftNew.js","components/Dropzone.js","containers/views/StaticFiles.js","containers/views/NotFound.js","routes.js","ducks/index.js","store.js","index.js"],"names":["addFieldToMetadata","state","namePrefix","tmpState","cloneDeep","field","eval","undefined","_","isArray","push","new_field_count","metadata","removeFieldFromMetadata","key","length","splice","has","updateMetadataFieldKey","fieldKey","newKey","Object","keys","reduce","result","current","updateMetadataFieldValue","nameAttr","value","convertMetadataField","convertType","moveMetadataArrayItem","srcInd","targetInd","arr","injectDefaultFields","config","path","type","defaults","front_matter","content","e","metafields","each","scope","extend","values","computeFieldType","specialKeys","includes","isObject","module","exports","API","putConfigurationUrl","pagesAPIUrl","directory","pageAPIUrl","filename","draftsAPIUrl","draftAPIUrl","collectionAPIUrl","collection_name","documentAPIUrl","datafilesAPIUrl","datafileAPIUrl","staticfilesAPIUrl","staticfileAPIUrl","addNotification","title","message","level","notification","BadInputError","name","stack","Error","getDeleteMessage","getLeaveMessage","getNotFoundMessage","getOverrideMessage","getParserErrorMessage","getSuccessMessage","getErrorMessage","getUploadSuccessMessage","getUploadErrorMessage","getFetchErrorMessage","getUpdateErrorMessage","getDeleteErrorMessage","getPublishDraftMessage","draftPath","postPath","getTitleRequiredMessage","getFilenameRequiredMessage","getContentRequiredMessage","getFilenameNotValidMessage","sidebar","pages","posts","drafts","datafiles","collections","staticfiles","configuration","labels","save","label","triggeredLabel","create","delete","publish","view","upload","viewToggle","translations","en","get","url","action_success","action_failure","dispatch","fetch","credentials","then","res","json","data","catch","error","put","body","method","error_message","del","id","DATE_FILENAME_MATCHER","FILENAME_MATCHER","validator","validations","messages","errorMessages","validationStr","list","validationArr","split","single","test","validated","filterBySearchInput","input","filter","p","toLowerCase","filterDeleted","item","relative_path","search","clearErrors","validationError","errors","toYAML","obj","isEmpty","yaml","safeDump","indent","capitalize","string","charAt","toUpperCase","substring","toTitleCase","replace","txt","substr","slugify","a","RegExp","join","toString","c","indexOf","getFilenameFromPath","lastIndexOf","getExtensionFromPath","index","preventDefault","event","trimObject","object","acc","trim","JSON","parse","Array","getDocumentTitle","splat","prefix","Boolean","computeRelativePath","fetchConfig","putConfig","source","getState","payload","raw_content","validateConfig","stringify","onEditorChange","Splitter","className","Icon","aria-hidden","Accordion","collapsed","handleClick","setState","this","props","counter","count","icon","minHeight","children","accordionClasses","classnames","panelHeight","style","maxHeight","onClick","renderIndicator","Component","defaultProps","fetchCollections","fetchCollection","fetchDocument","createDocument","collection","validateDocument","generateFilenameFromTitle","omit","preparePayload","putDocument","deleteDocument","date","moment","format","SidebarTranslations","Sidebar","hiddens","collectionItems","map","col","i","activeClassName","to","sidebar_label","itemsCount","hiddenLinks","link","translation","splitterBefore","defaultLinks","jekyll_admin","hidden_links","visibleLinks","difference","links","collectionsPanel","renderCollections","postsPanel","draftsPanel","show_drafts","connect","bindActionCreators","Header","target","process","Notifications","elementStyles","Containers","DefaultStyle","padding","width","textAlign","Title","fontSize","color","NotificationItem","margin","borderRadius","transition","success","backgroundColor","warning","info","Dismiss","top","right","height","border","opacity","notificationSystem","refs","nextProps","position","autoDismiss","ref","notifications","App","updated","isFetching","keyMap","keyboardShortcuts","StaticMetaSimple","fieldValue","disabled","FieldTypes","array","StaticMetaArray","StaticMetaObject","simple","StaticMetaObjectItem","CurrentComponent","items","StaticMetaArrayItem","StaticMetaButton","dropdown","toggleDropdownState","onEnableField","dropdownClasses","tabIndex","onBlur","onMouseDown","StaticMetaField","enableField","FilePreview","onClickDelete","window","confirm","file","from_theme","handleClickDelete","node","isImageFile","src","http_url","alt","nodeLink","href","rel","renderFileOverlay","extname","Breadcrumbs","base","nodes","paths","before","slice","InputSearch","handleKeyPress","searchBy","onKeyPress","placeholder","fetchStaticFiles","uploadStaticFiles","files","reader","FileReader","readAsDataURL","onloadend","encoded_content","deleteStaticFile","filterByFilename","sf","StaticIndex","onClickStaticFile","modalView","renderDirectoryListingBtn","renderPreviewNode","utils","FilePicker","showModal","customStyles","overlay","zIndex","paddingTop","paddingRight","paddingLeft","openModal","shutModal","onPickItem","onPick","isOpen","contentLabel","onRequestClose","MetaTags","creators","handleKeyUp","pageTags","createTag","deleteTag","handleOnChange","tagInput","showSuggestions","autoSuggest","closeSuggestions","rectifyTag","tag","rectified","updateFieldValue","clone","tagName","pop","taginput","focus","suggestions","entry","startsWith","tags","suggests","suggestionClasses","visible","onChange","onFocus","onKeyUp","hidden","momentLocalizer","MetaSimple","handleEditableChange","handleDatepickerChange","dateStr","handleEditableBlur","imagepicker","handleLayoutChange","dateValue","Date","siteMeta","renderEditable","layouts","defaultValue","renderDatepicker","renderStaticFilePicker","renderTagsInput","renderLayoutPicker","MetaButtons","fieldTypes","fieldTypeKeys","onConvertClick","parentKey","ftype","currentType","parentType","onRemoveClick","isDefaultField","sortableHandle","renderDropdownItems","MetaObjectItem","convertField","updateFieldKey","currentValue","findDOMNode","field_key","removeField","addField","key_prefix","moveArrayItem","MetaArray","MetaObject","handleKeyBlur","handleConvertClick","handleRemoveClick","MetaArrayItem","data-id","component","options","draggable","group","pull","handle","animation","onEnd","getAttribute","newIndex","Sortable","sortableGroupDecorator","bind","MetaField","select","isInDefaultState","storeContentFields","updateTitle","updateBody","updatePath","fetchSiteMeta","MetaFields","fields","dataview","isEqual","site","staticFields","visibleKeys","metafieldsClass","datafields","defaultFieldsNotOverwritten","hasOwnProperty","newWrapper","meta","DataGUI","handleChange","slug","ext","restricted","renderPathFields","Editor","editorChanged","nextState","ace","editor","getValue","mode","theme","showGutter","showPrintMargin","highlightActiveLine","scrollMargin","Errors","iconMap","Button","active","triggered","block","thin","btnClass","iconName","iconNode","Configuration","guiView","routerWillLeave","nextLocation","fieldChanged","toggleView","handleClickSave","router","route","setRouteLeaveHook","keyboardHandlers","handlers","renderContentBody","withRouter","Explorer","deleteItem","params","dir","browserHistory","renderTitleCell","renderDirectoryRow","renderFileRow","newBtnLabel","typeLabel","renderRows","fetchPages","fetchPage","createPage","validatePage","putPage","deletePage","Pages","InputFilename","tooltip","InputTitle","hljs","registerLanguage","require","classNames","MarkdownEditor","_replaceSelectedText","cm","headNTail","startPoint","getCursor","endPoint","text","getSelection","head","tail","replaceSelection","ch","setSelection","handleFilePick","codemirror","insertTexts","image","initialValue","destroy","onSave","opts","codeSyntaxHighlighting","toolbarIcons","action","filepicker","trigger","click","SimpleMDE","on","elementToRemove","container","querySelector","remove","display","MarkdownPageBody","staticmetafields","PageEdit","new_path","page","front_matter_defaults","document_title","CreateMarkdownPage","onClickSave","metaType","defaultFields","PageNew","Documents","doc","modified_time","documents","renderTable","entries","DocumentEdit","currentDocument","DocumentNew","fetchDataFiles","fetchDataFile","putDataFile","validateDatafile","deleteDataFile","onDataFileChanged","DataFiles","DataFileEdit","datafileChanged","datafile","data_dir","gui","filepath","inputpath","data_path","guiSupport","renderAside","currentFile","DataFileNew","fetchDrafts","fetchDraft","putDraft","validateDraft","deleteDraft","publishDraft","Drafts","DraftEdit","draft","today","datedfilename","goTo","handleClickPublish","DraftNew","Dropzone","ReactDropzone","open","onDrop","onClickItem","multiple","disableClick","StaticFiles","openDropzone","dropzone","uploadedFiles","existingFiles","currentFiles","currentFilenames","cf","chain","existingUploadedFilenames","static_files","dirs","entity","concat","renderFilePreviewRow","NotFound","combineReducers","routing","routerReducer","Math","random","uploading","configureStore","createLogger","initialState","middlewares","thunk","createStore","rootReducer","compose","applyMiddleware","store","history","syncHistoryWithStore","render","routes","from","document","getElementById"],"mappings":"w3CAUaA,mBAAqB,SAArBA,mBAAsBC,MAAOC,YACxC,IAAIC,SAAWC,wDAAUH,OACrBI,MAAQC,KAAK,YAAD,OAAaJ,aAC7B,YAAcK,IAAVF,QACAG,kDAAEC,QAAQJ,OAAQA,MAAMK,KAAK,IAC5BL,MAAM,aAAD,OAAcJ,MAAMU,kBAAqB,IAFnBR,SAASS,UAc9BC,wBAA0B,SAA1BA,wBAA2BZ,MAAOC,WAAYY,KACzD,IAAIX,SAAWC,wDAAUH,OACrBI,MAAQC,KAAK,YAAD,OAAaJ,aAC7B,QAAcK,IAAVF,MAAqB,OAAOF,SAASS,SACzC,GAAIJ,kDAAEC,QAAQJ,OAAQ,CACpB,GAAIS,KAAOT,MAAMU,OACf,OAAOZ,SAASS,SAElBP,MAAMW,OAAOF,IAAK,OACb,CACL,IAAKN,kDAAES,IAAIZ,MAAOS,KAChB,OAAOX,SAASS,gBAEXP,MAAMS,KAEf,OAAOX,SAASS,UAaLM,uBAAyB,SAAzBA,uBAA0BjB,MAAOC,WAAYiB,SAAUC,QAClE,IAAIjB,SAAWC,wDAAUH,OACrBI,MAAQC,KAAK,YAAD,OAAaJ,aAC7B,YAAcK,IAAVF,OACAG,kDAAES,IAAIZ,MAAOe,UACjBf,MAAQgB,OAAOC,KAAKjB,OAAOkB,QAAO,SAACC,EAAQC,GAGzC,OAFIA,IAAYN,SAAUK,EAAOJ,QAAUf,MAAMoB,GAC5CD,EAAOC,GAAWpB,MAAMoB,GACtBD,IACN,IACHlB,KAAK,YAAD,OAAaJ,WAAb,cAP4BC,SAASS,UAmB9Bc,yBAA2B,SAA3BA,yBAA4BzB,MAAO0B,SAAUC,OACxD,IAAIzB,SAAWC,wDAAUH,OAEzB,OADAK,KAAK,YAAD,OAAaqB,SAAb,aACGxB,SAASS,UAYLiB,qBAAuB,SAAvBA,qBAAwB5B,MAAO0B,SAAUG,aACpD,IAAI3B,SAAWC,wDAAUH,OACrBI,MAAQC,KAAK,YAAD,OAAaqB,WAC7B,QAAcpB,IAAVF,MAAqB,OAAOF,SAASS,SACzC,GAAoB,UAAhBkB,YAAyBzB,MAAQ,CAAC,SACjC,GAAoB,WAAhByB,YAA0B,CACjC,IAAIhB,IAAG,oBAAgBb,MAAMU,iBAC7BN,MAAK,mJAAMS,IAAM,SACZT,MAAQ,GAEf,OADAC,KAAK,YAAD,OAAaqB,SAAb,aACGxB,SAASS,UAaLmB,sBAAwB,SAAxBA,sBAAyB9B,MAAOC,WAAY8B,OAAQC,WAC/D,IAAI9B,SAAWC,wDAAUH,OACrBiC,IAAM5B,KAAK,YAAD,OAAaJ,aAC3B,OAAKM,kDAAEC,QAAQyB,MACfA,IAAIlB,OAAOiB,UAAW,EAAGC,IAAIlB,OAAOgB,OAAQ,GAAG,IACxC7B,SAASS,UAFYT,SAASS,UAc1BuB,oBAAsB,SAACC,EAAQC,EAAMC,GAA6B,IACzEC,EADkDC,EAAsB,uDAAP,GAErE,IACED,EAAWH,EAAOK,QAAQF,SAC1B,MAAOG,GACP,MAAO,GAET,IAAIC,EAAa,GAUjB,OATAnC,kDAAEoC,KAAKL,GAAU,SAAAlC,GACf,IAAMwC,EAAQxC,EAAMwC,MAEhBA,EAAMP,MAAQO,EAAMP,OAASA,GAC7BO,EAAMR,MAAQQ,EAAMR,OAASA,GAE/B7B,kDAAEsC,OAAOH,EAAYtC,EAAM0C,WAGxBvC,kDAAEsC,OAAOH,EAAYH,IAUjBQ,iBAAmB,SAACpB,GAAuB,IAAhBd,EAAe,uDAAT,KACxCwB,EAAO,SACLW,EAAc,CAAC,OAAQ,cAC7B,OAAIA,EAAYC,SAASpC,IAAQN,kDAAEC,QAAQmB,KAEvCpB,kDAAE2C,SAASvB,KAAQU,EAAO,UAC1B9B,kDAAEC,QAAQmB,KAAQU,EAAO,UAH6BA,I,4EClK5Dc,EAAOC,QAAU,8xZ,4qCCAJC,EAEP,QAMOC,EAAsB,2BAASD,EAAT,mBAEtBE,EAAc,eAACC,EAAD,uDAAa,GAAb,gBAAuBH,EAAvB,kBAAoCG,IAClDC,EAAa,SAACD,EAAWE,GAAZ,OACxBF,EAAS,UACFH,EADE,kBACWG,EADX,YACwBE,GADxB,UAEFL,EAFE,kBAEWK,IAETC,EAAe,eAACH,EAAD,uDAAa,GAAb,gBAAuBH,EAAvB,mBAAqCG,IACpDI,EAAc,SAACJ,EAAWE,GAAZ,OACzBF,EAAS,UACFH,EADE,mBACYG,EADZ,YACyBE,GADzB,UAEFL,EAFE,mBAEYK,IAGVG,EAAmB,SAACC,EAAiBN,GAAlB,OAC9BA,EAAS,UACFH,EADE,wBACiBS,EADjB,oBAC4CN,GAD5C,UAEFH,EAFE,wBAEiBS,EAFjB,aAGEC,EAAiB,SAACD,EAAiBN,EAAWE,GAA7B,OAC5BF,EAAS,UACFH,EADE,wBACiBS,EADjB,YACoCN,EADpC,YACiDE,GADjD,UAEFL,EAFE,wBAEiBS,EAFjB,YAEoCJ,IAElCM,EAAkB,eAACR,EAAD,uDAAa,GAAb,gBAAuBH,EAAvB,iBAAmCG,IACrDS,EAAiB,SAACT,EAAWE,GAAZ,OAC5BF,EAAS,UACFH,EADE,iBACUG,EADV,YACuBE,GADvB,UAEFL,EAFE,iBAEUK,IAERQ,EAAoB,eAACV,EAAD,uDAAa,GAAb,gBAC5BH,EAD4B,yBACRG,IACZW,EAAmB,SAACX,EAAWE,GAAZ,OAC9BF,EAAS,UACFH,EADE,yBACkBG,EADlB,YAC+BE,GAD/B,UAEFL,EAFE,yBAEkBK,I,0BCvChBU,EAAkB,SAACC,EAAOC,EAASC,GAAjB,MAA4B,CACzDlC,KAJ8B,mBAK9BmC,aAAc,CACZH,QACAC,UACAC,W,aCTSE,EAAb,YACE,WAAYH,GAAU,IAAD,8BACnB,+CACKI,KAAO,gBACZ,EAAKJ,QAAUA,GAAW,YAC1B,EAAKK,OAAQ,IAAIC,OAAQD,MAJN,EADvB,uCAAmCC,QCCtBC,EAAmB,SAAAnB,GAAQ,sDACGA,EADH,QAG3BoB,EAAkB,iBAC7B,0EAEWC,EAAqB,SAAA1C,GAAI,mBAAUA,EAAV,YAEzB2C,EAAqB,SAAAtB,GAAQ,gBACrCA,EADqC,2CAI7BuB,EAAwB,iBAAM,eAE9BC,EAAoB,iBAAM,WAE1BC,EAAkB,iBAAM,SAExBC,EAA0B,SAAA1B,GAAQ,gBAC1CA,EAD0C,2BAGlC2B,EAAwB,uDAExBC,EAAuB,SAAA5B,GAAQ,oCACnBA,IAEZ6B,EAAwB,SAAA7B,GAAQ,qCACnBA,IAEb8B,EAAwB,SAAA9B,GAAQ,qCACnBA,IAEb+B,EAAyB,SAACC,EAAWC,GAAZ,iBAChCD,EADgC,mCACIC,EADJ,MAIzBC,EAA0B,iBAAM,0BAEhCC,EAA6B,iBAAM,6BAEnCC,EAA4B,iBAAM,4BAElCC,GAA6B,iBAAM,8BAGnCC,GAAU,CACrBC,MAAO,QACPC,MAAO,QACPC,OAAQ,SACRC,UAAW,aACXC,YAAa,cACbC,YAAa,eACbC,cAAe,iBAIJC,GAAS,CACpBC,KAAM,CACJC,MAAO,OACPC,eAAgB,SAElBC,OAAQ,CACNF,MAAO,SACPC,eAAgB,WAElBE,OAAQ,CACNH,MAAO,UAETI,QAAS,CACPJ,MAAO,WAETK,KAAM,CACJL,MAAO,QAETM,OAAQ,CACNN,MAAO,gBAETO,WAAY,CACVP,MAAO,4BACPC,eAAgB,8BCrELO,GADMC,ECJnBhC,GAIE+B,GAJF/B,gBACAG,GAGE4B,GAHF5B,qBACAC,GAEE2B,GAFF3B,sBACAC,GACE0B,GADF1B,sBAWW4B,GAAM,SAACC,EAAKC,EAAgBC,EAAgBC,GACvD,OAAOC,IAAMJ,EAAK,CAAEK,YAAa,gBAC9BC,MAAK,SAAAC,GAAG,OAAIA,EAAIC,UAChBF,MAAK,SAAAG,GAAI,OACRN,EAAS,aACPnF,KAAMiF,EAAejF,MACpBiF,EAAe5C,KAAOoD,OAG1BC,OAAM,SAAAC,GACLR,EAAS,aACPnF,KAAMkF,EAAelF,MACpBkF,EAAe7C,KAAOsD,IAEzBR,EACEpD,EACEe,KACAG,GAAqBgC,EAAe5C,MACpC,cAeGuD,GAAM,SAACZ,EAAKa,EAAMZ,EAAgBC,EAAgBC,GAC7D,OAAOC,IAAMJ,EAAK,CAChBc,OAAQ,MACRT,YAAa,cACbQ,SAECP,MAAK,SAAAC,GAAG,OAAIA,EAAIC,UAChBF,MAAK,SAAAG,GACJ,GAAIA,EAAKM,cACP,MAAM,IAAI3D,EAAcqD,EAAKM,eAE/BZ,EAAS,aACPnF,KAAMiF,EAAejF,MACpBiF,EAAe5C,KAAOoD,OAG1BC,OAAM,SAAAC,GACLR,EAAS,aACPnF,KAAMkF,EAAelF,MACpBkF,EAAe7C,KAAOsD,IAEzB,IAAII,EACa,kBAAfJ,EAAMtD,KACFsD,EAAM1D,QACNiB,GAAsB+B,EAAe5C,MAC3C8C,EAASpD,EAAgBe,KAAmBiD,EAAe,cAYpDC,GAAM,SAAChB,EAAKC,EAAgBC,EAAgBC,GACvD,OAAOC,IAAMJ,EAAK,CAChBc,OAAQ,SACRT,YAAa,gBAEZC,MAAK,SAAAG,GAAI,OACRN,EAAS,CACPnF,KAAMiF,EAAejF,KACrBiG,GAAIhB,EAAegB,QAGtBP,OAAM,SAAAC,GACLR,EAAS,aACPnF,KAAMkF,EAAelF,MACpBkF,EAAe7C,KAAOsD,IAEzBR,EACEpD,EACEe,KACAK,GAAsB8B,EAAe5C,MACrC,c,mBC5GJ6D,GAAwB,8EACxBC,GAAmB,kBAsBZC,GAAY,SAAC3F,EAAQ4F,EAAaC,GAC7C,IAAIC,EAAgB,GASpB,OARArI,KAAEoC,KAAK+F,GAAa,SAACG,EAAezI,EAAO0I,GACzC,IAAMC,EAAgBF,EAAcG,MAAM,KAC1CzI,KAAEoC,KAAKoG,GAAe,SAAAE,IAxBR,SAAC7I,EAAO6I,GACxB,OAAQA,GACN,IAAK,WACH,QAAS7I,EACX,IAAK,OACH,OAAOmI,GAAsBW,KAAK9I,GACpC,IAAK,WACH,OAAOoI,GAAiBU,KAAK9I,GAC/B,QACE,OAAO,IAgBF+I,CAAUrG,EAAO1C,GAAQ6I,IAC5BL,EAAcnI,KAAKkI,EAAS,GAAD,OAAIvI,EAAJ,YAAa6I,WAIvCL,GClCIQ,GAAsB,SAACN,EAAMO,GACxC,OAAIA,EACKP,EAAKQ,QAAO,SAAAC,GAAC,OAAIA,EAAE7E,KAAK8E,cAAcvG,SAASoG,EAAMG,kBAEvDV,GAGIW,GAAgB,SAACX,EAAMR,GAClC,OAAOQ,EAAKQ,QAAO,SAAAI,GAAI,OAAIA,EAAKC,gBAAkBrB,MASvCsB,GAAS,SAAAP,GAAK,MAAK,CAC9BhH,KAN4B,iBAO5BgH,UAGWQ,GAAc,iBAAO,CAChCxH,KAV0B,iBAafyH,GAAkB,SAAAC,GAAM,MAAK,CACxC1H,KAb8B,mBAc9B0H,W,yBCrBWC,GAAS,SAAAC,GAAG,OACtB1J,KAAE2J,QAAQD,GAA2C,GAApCE,KAAKC,SAASH,EAAK,CAAEI,OAAQ,KAcpCC,GAAa,SAAAC,GACxB,OAAKA,EACEA,EAAOC,OAAO,GAAGC,cAAgBF,EAAOG,UAAU,GAAGlB,cADxC,IASTmB,GAAc,SAAAJ,GACzB,OAAKA,EACEA,EAAOK,QAAQ,UAAU,SAAAC,GAC9B,OAAOA,EAAIL,OAAO,GAAGC,cAAgBI,EAAIC,OAAO,GAAGtB,iBAFjC,IAWTuB,GAAU,SAAAR,GACrB,IAAKA,EAAQ,MAAO,GACpB,IAAMS,EAAI,gNAEJzB,EAAI,IAAI0B,OAAOD,EAAEhC,MAAM,IAAIkC,KAAK,KAAM,KAE5C,OAAOX,EACJY,WACA3B,cACAoB,QAAQ,OAAQ,KAChBA,QAAQrB,GAAG,SAAA6B,GAAC,MAPL,kDAOWZ,OAAOQ,EAAEK,QAAQD,OACnCR,QAAQ,KAAM,KACdA,QAAQ,WAAY,IACpBA,QAAQ,MAAO,KACfA,QAAQ,MAAO,IACfA,QAAQ,MAAO,KAQPU,GAAsB,SAAAlJ,GACjC,OAAKA,EACEA,EAAKsI,UAAUtI,EAAKmJ,YAAY,KAAO,GAD5B,IASPC,GAAuB,SAAApJ,GAClC,IAAKA,EAAM,MAAO,GAClB,IAAMsB,EAAW4H,GAAoBlJ,GAC/BqJ,EAAQ/H,EAAS6H,YAAY,KAEnC,OAAIE,EAAQ,EACH/H,EAASgH,UAAUe,EAAQ,GAE3B,IA+BEC,GAAiB,SAAAC,GACxBA,GAASA,EAAMD,gBACjBC,EAAMD,kBASGE,GAAa,SAAbA,EAAaC,GACxB,OAAKtL,KAAE2C,SAAS2I,GACTtL,KAAEc,KAAKwK,GAAQvK,QAAO,SAACwK,EAAKjL,GACjC,GAA2B,kBAAhBgL,EAAOhL,GAChB,IACEiL,EAAIjL,EAAIkL,QAAUC,KAAKC,MAAMJ,EAAOhL,GAAKkL,QACzC,MAAOtJ,GACPqJ,EAAIjL,EAAIkL,QAAUF,EAAOhL,GAAKkL,YAGhCD,EAAIjL,EAAIkL,QAAUH,EAAWC,EAAOhL,IAEtC,OAAOiL,IACNI,MAAM1L,QAAQqL,GAAU,GAAK,IAZAA,GAuBrBM,GAAmB,SAAC9J,EAAM+J,GAAwB,IAAjBC,EAAgB,uDAAP,GACrD,IAAKhK,EAAM,MAAO,GAClB,IAAMqE,EAAQiE,GAAYtI,EAAK8I,YAC/B,MAAO,CAACkB,EAAQD,EAAO1F,GAAO4C,OAAOgD,SAASpB,KAAK,QAQxCqB,GAAsB,SAAC/I,EAAWE,GAC7C,OAAOF,EAAS,UAAMA,EAAN,YAAmBE,GAAnB,UAAmCA,IC7J7CoC,GAA8BoB,GAA9BpB,0BAYK0G,GAAc,kBAAM,SAAAhF,GAE/B,OADAA,EAAS,CAAEnF,KAVuB,yBAW3B+E,GTd0B,UAAS/D,EAAT,kBSgB/B,CAAEhB,KAZ8B,uBAYFqC,KAAM,UACpC,CAAErC,KAZ8B,uBAYFqC,KAAM,SACpC8C,KAISiF,GAAY,SAACtK,GAAD,IAASuK,EAAT,uDAAkB,SAAlB,OAA+B,SACtDlF,EACAmF,GAEA,IAAIC,EAEW,QAAXF,GACFvK,EAASwK,IAAWhM,SAASA,SAC7BiM,EAAU,CAAEC,YAAa7C,GAAO7H,KAEhCyK,EAAU,CAAEC,YAAa1K,GAI3B,IAAM4H,EAAS+C,GAAe3K,GAC9B,OAAI4H,EAAOjJ,OACF0G,EAASsC,GAAgBC,KAElCvC,EAAS,CAAEnF,KFjCe,iBEmCnB4F,GACL3E,IACA0I,KAAKe,UAAUH,GACf,CAAEvK,KAtC4B,qBAsCFqC,KAAM,UAClC,CAAErC,KAtC4B,qBAsCFqC,KAAM,SAClC8C,MAIEsF,GAAiB,SAAA3K,GAAM,OAC3BsG,GACE,CAAEtG,UACF,CAAEA,OAAQ,YACV,CACE,kBAAmB2D,QAIZkH,GAAiB,iBAAO,CACnC3K,KApDmC,0BChBtB,QACboE,KAAM,SCGOwG,GAFE,kBAAM,yBAAKC,UAAU,cCCvB,SAASC,GAAT,GAAyB,IAATzI,EAAQ,EAARA,KAC7B,OAAO,uBAAGwI,UAAS,gBAAWxI,GAAQ0I,cAAY,S,wBCC9CC,G,2MACJrN,MAAQ,CAAEsN,WAAW,G,EAErBC,YAAc,WACZ,EAAKC,UAAS,SAAAxN,GACZ,MAAO,CACLsN,WAAYtN,EAAMsN,e,iFAKL,IAAD,EACWG,KAAKC,MAAxBC,EADQ,EACRA,QAASC,EADD,EACCA,MACTN,EAAcG,KAAKzN,MAAnBsN,UAER,OAAIA,GAAaK,GAAWC,EACnB,yBAAKV,UAAU,WAAWU,GAGjC,yBAAKV,UAAU,YACb,kBAACC,GAAD,CAAMzI,KAAI,kBAAa4I,EAAY,OAAS,W,+BAKxC,IAAD,EAC6CG,KAAKC,MAAjDG,EADD,EACCA,KAAMnH,EADP,EACOA,MAAOoH,EADd,EACcA,UAAWF,EADzB,EACyBA,MAAOG,EADhC,EACgCA,SAC/BT,EAAcG,KAAKzN,MAAnBsN,UACFU,EAAmBC,KAAW,YAAa,CAAEX,cAE/CY,EAAcJ,EAKlB,OAJKR,IACHY,EAAcJ,GAAaF,GAASA,EAAQ,GAAKE,EAAY,QAI7D,yBACEZ,UAAWc,EACXG,MAAO,CAAEC,UAAWF,GACpBG,QAASZ,KAAKF,aAEd,yBAAKL,UAAU,mBACZW,GAAQ,kBAACV,GAAD,CAAMzI,KAAMmJ,IACpBnH,EACD,yBAAKwG,UAAU,aAAaO,KAAKa,oBAElCP,O,GA9CeQ,aAoDxBlB,GAAUmB,aAAe,CACvBV,UAAW,IAYET,U,oBCxDbzH,GAGEsB,GAHFtB,wBACAC,GAEEqB,GAFFrB,2BACAE,GACEmB,GADFnB,2BAqBW0I,GAAmB,kBAAM,SAAAjH,GAEpC,OADAA,EAAS,CAAEnF,KAlB4B,8BAmBhC+E,GdjBwB,UAAS/D,EAAT,gBcmB7B,CAAEhB,KApBmC,4BAoBFqC,KAAM,eACzC,CAAErC,KApBmC,4BAoBFqC,KAAM,SACzC8C,KAISkH,GAAkB,SAC7B5K,GAD6B,IAE7BN,EAF6B,uDAEjB,GAFiB,OAG1B,SAAAgE,GAEH,OADAA,EAAS,CAAEnF,KA5B2B,6BA6B/B+E,GACLvD,EAAiBC,EAAiBN,GAClC,CAAEnB,KA9BkC,2BA8BFqC,KAAM,WACxC,CAAErC,KA9BkC,2BA8BFqC,KAAM,SACxC8C,KAISmH,GAAgB,SAC3B7K,EACAN,EACAE,GAH2B,OAIxB,SAAA8D,GAEH,OADAA,EAAS,CAAEnF,KAvCyB,2BAwC7B+E,GACLrD,EAAeD,EAAiBN,EAAWE,GAC3C,CAAErB,KAzCgC,yBAyCFqC,KAAM,OACtC,CAAErC,KAzCgC,yBAyCFqC,KAAM,SACtC8C,KAISoH,GAAiB,SAACC,EAAYrL,GAAb,OAA2B,SACvDgE,EACAmF,GAGA,IAAMhM,EAAWgM,IAAWhM,SAASA,SAC/ByB,EAA6BzB,EAA7ByB,KAAMyK,EAAuBlM,EAAvBkM,YAAaxI,EAAU1D,EAAV0D,MAEzB,GAAMjC,GAAQ,UAAGA,EAAH,OAAeoB,IAAca,EAEpC,CAEL,IAAM0F,EAAS+E,GAAiBnO,EAAUkO,GAC1C,GAAI9E,EAAOjJ,OACT,OAAO0G,EAASsC,GAAgBC,SALlC3H,EAAO2M,GAA0BpO,EAAUkO,GAS7CrH,EAAS,CAAEnF,KP9Ee,iBOgF1B,IAAME,EAAehC,KAAEyO,KAAKrO,GAAU,SAACgB,EAAOd,EAAKgL,GACjD,MAAe,gBAARhL,GAAiC,SAARA,GAA4B,KAAVc,KAGpD,OAAOsG,GAELlE,EAAe8K,EAAYrL,EAAWpB,GACtC6M,GAAe,CAAEpC,cAAatK,iBAC9B,CAAEF,KAxE8B,uBAwEFqC,KAAM,OACpC,CAAErC,KAxE8B,uBAwEFqC,KAAM,SACpC8C,KAIS0H,GAAc,SAACL,EAAYrL,EAAWE,GAAxB,OAAqC,SAC9D8D,EACAmF,GAGA,IAAMhM,EAAWgM,IAAWhM,SAASA,SAC/ByB,EAA6BzB,EAA7ByB,KAAMyK,EAAuBlM,EAAvBkM,YAAaxI,EAAU1D,EAAV0D,MAEzB,GAAMjC,GAAQ,UAAGA,EAAH,OAAeoB,IAAca,EAEpC,CAEL,IAAM0F,EAAS+E,GAAiBnO,EAAUkO,GAC1C,GAAI9E,EAAOjJ,OACT,OAAO0G,EAASsC,GAAgBC,SALlC3H,EAAO2M,GAA0BpO,EAAUkO,GAS7CrH,EAAS,CAAEnF,KPhHe,iBOkH1B,IAAME,EAAehC,KAAEyO,KAAKrO,GAAU,SAACgB,EAAOd,EAAKgL,GACjD,MAAe,gBAARhL,GAAiC,SAARA,GAA4B,KAAVc,KAG9CgI,EAAgBnG,EAAS,WACvBqL,EADuB,YACTrL,EADS,YACIpB,GADJ,WAEvByM,EAFuB,YAETzM,GAEtB,OAAO6F,GAELlE,EAAe8K,EAAYrL,EAAWE,GACtCuL,GAAe,CAAE7M,KAAMuH,EAAekD,cAAatK,iBACnD,CAAEF,KA9G8B,uBA8GFqC,KAAM,OACpC,CAAErC,KA9G8B,uBA8GFqC,KAAM,SACpC8C,KAIS2H,GAAiB,SAACN,EAAYrL,EAAWE,GAAxB,OAAqC,SAAA8D,GACjE,IAAMmC,EAAgB4C,GAAoB/I,EAAWE,GACrD,OAAO2E,GACLtE,EAAe8K,EAAYrL,EAAWE,GACtC,CAAErB,KArHiC,0BAqHFqC,KAAM,MAAO4D,GAAIqB,GAClD,CAAEtH,KArHiC,0BAqHFqC,KAAM,SACvC8C,KAIEuH,GAA4B,SAACpO,EAAUkO,GAGzC,IAAIO,EAFN,MAAmB,UAAfP,GAIAO,EADEzO,EAASyO,KACJzO,EAASyO,KAAKpG,MAAM,KAAK,GAEzBqG,OAASC,OAAO,cAEnB,GAAN,OAAUF,EAAV,YAAkBrE,GAAQpK,EAAS0D,OAAnC,QAEI,GAAN,OAAU0G,GAAQpK,EAAS0D,OAA3B,QAGIyK,GAAmB,SAACnO,EAAUkO,GAClC,IAAInG,EAAc,CAAErE,MAAO,YAEvBsE,EAAW,CACb,iBAAkB/C,KAClB,gBAAiBC,MAUnB,MAPmB,UAAfgJ,GACFnG,EAAW,KAAW,gBACtBC,EAAS,aAAe5C,OAExB2C,EAAW,KAAW,oBACtBC,EAAS,iBAAmB5C,MAEvB0C,GAAU9H,EAAU+H,EAAaC,IAGpCsG,GAAiB,SAAAhF,GAAG,OAAI+B,KAAKe,UAAUnB,GAAW3B,KA6EjD,IC3PDsF,GAAsBrI,GAAalB,QAE5BwJ,GAAb,6LAGIf,EAD6BhB,KAAKC,MAA1Be,sBAFZ,0CAMmC,IAAfgB,EAAc,uDAAJ,GAClBpJ,EAAgBoH,KAAKC,MAArBrH,YAER,IAAKA,EAAYvF,OACf,OAAO,KAGT,IAAM4O,EAAkBnP,KAAEoP,IAAItJ,GAAa,SAACuJ,EAAKC,GAC/C,GAAkB,UAAdD,EAAIlJ,QAAsB+I,EAAQxM,SAAS2M,EAAIlJ,OACjD,OACE,wBAAI7F,IAAKgP,GACP,kBAAC,OAAD,CACEC,gBAAgB,SAChBC,GAAE,UCnCY,SDmCZ,wBAAiCH,EAAIlJ,QAEvC,kBAACyG,GAAD,CAAMzI,KAAK,SACVkL,EAAII,eAAiB1F,GAAWsF,EAAIlJ,YAK5C4C,OAAOgD,SAEJ2D,EAAaP,EAAgB5O,OACnC,OAAKmP,EAKH,kBAAC,GAAD,CACErC,MAAOqC,EACPpC,KAAK,YACLnH,MAAO6I,GAAoBlJ,YAC3BsH,SAAO,GAEP,4BAAK+B,IAVA,OA/Bb,+BA8CY,IA6BJQ,EA5BI/N,EAAWsL,KAAKC,MAAhBvL,OAEFG,EAAW,CACf2D,MAAO,CACL4H,KAAM,YACNsC,KAAM,QACNC,YAAa,SAEfhK,UAAW,CACTyH,KAAM,WACNsC,KAAM,YACNC,YAAa,YACbC,gBAAgB,GAElB/J,YAAa,CACXuH,KAAM,OACNsC,KAAM,cACNC,YAAa,eAEf7J,cAAe,CACbsH,KAAM,MACNsC,KAAM,gBACNC,YAAa,gBACbC,gBAAgB,IAIdC,EAAe/P,KAAEc,KAAKiB,GAG5B,IACE4N,EAAc/N,EAAOoO,aAAaC,cAAgB,GAClD,MAAO/N,GACPyN,EAAc,GAGhB,IAAMO,EAAelQ,KAAEmQ,WAAWJ,EAAcJ,GAE1CS,EAAQ,GACdpQ,KAAEoC,KAAK8N,GAAc,SAACN,EAAM1E,EAAO3C,GACjC,IAAMtH,EAAUc,EAAS6N,GACrB3O,EAAQ6O,gBACVM,EAAMlQ,KAAK,kBAAC,GAAD,CAAUI,IAAK,WAAa4K,KAEzCkF,EAAMlQ,KACJ,wBAAII,IAAK4K,GACP,kBAAC,OAAD,CAAMqE,gBAAgB,SAASC,GAAE,UC7Gf,SD6Ge,YAAqBvO,EAAQ2O,OAC5D,kBAAChD,GAAD,CAAMzI,KAAMlD,EAAQqM,OACnB0B,GAAoB/N,EAAQ4O,mBAMrC,IAAMQ,EAAmBnD,KAAKoD,kBAAkBX,GAC1CY,GAAcZ,EAAYjN,SAAS,SACnC8N,EAAc5O,GAAUA,EAAO6O,YAErC,OACE,yBAAK9D,UAAU,WACb,kBAAC,OAAD,CAAMA,UAAU,OAAO6C,GAAE,UC3HL,SD2HK,YACzB,wBAAI7C,UAAU,UACX0D,EACAE,GACC,4BACE,kBAAC,OAAD,CACEhB,gBAAgB,SAChBC,GAAE,UClIU,SDkIV,uBAEF,kBAAC5C,GAAD,CAAMzI,KAAK,SACV6K,GAAoBrJ,QAI1B6K,GACC,4BACE,kBAAC,OAAD,CAAMjB,gBAAgB,SAASC,GAAE,UC3InB,SD2ImB,YAC/B,kBAAC5C,GAAD,CAAMzI,KAAK,SACV6K,GAAoBpJ,UAIzByK,GAAoBE,GAAcC,IAAgB,kBAAC,GAAD,MACnDJ,QAlIX,GAA6BpC,aA2Jd0C,gBAZS,SAAAjR,GAAK,MAAK,CAChCqG,YAAarG,EAAMqG,YAAYA,gBAGN,SAAAmB,GAAQ,OACjC0J,YACE,CACEzC,qBAEFjH,KAGWyJ,CAA6CzB,IEjJ7C2B,GArBf,iLACY,IACAhP,EAAWsL,KAAKC,MAAhBvL,OACR,OACE,yBAAK+K,UAAU,UACb,wBAAIA,UAAU,SACZ,kBAAC,OAAD,CAAMkE,OAAO,SAASrB,GAAI5N,EAAOkF,KAAO,KACtC,kBAAC8F,GAAD,CAAMzI,KAAK,SACX,8BAAOvC,EAAOkC,OAAS,wBAG3B,0BAAM6I,UAAU,WAAhB,IAA4BmE,eAXpC,GAA4B9C,a,qBCAf+C,GAAb,2MAgBEC,cAAgB,CACdC,WAAY,CACVC,aAAc,CACZC,QAAS,GACTC,MAAO,IACPC,UAAW,WAGfC,MAAO,CACLJ,aAAc,CACZK,SAAU,GACVC,MAAO,SAGXC,iBAAkB,CAChBP,aAAc,CACZQ,OAAQ,EACRP,QAAS,gBACTI,SAAU,GACVI,aAAc,EACdC,WAAY,oBAEdC,QAAS,CACPL,MAAO,OACPM,gBAAiB,WAEnBrK,MAAO,CACL+J,MAAO,OACPM,gBAAiB,WAEnBC,QAAS,CACPP,MAAO,OACPM,gBAAiB,WAEnBE,KAAM,CACJR,MAAO,OACPM,gBAAiB,YAGrBG,QAAS,CACPf,aAAc,CACZgB,IAAK,EACLC,MAAO,EACPf,MAAO,GACPgB,OAAQ,GACRjB,QAAS,EACTW,gBAAiB,cACjBO,OAAQ,YACRC,QAAS,UAhEjB,mFAEIpF,KAAKqF,mBAAqBrF,KAAKsF,KAAKD,qBAFxC,gDAK4BE,GAAY,IAC5BxO,EAAiBwO,EAAjBxO,aACRiJ,KAAKqF,mBAAmB1O,gBAAgB,CACtCC,MAAOG,EAAaH,MACpBC,QAASE,EAAaF,QACtBC,MAAOC,EAAaD,MACpB0O,SAAU,KACVC,YAAa,OAZnB,+BAsEI,OACE,kBAAC,KAAD,CAAoBC,IAAI,qBAAqBhF,MAAOV,KAAK8D,oBAvE/D,GAAmChD,aAoFpB0C,gBAJS,SAAAjR,GAAK,MAAK,CAChCwE,aAAcxE,EAAMoT,cAAc5O,gBAGrByM,CAAyBK,IC1ElC+B,G,6LAGF7G,EADwBiB,KAAKC,MAArBlB,iB,gDAIgBwG,GACpBvF,KAAKC,MAAM4F,UAAYN,EAAUM,UAEnC9G,EADwBiB,KAAKC,MAArBlB,iB,+BAKF,IAAD,EACwBiB,KAAKC,MAA5BvL,EADD,EACCA,OAER,OAHO,EACSoR,WAGP,KAIP,kBAAC,IAAD,CAAelP,MAAM,gBACnB,kBAAC,UAAD,CAASmP,OAAQC,GAAmBvG,UAAU,WAC3C/K,EAAOK,SACN,6BACE,kBAAC,GAAD,CAASL,OAAQA,EAAOK,UACxB,yBAAK0K,UAAU,aACb,kBAAC,GAAD,CAAQ/K,OAAQA,EAAOK,UACvB,yBAAK0K,UAAU,WAAWO,KAAKC,MAAMK,WAEvC,kBAAC,GAAD,a,GA9BIQ,aAwDH0C,gBATS,SAAAjR,GAAK,MAAK,CAChCmC,OAAQnC,EAAMmC,OAAOA,OACrBmR,QAAStT,EAAMmC,OAAOmR,QACtBC,WAAYvT,EAAMmC,OAAOoR,eAGA,SAAA/L,GAAQ,OACjC0J,YAAmB,CAAE1E,gBAAehF,KAEvByJ,CAA6CoC,I,SCnE7C,SAASK,GAAT,GAA2C,IAAfC,EAAc,EAAdA,WACzC,OACE,yBAAKzG,UAAU,cACb,kBAAC,KAAD,CACEA,UAAU,oBACVvL,MAAK,UAAKgS,GACVC,UAAQ,KCJhB,IAAMC,GAAa,CACjBC,MAAOC,GACPlI,OAAQmI,GACRC,OAAQP,IAGK,SAASQ,GAAT,GAA+D,IAA/B7R,EAA8B,EAA9BA,KAAMnB,EAAwB,EAAxBA,SAAUyS,EAAc,EAAdA,WACvDQ,EAAmBN,GAAWxR,GAEpC,OACE,yBAAK6K,UAAU,oBACb,yBAAKA,UAAS,qBAAgB7K,IAC5B,2BACEV,MAAOT,EACPgM,UAAU,kBACV7K,KAAK,OACLuR,UAAQ,KAGZ,yBAAK1G,UAAU,gBACb,kBAACiH,EAAD,CAAkBR,WAAYA,M,aCpBvB,SAASK,GAAT,GAA2C,IAAfL,EAAc,EAAdA,WACnCS,EAAQ7T,KAAEoP,IAAIgE,GAAY,SAAChS,EAAOd,GACtC,IAAMwB,EAAOU,aAAiBpB,GAC9B,OACE,kBAACuS,GAAD,CACErT,IAAKA,EACLK,SAAUL,EACV8S,WAAYhS,EACZU,KAAMA,OAKZ,OAAO,yBAAK6K,UAAU,qBAAqBkH,GCb7C,IAAMP,GAAa,CACjBC,MAAOC,GACPlI,OAAQmI,GACRC,OAAQP,IAGK,SAASW,GAAT,GAA2D,IAA5BhS,EAA2B,EAA3BA,KAAMsR,EAAqB,EAArBA,WAAYlI,EAAS,EAATA,MACxD0I,EAAmBN,GAAWxR,GAEpC,OACE,yBAAK6K,UAAU,mBACb,yBAAKA,UAAU,SACb,yBAAKA,UAAU,gBACb,0BAAMA,UAAU,mBAAmBzB,EAAQ,EAA3C,MAEF,kBAAC0I,EAAD,CAAkBR,WAAYA,MChBvB,SAASI,GAAT,GAA0C,IACjDK,EADgD,EAAdT,WACfhE,KAAI,SAACjG,EAAMmG,GAClC,IAAMxN,EAAOU,aAAiB2G,GAC9B,OACE,kBAAC2K,GAAD,CAAqBxT,IAAKgP,EAAGpE,MAAOoE,EAAG8D,WAAYjK,EAAMrH,KAAMA,OAGnE,OAAO,yBAAK6K,UAAU,oBAAoBkH,G,ICPvBE,G,2MACnBtU,MAAQ,CACNuU,UAAU,G,EAGZC,oBAAsB,WACpB,EAAKhH,UAAS,SAAAxN,GAAK,MAAK,CAAEuU,UAAWvU,EAAMuU,c,wEAGnC,IAAD,OACCE,EAAkBhH,KAAKC,MAAvB+G,cAEFC,EAAkBzG,KAAW,WAAY,CAC7C,mBAAoBR,KAAKzN,MAAMuU,WAGjC,OACE,yBAAKrH,UAAU,gBACb,0BAAMA,UAAWwH,GACf,uBACExH,UAAU,cACVyH,SAAS,IACTtG,QAASZ,KAAK+G,oBACdI,OAAQ,kBAAM,EAAKpH,SAAS,CAAE+G,UAAU,MAExC,kBAACpH,GAAD,CAAMzI,KAAK,kBAEb,yBAAKwI,UAAU,iBACb,0BAAM2H,YAAa,kBAAMJ,MACvB,kBAACtH,GAAD,CAAMzI,KAAK,WADb,4B,GA5BkC6J,aCExCsF,GAAa,CACjBC,MAAOC,GACPlI,OAAQmI,GACRC,OAAQP,IAGK,SAASoB,GAAT,GAKX,IAJFzS,EAIC,EAJDA,KACAnB,EAGC,EAHDA,SACAyS,EAEC,EAFDA,WACAoB,EACC,EADDA,YAEMZ,EAAmBN,GAAWxR,GAEpC,OACE,yBAAK6K,UAAU,4BACb,yBAAKA,UAAS,mBAAc7K,IAC1B,2BACEV,MAAOT,EACPgM,UAAU,kBACV7K,KAAK,OACLuR,UAAQ,IAEV,kBAAC,GAAD,CACEa,cAAe,WACbM,EAAY,aAAD,OAAc7T,EAAd,MAA4ByS,OAI7C,kBAACQ,EAAD,CAAkBR,WAAYA,K,sHC9B5B9O,GAAqBqC,GAArBrC,iBAEamQ,G,0LACD5S,GAAO,IAAD,EACWqL,KAAKC,MAA9BtB,EADc,EACdA,MAAO6I,EADO,EACPA,cACTvR,EAAW4H,GAAoBlJ,GACrB8S,OAAOC,QAAQtQ,GAAiBzC,KACrC6S,EAAc7I,EAAO1I,K,wCAGhB0R,EAAMhJ,GAAQ,IAAD,OAC7B,OAAIgJ,EAAKC,WAEL,0BAAMnI,UAAU,kBAAkB7I,MAAM,eACtC,kBAAC8I,GAAD,CAAMzI,KAAK,aAGI,UAAV0H,EAEP,4BACEiC,QAAS,kBAAM,EAAKiH,kBAAkBF,EAAKzL,gBAC3CuD,UAAU,SACV7I,MAAM,eAHR,UAFG,I,+BAwBC,IAAD,EAC0BoJ,KAAKC,MAA9BW,EADD,EACCA,QAAS+G,EADV,EACUA,KAAMhJ,EADhB,EACgBA,MACjBmJ,EAAO9H,KAAK+H,YAChB,yBAAKC,IAAKL,EAAKM,SAAUC,IAAKP,EAAKzL,gBAEnC,6BACE,kBAACwD,GAAD,CAAMzI,KAAK,iBAITkR,EAAWvH,EACf,uBAAGA,QAAS,kBAAMA,EAAQ+G,EAAKzL,iBAAiB4L,GAEhD,uBAAGM,KAAMT,EAAKM,SAAUtE,OAAO,SAAS0E,IAAI,uBACzCP,GAIC7R,EAAqB,UAAV0I,EAAoBgJ,EAAKzL,cAAgByL,EAAK1Q,KAE/D,OACE,yBAAKwI,UAAU,gBACZO,KAAKsI,kBAAkBX,EAAMhJ,GAC7BwJ,EACD,0BAAM1I,UAAU,YAAYxJ,M,kCAnCf,IAAD,EAGZ+J,KAAKC,MADP0H,KAAQ/S,EAFM,EAENA,KAAM2T,EAFA,EAEAA,QAEhB,MAAa,cAAT3T,GAIG,4BAA4B6G,KAAK8M,EAAQtL,UAAU,Q,GApCrB6D,aCF1B,SAAS0H,GAAT,GAA4C,IAArB5T,EAAoB,EAApBA,KAAoB,IAAd+J,aAAc,MAAN,GAAM,EAElD8J,EADqB,CAAC,QAAS,YAAa,SAAU,eAC5BjT,SAASZ,GAA5B,UZRa,SYQb,YACUA,GADV,UZRa,SYQb,wBAEsBA,GAE/BqE,EAAQrE,EACC,cAATA,EACFqE,EAAQ,aACU,gBAATrE,IACTqE,EAAQ,gBAGV,IAAIyP,EAAQ,GACZ,GAAI/J,EAAO,CACT,IAAMgK,EAAQhK,EAAMpD,MAAM,KAC1BmN,EAAQC,EAAMzG,KAAI,SAACvN,EAAMyN,GACvB,IAAMwG,EAAe,IAANxG,EAAU,GAAKuG,EAAME,MAAM,EAAGzG,GAAG3E,KAAK,KAAO,IAC5D,OACE,wBAAIrK,IAAKgP,GACP,kBAAC,OAAD,CAAME,GAAE,UAAKmG,EAAL,YAAaG,GAAb,OAAsBjU,IAASA,OAM/C,OACE,wBAAI8K,UAAU,eACZ,4BACE,kBAAC,OAAD,CAAM6C,GAAImG,GAAOvL,GAAYjE,KAE9ByP,G,IClCcI,G,2MACnBC,eAAiB,SAAA7K,IAEf/B,EADmB,EAAK8D,MAAhB9D,QACD+B,EAAMyF,OAAOzP,Q,wEAGZ,IACA8U,EAAahJ,KAAKC,MAAlB+I,SACR,OACE,2BACEC,WAAYjJ,KAAK+I,eACjBnU,KAAK,OACL6K,UAAU,QACVyJ,YAAW,oBAAeF,S,GAbOlI,aCMvCrJ,GAIEgC,GAJFhC,kBACAC,GAGE+B,GAHF/B,gBACAC,GAEE8B,GAFF9B,wBACAC,GACE6B,GADF7B,sBAkBWuR,GAAmB,eAACpT,EAAD,uDAAa,GAAb,OAAoB,SAAAgE,GAElD,OADAA,EAAS,CAAEnF,KAf4B,8BAgBhC+E,GACLlD,EAAkBV,GAClB,CAAEnB,KAjBmC,4BAiBFqC,KAAM,SACzC,CAAErC,KAjBmC,4BAiBFqC,KAAM,SACzC8C,KAISqP,GAAoB,SAACrT,EAAWsT,GAAZ,OAAsB,SAAAtP,GACrDjH,KAAEoC,KAAKmU,GAAO,SAAA1B,GACZ,IAAM2B,EAAS,IAAIC,WACnBD,EAAOE,cAAc7B,GACrB2B,EAAOG,UAAY,WACjB,IAAMtK,EAAUZ,KAAKe,UAAU,CAC7BoK,gBAAiBJ,EAAOxV,OAAOyH,MAAM,WAAW,KAGlD,OAAOvB,MAAMtD,EAAiBX,EAAW4R,EAAK1Q,MAAO,CACnDyD,OAAQ,MACRD,KAAM0E,EACNlF,YAAa,gBAEZC,MAAK,SAAAG,GACJN,EAAS,CAAEnF,KAhCiB,2BAiC5BmF,EAASoP,GAAiBpT,IAC1BgE,EACEpD,EACEc,KACAE,GAAwBgQ,EAAK1Q,MAC7B,eAILqD,OAAM,SAAAC,GACLR,EAAS,CACPnF,KA3C0B,yBA4C1B2F,UAEFR,EACEpD,EAAgBe,KAAmBE,KAAyB,mBAO3D+R,GAAmB,SAAC5T,EAAWE,GAAZ,OAAyB,SAAA8D,GACvD,IAAMmC,EAAgB4C,GAAoB/I,EAAWE,GACrD,OAAO2E,GACLlE,EAAiBX,EAAWE,GAC5B,CAAErB,KAxDmC,4BAwDFqC,KAAM,OAAQ4D,GAAIqB,GACrD,CAAEtH,KAxDmC,4BAwDFqC,KAAM,SACzC8C,KAwDG,IAAM6P,GAAmB,SAAC/Q,EAAa+C,GAC5C,OAAIA,EACK/C,EAAYgD,QAAO,SAAAgO,GAAE,OAC1BA,EAAGlV,KAAKoH,cAAcvG,SAASoG,EAAMG,kBAGlClD,GCpIIiR,GAAb,6LAGIX,EAD6BnJ,KAAKC,MAA1BkJ,kBACS,WAHrB,kDAOI,IAAM7G,EAAE,UfrBgB,SeqBhB,gBAER,OACE,yBAAK7C,UAAU,gBACb,kBAAC,OAAD,CAAMA,UAAU,eAAe6C,GAAIA,GAAnC,wBAXR,0CAkBuB,IAAD,EACmBtC,KAAKC,MAAlCoJ,EADU,EACVA,MAAOU,EADG,EACHA,kBAEf,OAAIV,EAAMhW,OAEN,yBAAKoM,UAAU,qBACZ4J,EAAMnH,KAAI,SAACyF,EAAMvF,GAChB,OACE,kBAAC,GAAD,CACEhP,IAAKgP,EACLxB,QAASmJ,EACTpL,MAAM,QACNgJ,KAAMA,QAQd,yBAAKlI,UAAU,gBACb,kBAACC,GAAD,CAAMzI,KAAK,yBACX,+CACA,mGAzCV,+BAiDY,IAAD,EACmC+I,KAAKC,MAAvC6F,EADD,EACCA,WAAY3J,EADb,EACaA,OAAQ6N,EADrB,EACqBA,UAE5B,OAAIlE,EACK,KAIP,kBAAC,IAAD,CAAelP,MAAM,uBACnB,6BACE,yBAAK6I,UAAU,kBACb,kBAAC+I,GAAD,CAAa5T,KAAK,iBAChBoV,GAAahK,KAAKiK,4BACpB,yBAAKxK,UAAU,cACb,kBAAC,GAAD,CAAauJ,SAAS,WAAW7M,OAAQA,MAG7C,yBAAKsD,UAAU,eAAeO,KAAKkK,2BAlE7C,GAAiCpJ,aAgGlB0C,gBAdS,SAAAjR,GAAK,MAAK,CAChC8W,MAAOO,GAAiBrX,EAAMsG,YAAYwQ,MAAO9W,EAAM4X,MAAMvO,OAC7DkK,WAAYvT,EAAMsG,YAAYiN,eAGL,SAAA/L,GAAQ,OACjC0J,YACE,CACE0F,oBACAhN,WAEFpC,KAGWyJ,CAA6CsG,ICxGvCM,G,2MACnB7X,MAAQ,CACN8X,WAAW,G,EAGbC,aAAe,CACbC,QAAS,CACP3F,gBAAiB,kBACjB4F,OAAQ,IAEVzV,QAAS,CACPyP,OAAQ,GACRiG,WAAY,EACZC,aAAc,GACdC,YAAa,K,EAIjBC,UAAY,kBAAM,EAAK7K,SAAS,CAAEsK,WAAW,K,EAC7CQ,UAAY,kBAAM,EAAK9K,SAAS,CAAEsK,WAAW,K,EAE7CS,WAAa,SAAAnW,GACX,EAAKsL,MAAM8K,OAAOpW,GAClB,EAAKkW,a,wEAIL,OACE,0BAAMpL,UAAU,kBACd,4BAAQmB,QAASZ,KAAK4K,UAAWlF,IAAI,WACnC,kBAAChG,GAAD,CAAMzI,KAAK,eAEb,kBAAC,KAAD,CACE+T,OAAQhL,KAAKzN,MAAM8X,UACnBY,aAAa,aACbC,eAAgBlL,KAAK6K,UACrBnK,MAAOV,KAAKsK,cAEZ,yBAAK7K,UAAU,WACb,kBAAC,GAAD,CAAasK,kBAAmB/J,KAAK8K,WAAYd,WAAS,W,GAvC9BlJ,aCDhC1J,GAAqBqC,GAArBrC,iBAEa+T,G,YACnB,WAAYlL,GAAQ,IAAD,8BACjB,4CAAMA,KAoDRmL,SAAW,CAAC,IAAK,IAAK,SArDH,EAuDnBC,YAAc,SAAArW,GAAM,IACVsW,EAAa,EAAK/Y,MAAlB+Y,SACF1P,EAAQ5G,EAAE2O,OAAOzP,MAEnB0H,EAAMvI,QAAU,EAAK+X,SAAS5V,SAASR,EAAE5B,KAC3C,EAAKmY,UAAU3P,GACN0P,EAASjY,QAA2B,IAAjBuI,EAAMvI,QAA0B,cAAV2B,EAAE5B,KACpD,EAAKoY,WAAW,IA9DD,EAkEnBC,eAAiB,SAAAzW,GACf,IAAMd,EAAQc,EAAE2O,OAAOzP,MACvB,EAAK6L,UAAS,SAAAxN,GACZ,MAAO,CAAEmZ,SAAUxX,OArEJ,EAyEnByX,gBAAkB,WAChB,EAAK5L,UAAS,SAAAxN,GACZ,MAAO,CAAEqZ,aAAa,OA3EP,EA+EnBC,iBAAmB,WACjB,EAAK9L,UAAS,SAAAxN,GACZ,MAAO,CAAEqZ,aAAa,OAjFP,EAqFnBE,WAAa,SAAAC,GACX,IAAMC,EAAYD,EAAIrO,WAAWnC,MAAM,KACvC,EAAKwE,UAAS,SAAAxN,GACZ,MAAO,CAAE+Y,SAAUU,OArFrB,EAAKzZ,MAAQ,CACXmZ,SAAU,GACVJ,SAAUrL,EAAMiG,YAAc,GAC9B0F,aAAa,GANE,E,uFAUOrG,GAAY,IAC5BW,EAAeX,EAAfW,WACRlG,KAAKD,SAAS,CAAEuL,SAAUpF,GAAc,O,2CAGpB,IAAD,EACoBlG,KAAKC,MAApChM,EADW,EACXA,UACRgY,EAFmB,EACDA,kBACDhY,EAAU+L,KAAKzN,MAAM+Y,Y,gCAG9BpX,GAAQ,IACRoX,EAAatL,KAAKzN,MAAlB+Y,SACFY,EAAK,aAAOZ,GAGbY,EAAM1W,SAAStB,KAClBgY,EAAMlZ,KAAKkB,GAEX8L,KAAKD,UAAS,SAAAxN,GACZ,MAAO,CACL+Y,SAAUY,EACVR,SAAU,GACVE,aAAa,S,gCAMX5N,GAAQ,IACRsN,EAAatL,KAAKzN,MAAlB+Y,SACFY,EAAK,aAAOZ,GAEZa,GAAqB,IAAXnO,EAAekO,EAAMrD,OAAO,GAAGuD,MAAQF,EAAMlO,GAC7CyJ,OAAOC,QAAQtQ,GAAiB,QAAD,OAAS+U,OAGtDD,EAAM5Y,OAAO0K,EAAO,GACpBgC,KAAKD,SAAS,CAAEuL,SAAUY,IAC1BlM,KAAKsF,KAAK+G,SAASC,W,+BA4Cb,IAAD,OACChB,EAAatL,KAAKzN,MAAlB+Y,SACFI,EAAQ,UAAM1L,KAAKzN,MAAMmZ,UAEzBa,EAAcvM,KAAKC,MAAMsM,YAAY1Q,QAAO,SAAA2Q,GAChD,OAAOA,EAAMC,WAAWf,MAG1B,KAAMJ,aAAoB7M,OACxB,OACE,0BAAMgB,UAAU,cAAhB,sCACqC,gCAAS6L,GAC5C,6BACA,0BAAM1K,QAAS,kBAAM,EAAKkL,WAAWR,KAArC,cAHF,eASJ,IACMoB,EADUpB,EAASzP,OAAOgD,SACXqD,KAAI,SAAC6J,EAAK3J,GAC7B,OACE,0BAAMhP,IAAKgP,EAAG3C,UAAU,OACrBsM,EACD,0BAAMtM,UAAU,aAAamB,QAAS,kBAAM,EAAK4K,UAAUpJ,UAK3DuK,EAAWJ,EAAYrK,KAAI,SAACjG,EAAMmG,GACtC,OAAKkJ,EAAS9V,SAASyG,GAOhB,KALH,wBAAI7I,IAAKgP,EAAGxB,QAAS,kBAAM,EAAK2K,UAAUtP,KACvCA,MAKNJ,OAAOgD,SAEJ+N,EAAoBpM,KAAW,kBAAmB,CACtDqM,QAAS7M,KAAKzN,MAAMqZ,cAGtB,OACE,yBAAKnM,UAAU,+BACZiN,EAAKrZ,OAAS,GAAK,yBAAKoM,UAAU,aAAaiN,GAEhD,yBAAKjN,UAAU,cACb,2BACE7K,KAAK,OACLkY,SAAU9M,KAAKyL,eACfsB,QAAS/M,KAAK2L,gBACdqB,QAAShN,KAAKqL,YACdnX,MAAOwX,EAASvO,QAAQ,QAAS,IACjCuI,IAAI,aAGN,kBAAC,KAAD,CACEjG,UAAU,oBACVvL,MAAO8L,KAAKzN,MAAM+Y,SAAS5N,WAC3BuP,QAAM,KAGTN,EAAStZ,OAAS,GACjB,yBAAKoM,UAAWmN,GACd,4BAAKD,GACL,yBAAKlN,UAAU,oBAAoBmB,QAASZ,KAAK6L,kBAAjD,2B,GAhK0B/K,aA0KtCqK,GAASpK,aAAe,CACtBmF,WAAY,GACZqG,YAAa,I,OCxKfW,KAAgBtL,MAET,IAuIQuL,GAvIf,2MACEC,qBAAuB,SAAApY,GAAM,IAAD,EACa,EAAKiL,MAApChM,EADkB,EAClBA,UACRgY,EAF0B,EACRA,kBACDhY,EAAUe,EAAE2O,OAAOzP,QAHxC,EAMEmZ,uBAAyB,SAAC1L,EAAM2L,GAAa,IAAD,EACH,EAAKrN,MAApChM,EADkC,EAClCA,UAERgY,EAH0C,EACxBA,kBAEDhY,EADD2N,KAAOD,GAAME,OAAO,yBARxC,EAYE0L,mBAAqB,SAAAvY,GAAM,IAAD,EACe,EAAKiL,MAApChM,EADgB,EAChBA,UACRgY,EAFwB,EACNA,kBACDhY,EAAUe,EAAE2O,OAAOzP,MAAMoK,SAd9C,EA0CEwM,WAAa,SAAAnW,GAAS,IAAD,EACoB,EAAKsL,MAApChM,EADW,EACXA,SAAUgY,EADC,EACDA,iBAClB,EAAK3G,KAAKkI,YAAYtZ,MAAQS,EAC9BsX,EAAiBhY,EAAUU,IA7C/B,EA+DE8Y,mBAAqB,SAAAvZ,GAAU,IAAD,EACW,EAAK+L,MAApChM,EADoB,EACpBA,UACRgY,EAF4B,EACVA,kBACDhY,EAAUC,IAjE/B,gFAiBoB,IACRgS,EAAelG,KAAKC,MAApBiG,WACR,OACE,kBAAC,KAAD,CACE4G,SAAU9M,KAAKoN,qBACfjG,OAAQnH,KAAKuN,mBACb9N,UAAU,oBACVvL,MAAK,UAAKgS,OAxBlB,yCA6BsB,IACVA,EAAelG,KAAKC,MAApBiG,WACJwH,EAAY,IAAIC,KAAKzH,GAEzB,MADuB,iBAAnB,UAAGwH,KAAgCA,EAAY,MAEjD,kBAAC,KAAD,CACEZ,SAAU9M,KAAKqN,uBACf5N,UAAU,aACVvL,MAAOwZ,MArCf,+CAgD4B,IAChBxH,EAAelG,KAAKC,MAApBiG,WACR,OACE,yBAAKzG,UAAU,eACb,kBAAC,KAAD,CACEqN,SAAU9M,KAAKoN,qBACf3N,UAAU,oBACVvL,MAAOgS,EACPR,IAAI,gBAEN,kBAAC,GAAD,CAAYqF,OAAQ/K,KAAK8K,gBA1DjC,2CAoEwB,IAAD,EACc9K,KAAKC,MAA9BiG,EADW,EACXA,WAAY0H,EADD,EACCA,SAEpB,IAAKA,EAAU,OAAO5N,KAAK6N,iBAC3B,IAAMC,EAAUF,EAASE,SAAW,GAEpC,OACE,kBAAC,KAAD,CACErO,UAAU,eACVpF,KAAI,CAAG,QAAH,oBAAcyT,IAClBC,aAAc7H,EACd4G,SAAU9M,KAAKyN,uBA/EvB,sCAoFkBra,GAAM,IAAD,EAC0C4M,KAAKC,MAA1DiG,EADW,EACXA,WAAYjS,EADD,EACCA,SAAUgY,EADX,EACWA,iBAAkB2B,EAD7B,EAC6BA,SAC1CrB,EAAeqB,GAAYA,EAASxa,IAAS,GAEnD,OACE,kBAAC,GAAD,CACE8S,WAAYA,EACZjS,SAAUA,EACVgY,iBAAkBA,EAClBM,YAAaA,MA7FrB,+BAkGY,IAGJzE,EAHG,EACwB9H,KAAKC,MAA5BxM,EADD,EACCA,SAAUQ,EADX,EACWA,SAGlB,OAAQR,GACN,IAAK,OACHqU,EAAO9H,KAAKgO,mBACZ,MACF,IAAK,QACL,IAAK,OACHlG,EAAO9H,KAAKiO,yBACZ,MACF,IAAK,OACL,IAAK,aACHnG,EAAO9H,KAAKkO,gBAAgBza,GAC5B,MACF,QACEqU,EAAO9H,KAAK6N,iBAOhB,MAJiB,uBAAb5Z,IACF6T,EAAO9H,KAAKmO,sBAGP,yBAAK1O,UAAU,cAAcqI,OA1HxC,GAAgChH,aCRXsN,G,2MACnB7b,MAAQ,CACNuU,UAAU,G,EAGZuH,WAAa,CACX7H,OAAQ,CACNpG,KAAM,SACNnH,MAAO,UAEToN,MAAO,CACLjG,KAAM,UACNnH,MAAO,QAETmF,OAAQ,CACNgC,KAAM,WACNnH,MAAO,W,EAIXqV,cAAgB3a,OAAOC,KAAK,EAAKya,Y,EAEjCtH,oBAAsB,WACpB,EAAKhH,UAAS,SAAAxN,GACZ,MAAO,CAAEuU,UAAWvU,EAAMuU,c,mFAIVlS,GAAO,IAAD,SACcoL,KAAKC,MAAnCsO,EADgB,EAChBA,eAER,MAAkB,SAHM,EACAC,UAES,KAE1BxO,KAAKsO,cACTpM,KAAI,SAACuM,EAAOrM,GACX,GAAIxN,IAAS6Z,EAAO,CAAC,IAAD,EACM,EAAKJ,WAAWI,GAAhCrO,EADU,EACVA,KAAMnH,EADI,EACJA,MACd,OACE,0BAAM7F,IAAKgP,EAAGgF,YAAa,kBAAMmH,EAAeE,KAC9C,kBAAC/O,GAAD,CAAMzI,KAAMmJ,IADd,cAEcnH,GAKlB,OAAO,QAER4C,OAAOgD,W,+BAGF,IAAD,SAMHmB,KAAKC,MAJPyO,EAFK,EAELA,YACAC,EAHK,EAGLA,WACAC,EAJK,EAILA,cACAC,EALK,EAKLA,eAEIC,EACJ,0BAAMrP,UAAU,QACd,kBAACC,GAAD,CAAMzI,KAAK,YAITgQ,EAAkBzG,KAAW,WAAY,CAC7C,mBAAoBR,KAAKzN,MAAMuU,WAGjC,OACE,yBAAKrH,UAAU,gBACG,UAAfkP,GAA0BG,EAC3B,0BAAMrP,UAAWwH,GACf,uBACExH,UAAU,cACVyH,SAAS,IACTtG,QAASZ,KAAK+G,oBACdI,OAAQ,kBAAM,EAAKpH,SAAS,CAAE+G,UAAU,MAExC,kBAACpH,GAAD,CAAMzI,KAAK,kBAEb,yBAAKwI,UAAU,iBACZO,KAAK+O,oBAAoBL,GAC1B,0BAAMtH,YAAa,kBAAMwH,KAAiBnP,UAAU,gBAClD,kBAACC,GAAD,CAAMzI,KAAM4X,EAAiB,OAAS,YACrCA,EAAiB,oBAAsB,uB,GAnFb/N,aC+F1BkO,GA5Ff,2LACqBpa,GAAO,IAAD,EACYoL,KAAKC,OACxCgP,EAFuB,EACfA,cADe,EACDhb,SACCW,KAH3B,sCAMmB,IAAD,EACmCoL,KAAKC,MAA9CzN,EADM,EACNA,WAAYiB,EADN,EACMA,SAAUyb,EADhB,EACgBA,eAC1BC,EAAeC,sBAAYpP,KAAKsF,KAAK+J,WAAWnb,MAChDT,IAAa0b,GAAiC,KAAjBA,GAC/BD,EAAe1c,EAAYiB,EAAU0b,KAV3C,0CAcuB,IAAD,EAC4BnP,KAAKC,OACnDqP,EAFkB,EACVA,aADU,EACG9c,WADH,EACeiB,YAfrC,+BAmBY,IAAD,SAaHuM,KAAKC,MAXPrL,EAFK,EAELA,KACAnB,EAHK,EAGLA,SACAyS,EAJK,EAILA,WACAjS,EALK,EAKLA,SACAsb,EANK,EAMLA,SACAD,EAPK,EAOLA,YACAJ,EARK,EAQLA,eACAjD,EATK,EASLA,iBACAgD,EAVK,EAULA,aACAO,EAXK,EAWLA,WACAC,EAZK,EAYLA,cAOI/I,EALa,CACjBL,MAAOqJ,GACPtR,OAAQuR,GACRnJ,OAAQ2G,IAE0BvY,GACpC,OACE,yBAAK8Q,IAAI,OAAOjG,UAAU,oBACxB,yBAAKA,UAAS,qBAAgB7K,IAC5B,2BACE8Q,IAAI,YACJyB,OAAQ,SAAAnS,GAAC,OAAI,EAAK4a,cAAc5a,IAChC+Y,aAActa,EACdgM,UAAU,kBACV7K,KAAK,OACLsU,YAAY,QAEd,kBAAC,GAAD,CACEwF,YAAa9Z,EACb+Z,WAAW,SACXJ,eAAgB,SAAA3Z,GAAI,OAAI,EAAKib,mBAAmBjb,IAChDga,cAAe,kBAAM,EAAKkB,wBAG9B,yBAAKrQ,UAAU,gBACb,kBAACiH,EAAD,CACE8I,WAAYA,EACZb,WAAW,SACXlb,SAAUA,EACVyS,WAAYA,EACZqJ,SAAUA,EACVD,YAAaA,EACbJ,eAAgBA,EAChBjD,iBAAkBA,EAClBwD,cAAeA,EACfR,aAAcA,EACdhb,SAAUA,EACVzB,WAAYyB,UAtExB,GAAoC6M,aC6DrB6O,GA/Df,iLACY,IAAD,EAYH3P,KAAKC,MAVPxM,EAFK,EAELA,SACAyS,EAHK,EAGLA,WACA1T,EAJK,EAILA,WACA+c,EALK,EAKLA,SACAD,EANK,EAMLA,YACAJ,EAPK,EAOLA,eACAjD,EARK,EAQLA,iBACAgD,EATK,EASLA,aACAO,EAVK,EAULA,WACAC,EAXK,EAWLA,cAEI9I,EAAQ7T,KAAEoP,IAAIgE,GAAY,SAAChS,EAAOd,GACtC,IAAMwB,EAAOU,aAAiBpB,EAAOd,GACrC,OACE,kBAAC,GAAD,CACEA,IAAKA,EACLoc,WAAYA,EACZ/b,SAAUL,EACV8S,WAAYhS,EACZU,KAAMA,EACN2a,SAAUA,EACVD,YAAaA,EACbJ,eAAgBA,EAChBjD,iBAAkBA,EAClBwD,cAAeA,EACfR,aAAcA,EACdhb,SAAQ,UAAKzB,EAAL,aAAoBY,EAApB,MACRZ,WAAYA,OAIlB,OACE,yBAAKiN,UAAU,qBACZkH,EACD,uBACE/F,QAAS,kBAAM2O,EAAS/c,IACxBiN,UAAU,mBACV7I,MAAM,0BAHR,4BAK2B,gCAASnD,SA1C5C,GAAgCqN,aCiFjBiP,GAhFf,2LACqBnb,GAAO,IAAD,EACYoL,KAAKC,OACxCgP,EAFuB,EACfA,cADe,EACDhb,SACCW,KAH3B,0CAMuB,IAAD,EACyBoL,KAAKC,OAChDqP,EAFkB,EACVA,aADU,EACG9c,WADH,EACewL,SAPrC,+BAWY,IAAD,SAcHgC,KAAKC,MAZPrL,EAFK,EAELA,KACAnB,EAHK,EAGLA,SACAyS,EAJK,EAILA,WACAlI,EALK,EAKLA,MACA/J,EANK,EAMLA,SACAsb,EAPK,EAOLA,SACAD,EARK,EAQLA,YACAJ,EATK,EASLA,eACAjD,EAVK,EAULA,iBACAwD,EAXK,EAWLA,cACAR,EAZK,EAYLA,aACAO,EAbK,EAaLA,WAOI9I,EALa,CACjBL,MAAOqJ,GACPtR,OAAQuR,GACRnJ,OAAQ2G,IAE0BvY,GACpC,OACE,yBAAK8Q,IAAI,OAAOsK,UAAShS,EAAOyB,UAAU,mBACxC,yBAAKA,UAAU,SACb,yBAAKA,UAAU,gBACb,0BAAMA,UAAU,mBAAmBzB,EAAQ,EAA3C,KACA,kBAAC,GAAD,CACE0Q,YAAa9Z,EACb+Z,WAAW,QACXJ,eAAgB,SAAA3Z,GAAI,OAAI,EAAKib,mBAAmBjb,IAChDga,cAAe,kBAAM,EAAKkB,wBAG9B,kBAACpJ,EAAD,CACE8I,WAAYA,EACZb,WAAW,QACXlb,SAAUA,EACVyS,WAAYA,EACZqJ,SAAUA,EACVD,YAAaA,EACbJ,eAAgBA,EAChBjD,iBAAkBA,EAClBwD,cAAeA,EACfR,aAAcA,EACdhb,SAAUA,EACVzB,WAAYyB,UAxDxB,GAAmC6M,aCoFpB4O,GApFf,+LACyBO,GAAY,IAAD,EACMjQ,KAAKC,MAAnCwP,EADwB,EACxBA,cAAejd,EADS,EACTA,WACvB,GAAIyd,EAAW,CACb,IAAMC,EAAU,CACdC,UAAW,mBACXC,MAAO,CAAEnZ,KAAM,mBAAoBoZ,MAAM,EAAO7V,KAAK,GACrD8V,OAAQ,QACRC,UAAW,EACXC,MAAO,SAAAxb,GACL,IAAIV,EAASU,EAAEiH,KAAKwU,aAAa,WACjChB,EAAcjd,EAAY8B,EAAQU,EAAE0b,YAGxCC,KAASxX,OAAO8W,EAAWC,MAdjC,+BAkBY,IAAD,EAYHlQ,KAAKC,MAVPxM,EAFK,EAELA,SACAyS,EAHK,EAGLA,WACA1T,EAJK,EAILA,WACA+c,EALK,EAKLA,SACAD,EANK,EAMLA,YACAJ,EAPK,EAOLA,eACAjD,EARK,EAQLA,iBACAwD,EATK,EASLA,cACAR,EAVK,EAULA,aACAO,EAXK,EAWLA,WAEI7I,EAAQT,EAAWhE,KAAI,SAACjG,EAAMmG,GAClC,IAAMxN,EAAOU,aAAiB2G,GAC9B,OACE,kBAAC,GAAD,CACE7I,IAAG,UAAKoc,EAAL,YAAmBpN,GACtBoN,WAAYA,EACZxR,MAAOoE,EACP3O,SAAUA,EACVyS,WAAYjK,EACZrH,KAAMA,EACN2a,SAAUA,EACVD,YAAaA,EACbJ,eAAgBA,EAChBjD,iBAAkBA,EAClBwD,cAAeA,EACfR,aAAcA,EACdhb,SAAQ,UAAKzB,EAAL,YAAmB4P,EAAnB,KACR5P,WAAYA,OAIlB,OACE,yBACEiN,UAAU,mBACViG,IAAK1F,KAAK4Q,uBAAuBC,KAAK7Q,OAErC2G,EACD,uBACE/F,QAAS,kBAAM2O,EAAS/c,IACxBiN,UAAU,kBACV7I,MAAM,qBAEN,kBAAC8I,GAAD,CAAMzI,KAAK,eA/DrB,GAA+B6J,aC+GhBgQ,GA9Gf,4LAEuB,YAAYrV,KAAKuE,KAAKC,MAAMxM,WACjCuM,KAAKsF,KAAK+J,UAAU0B,WAHtC,yCAMqBnc,GAAO,IAAD,EACYoL,KAAKC,OACxCgP,EAFuB,EACfA,cADe,EACDhb,SACCW,KAR3B,sCAWmB,IAAD,EACmCoL,KAAKC,MAA9CzN,EADM,EACNA,WAAYiB,EADN,EACMA,SAAUyb,EADhB,EACgBA,eAC1BC,EAAeC,sBAAYpP,KAAKsF,KAAK+J,WAAWnb,MAChDT,IAAa0b,GAAiC,KAAjBA,GAC/BD,EAAe1c,EAAYiB,EAAU0b,KAf3C,0CAmBuB,IAAD,EAC4BnP,KAAKC,OACnDqP,EAFkB,EACVA,aADU,EACG9c,WADH,EACeiB,YApBrC,+BAwBY,IAAD,SAiBHuM,KAAKC,MAfPrL,EAFK,EAELA,KACA+Z,EAHK,EAGLA,WACAlb,EAJK,EAILA,SACAyS,EALK,EAKLA,WACA1T,EANK,EAMLA,WACA+c,EAPK,EAOLA,SACAD,EARK,EAQLA,YACAJ,EATK,EASLA,eACAjD,EAVK,EAULA,iBACAwD,EAXK,EAWLA,cACAR,EAZK,EAYLA,aACAO,EAbK,EAaLA,WACA5B,EAdK,EAcLA,SACAoD,EAfK,EAeLA,iBACAnC,EAhBK,EAgBLA,eAQInI,EALa,CACjBL,MAAOqJ,GACPtR,OAAQuR,GACRnJ,OAAQ2G,IAE0BvY,GACpC,OACE,yBAAK8Q,IAAI,OAAOjG,UAAU,aACxB,yBAAKA,UAAS,mBAAc7K,IAC1B,2BACE8Q,IAAI,YACJyB,OAAQ,kBAAM,EAAKyI,iBACnB7B,aAActa,EACdgM,UAAU,kBACV7K,KAAK,OACLsU,YAAY,MACZ/C,SAAU6K,IAEZ,kBAAC,GAAD,CACEtC,YAAa9Z,EACbia,eAAgBA,EAChBF,WAAW,MACXH,UAAW/a,EACX8a,eAAgB,SAAA3Z,GAAI,OAAI,EAAKib,mBAAmBjb,IAChDga,cAAe,kBAAM,EAAKkB,wBAG9B,kBAACpJ,EAAD,CACE8I,WAAYA,EACZ/b,SAAUA,EACVkb,WAAYA,EACZzI,WAAYA,EACZqJ,SAAUA,EACVD,YAAaA,EACbJ,eAAgBA,EAChBjD,iBAAkBA,EAClBwD,cAAeA,EACfR,aAAcA,EACdhb,SAAQ,UAAKzB,EAAL,aAAoBiB,EAApB,MACRjB,WAAU,UAAKA,EAAL,aAAoBiB,EAApB,MACVma,SAAUA,EACVoD,iBAAkBA,SApF5B,GAA+BlQ,aCelBmQ,GAAqB,SAAAlc,GAAO,MAAK,CAC5CH,KAXkC,uBAYlCG,YAGWwa,GAAW,SAAA/c,GAAU,MAAK,CACrCoC,KAf2B,gBAgB3BpC,eAGW8c,GAAc,SAAC9c,EAAYY,GAAb,MAAsB,CAC/CwB,KAnB8B,mBAoB9BpC,aACAY,QAGWkU,GAAc,SAACrT,EAAUC,GAAX,MAAsB,CAC/CU,KApB0B,eAqB1BX,WACAC,UAGWgb,GAAiB,SAAC1c,EAAYiB,EAAUC,GAAvB,MAAmC,CAC/DkB,KA9B8B,mBA+B9BpC,aACAiB,WACAC,WAGWuY,GAAmB,SAAChY,EAAUC,GAAX,MAAsB,CACpDU,KApCgC,qBAqChCX,WACAC,UAGWub,GAAgB,SAACjd,EAAY8B,EAAQC,GAArB,MAAoC,CAC/DK,KAzC6B,kBA0C7BpC,aACA8B,SACAC,cAGW0a,GAAe,SAAChb,EAAUG,GAAX,MAA4B,CACtDQ,KA/C2B,gBAgD3BX,WACAG,gBAGW8c,GAAc,SAAAta,GAAK,MAAK,CACnChC,KA9D0B,eA+D1BgC,UAGWua,GAAa,SAAA1W,GAAI,MAAK,CACjC7F,KAlEyB,cAmEzB6F,SAGW2W,GAAa,SAAAzc,GAAI,MAAK,CACjCC,KAtEyB,cAuEzBD,SC/EK,IAKM0c,GAAgB,kBAAM,SAAAtX,GAEjC,OADAA,EAAS,CAAEnF,KAN0B,4BAO9B+E,G1CNqB,UAAS/D,EAAT,c0CQ1B,CAAEhB,KARiC,0BAQFqC,KAAM,QACvC,CAAErC,KARiC,0BAQFqC,KAAM,SACvC8C,KCOG,IAAMuX,GAAb,4LACuB,IAAD,EAC8CtR,KAAKC,MAA7DgR,EADU,EACVA,mBAAoBM,EADV,EACUA,OAAQF,EADlB,EACkBA,cADlB,EACiCG,UACpCH,IACfJ,EAAmBM,KAJvB,4CAOwBhM,GACpB,OAAQzS,KAAE2e,QAAQlM,EAAUrS,SAAU8M,KAAKC,MAAM/M,YARrD,+BAWY,IAAD,EAcH8M,KAAKC,MAZP/M,EAFK,EAELA,SACAqc,EAHK,EAGLA,SACAjI,EAJK,EAILA,YACAgI,EALK,EAKLA,YACAJ,EANK,EAMLA,eACAjD,EAPK,EAOLA,iBACAwD,EARK,EAQLA,cACAR,EATK,EASLA,aACAO,EAVK,EAULA,WACAgC,EAXK,EAWLA,SACAE,EAZK,EAYLA,KACAC,EAbK,EAaLA,aAGEC,EAAW,eAAQD,EAAR,GAAyBze,GAEnCse,IACHI,EAAc9e,KAAEyO,KAAKqQ,EAAa,CAAC,QAAS,OAAQ,iBAGtD,IAAMC,EAAkBrR,KAAW,CACjCsR,WAAYN,EACZvc,YAAauc,IAGTO,EAA8Bjf,KAAEyO,KACpCoQ,EACAhe,OAAOC,KAAKV,IAGR+B,EAAanC,KAAEoP,IAAI0P,GAAa,SAACjf,EAAOS,GAC5C,IAAMwB,EAAOU,aAAiB3C,EAAOS,GACrC,OAAI2e,EAA4BC,eAAe5e,GAE3C,kBAACiU,GAAD,CACEjU,IAAKA,EACLwB,KAAMA,EACNnB,SAAUL,EACV8S,WAAYvT,EACZ2U,YAAaA,IAMjB,kBAAC,GAAD,CACElU,IAAKA,EACLoc,WAAYA,EACZ5a,KAAMA,EACN+Z,WAAW,MACXlb,SAAUL,EACV8S,WAAYvT,EACZ4c,SAAUA,EACVD,YAAaA,EACbJ,eAAgBA,EAChBjD,iBAAkBA,EAClBwD,cAAeA,EACfR,aAAcA,EACdhb,SAAQ,oBAAeb,EAAf,MACRZ,WAAU,WACVob,SAAU4D,EAAW,KAAOE,EAC5BV,iBAAkBe,EAA4BC,eAAe5e,GAC7Dyb,eAAgB8C,GAAgBA,EAAaK,eAAe5e,QAK5D6e,EAAaT,EACjB,yBAAK/R,UAAU,YACb,uBAAGmB,QAAS,kBAAM2O,EAAS,cACzB,kBAAC7P,GAAD,CAAMzI,KAAK,gBADb,oBAKF,yBAAKwI,UAAU,YACb,uBAAGmB,QAAS,kBAAM2O,EAAS,aAAa9P,UAAU,WAChD,kBAACC,GAAD,CAAMzI,KAAK,gBADb,sBAEE,0BAAMwI,UAAU,gBAAhB,kCACiC,gDADjC,0BAKF,2BAAOA,UAAU,sBACf,kBAACC,GAAD,CAAMzI,KAAK,gBADb,eAGE,0BAAMwI,UAAU,gBAAhB,iCACgC,mCADhC,KAC6C,mCAD7C,KAC0D,oCAD1D,KAEI,qCAFJ,OAEqB,mCAFrB,yCAQN,OACE,yBAAKA,UAAWoS,GACb5c,EACAgd,OA7GT,GAAgCnR,aA2JjB0C,gBAtBS,SAAAjR,GAAK,MAAK,CAChCW,SAAUX,EAAMW,SAASA,SACzBsc,WAAYjd,EAAMW,SAASsc,WAC3BkC,KAAMnf,EAAM2f,KAAKR,SAGQ,SAAA3X,GAAQ,OACjC0J,YACE,CACEwN,sBACAI,iBACA9B,YACAjI,eACAgI,eACAJ,kBACAjD,oBACAwD,iBACAR,iBAEFlV,KAGWyJ,CAA6C8N,IC7KtDa,G,2MACJC,aAAe,SAAApd,GAAC,OAAI,EAAKiL,MAAM6M,SAAS9X,EAAE2O,OAAOzP,Q,gFAEhCme,EAAMC,GACrB,OACE,0BAAM7S,UAAU,iBACd,8BAAUA,UAAU,YAClB,4DACA,2BACE7K,KAAK,OACLiG,GAAG,OACHkT,aAAcsE,EACdnJ,YAAY,WACZ4D,SAAU9M,KAAKoS,aACf1M,IAAI,cAGR,8BAAUjG,UAAU,aAClB,6CACA,4BACE5E,GAAG,OACHkT,aAAcuE,EACdxF,SAAU9M,KAAKoS,aACf1M,IAAI,WAEJ,4BAAQxR,MAAM,QAAd,QACA,4BAAQA,MAAM,SAAd,a,+BAOA,IAAD,EACmC8L,KAAKC,MAAvCsR,EADD,EACCA,OAAQc,EADT,EACSA,KAAMC,EADf,EACeA,IAAKC,EADpB,EACoBA,WAC3B,OACE,6BACE,yBAAK9S,UAAU,WAAf,yFAEsB,8CAFtB,uBAIE8S,GAAcvS,KAAKwS,iBAAiBH,EAAMC,GAC5C,kBAAC,GAAD,CAAYf,OAAQA,EAAQC,UAAQ,S,GA1CtB1Q,aAgDtBqR,GAAQpR,aAAe,CACrBwQ,OAAQ,GACRc,KAAM,GACNC,IAAK,GACLC,YAAY,GAWCJ,U,qBCbAM,I,gOA1CbL,aAAe,WAAO,IAAD,EACuB,EAAKnS,MAAvCV,EADW,EACXA,gBADW,EACKmT,eACNnT,K,qFANEgG,EAAWoN,GAC/B,OAAOpN,EAAUxQ,UAAYiL,KAAKC,MAAMlL,U,iCASxC,OAAOiL,KAAKsF,KAAKsN,IAAIC,OAAOC,a,+BAGpB,IAAD,EACmB9S,KAAKC,MAAvBlL,EADD,EACCA,QAASH,EADV,EACUA,KACXme,EAAO,QAAQtX,KAAK7G,GAAQ,OAAS,OAC3C,OACE,6BACE,kBAAC,KAAD,CACEV,MAAOa,EACPge,KAAMA,EACNC,MAAM,UACN9O,MAAM,OACNgB,OAAO,QACP+N,YAAY,EACZC,iBAAiB,EACjBC,qBAAqB,EACrB1T,UAAU,gBACV4E,SAAU,GACV+O,aAAc,CAAC,GAAI,GAAI,GAAI,IAC3B1N,IAAI,MACJoH,SAAU9M,KAAKoS,eAEjB,yBAAK3S,UAAU,aAAf,SAAkCsT,EAAK/V,oB,GAlC1B8D,cCONuS,GAVA,SAAC,GAAD,IAAG/W,EAAH,EAAGA,OAAH,OACb,yBAAKmD,UAAU,kBACZ3M,KAAEoP,IAAI5F,GAAQ,SAAC/B,EAAO6H,GAAR,OAAc,yBAAKhP,IAAKgP,GAAI7H,QCAvCxB,GAAWU,GAAXV,OAEFua,GAAU,CACdna,OAAQ,cACRC,OAAQ,QACRC,QAAS,SACTL,KAAM,OACNO,OAAQ,SACRD,KAAM,OAGO,SAASia,GAAT,GASX,IAWEta,EAAOC,EAnBXtE,EAQC,EARDA,KACA4e,EAOC,EAPDA,OACAC,EAMC,EANDA,UACA7S,EAKC,EALDA,QACA8S,EAIC,EAJDA,MACAC,EAGC,EAHDA,KACAvT,EAEC,EAFDA,KACAkC,EACC,EADDA,GAEMsR,EAAWpT,KAAW,MAAO,CACjC,aAAcgT,EACd,cAAeA,IAAoB,SAAT5e,GAA4B,WAATA,GAC7C,aAAuB,WAATA,EACd,WAAqB,SAATA,GAA4B,YAATA,EAC/B,gBAAiB4e,EACjB,UAAWE,EACX,WAAYC,IAId,OAAQ/e,GACN,IAAK,OACL,IAAK,SACHqE,EAAQF,GAAOnE,GAAMqE,MACrBC,EAAiBH,GAAOnE,GAAMsE,eAC9B,MACF,IAAK,cACHD,EAAQF,GAAOS,WAAWP,MAC1BC,EAAiBH,GAAOS,WAAWN,eACnC,MACF,IAAK,OACL,IAAK,SACL,IAAK,SACL,IAAK,UACHD,EAAQF,GAAOnE,GAAMqE,MACrB,MACF,QACEA,EAAQ,UACRC,EAAiB,eAGrB,IAAM2a,EAAWzT,GAAQkT,GAAQ1e,GAC3Bkf,EAAWD,GAAY,kBAACnU,GAAD,CAAMzI,KAAM4c,IAEzC,OAAIvR,EAEA,uBAAG8F,KAAM9F,EAAIqB,OAAO,SAAS0E,IAAI,sBAAsB5I,UAAWmU,GAC/DE,EACA7a,GAGI2H,EAEP,4BAAQA,QAASA,EAASnB,UAAWmU,GAClCE,EACAL,EAAYva,EAAiBD,GAK7B,K,IC9DD5B,GAAoBoC,GAApBpC,gBAEK0c,GAAb,2MACExhB,MAAQ,CACNyhB,SAAS,GAFb,EAeEC,gBAAkB,SAAAC,GAAiB,IAAD,EACQ,EAAKjU,MAArCyS,EADwB,EACxBA,cAAeyB,EADS,EACTA,aACvB,GAAIzB,GAAiByB,EACnB,OAAO9c,MAlBb,EAsBE+c,WAAa,WACX,EAAKrU,UAAS,SAAAxN,GACZ,MAAO,CAAEyhB,SAAUzhB,EAAMyhB,aAxB/B,EA4BEK,gBAAkB,SAAArf,GAChBiJ,GAAejJ,GADM,MAE8B,EAAKiL,MAAhDyS,EAFa,EAEbA,cAAeyB,EAFF,EAEEA,aAAcnV,EAFhB,EAEgBA,UACjC0T,EAEF1T,EADc,EAAKsG,KAAKuN,OAAOC,YAEtBqB,GACTnV,EAAU,KAAM,QAnCtB,mFAKuB,IAAD,EACQgB,KAAKC,MAAvBqU,EADU,EACVA,OAAQC,EADE,EACFA,MAChBD,EAAOE,kBAAkBD,EAAOvU,KAAKiU,mBAPzC,6CAU0B,IAAD,EACWjU,KAAKC,MAA7B7D,EADa,EACbA,YADa,EACAE,OACdjJ,QAAU+I,MAZrB,0CAuCuB,IAAD,EACgC4D,KAAKC,MAA/CvL,EADU,EACVA,OAAQge,EADE,EACFA,cAAenT,EADb,EACaA,eACvBH,EAAyB1K,EAAzB0K,YAAarK,EAAYL,EAAZK,QAErB,OAAIiL,KAAKzN,MAAMyhB,SAAWjf,EACjB,kBAAC,GAAD,CAASwc,OAAQxc,EAAS+X,SAAUvN,EAAgBgT,YAAU,IAIrE,kBAAC,GAAD,CACEG,cAAeA,EACfnT,eAAgBA,EAChBxK,QAASqK,EACTsG,IAAI,aApDZ,+BAyDY,IAAD,EACkD1F,KAAKC,MAAtDyS,EADD,EACCA,cAAeyB,EADhB,EACgBA,aAActO,EAD9B,EAC8BA,QAASvJ,EADvC,EACuCA,OAExCmY,EAAmB,CACvBzb,KAAMgH,KAAKqU,iBAGb,OACE,kBAAC,IAAD,CAAezd,MAAM,iBACnB,kBAAC,UAAD,CAAS8d,SAAUD,EAAkBhV,UAAU,UAC5CnD,GAAUA,EAAOjJ,OAAS,GAAK,kBAAC,GAAD,CAAQiJ,OAAQA,IAChD,yBAAKmD,UAAU,kBACb,6CACA,yBAAKA,UAAU,yBACb,kBAAC8T,GAAD,CACE3S,QAASZ,KAAKoU,WACdxf,KAAK,cACL6e,UAAWzT,KAAKzN,MAAMyhB,QACtBR,QAAM,EACNE,OAAK,IAEP,kBAACH,GAAD,CACE3S,QAASZ,KAAKqU,gBACdzf,KAAK,OACL4e,OAAQd,GAAiByB,EACzBV,UAAW5N,EACX6N,OAAK,MAIX,yBAAKjU,UAAU,gBAAgBO,KAAK2U,2BAvF9C,GAAmC7T,aAsHpB8T,wBACbpR,aAZsB,SAAAjR,GAAK,MAAK,CAChCmC,OAAQnC,EAAMmC,OAAOA,OACrBmR,QAAStT,EAAMmC,OAAOmR,QACtB6M,cAAengB,EAAMmC,OAAOge,cAC5ByB,aAAc5hB,EAAMW,SAASihB,aAC7B7X,OAAQ/J,EAAM4X,MAAM7N,WAGK,SAAAvC,GAAQ,OACjC0J,YAAmB,CAAEzE,aAAWO,kBAAgBnD,gBAAerC,KAG/DyJ,CAA6CuQ,KC/HvC3c,GAAyCqC,GAAzCrC,iBAAkBE,GAAuBmC,GAAvBnC,mBAELud,G,0LACD5e,GAAW,IAAD,EACW+J,KAAKC,MAAlC6U,EADkB,EAClBA,WAAYC,EADM,EACNA,OAAQngB,EADF,EACEA,KACtB8S,EAAUD,OAAOC,QAAQtQ,GAAiBnB,IAC1C+e,EAAMD,EAAOpW,MAAP,WAAmBoW,EAAOpW,OAAU,GAC5C+I,IACFoN,EAAWC,EAAOpW,MAAO1I,GACzBgf,iBAAejiB,KAAf,UjCnBsB,SiCmBtB,YAAuC4B,GAAvC,OAA8CogB,O,sCAIlC/d,EAAMmJ,EAAMxL,EAAMD,GAChC,OACE,wBAAI8K,UAAU,aACZ,gCACE,kBAAC,OAAD,CAAM6C,GAAE,UjC3BU,SiC2BV,YAAqB1N,EAArB,YAA6BD,IACnC,kBAAC+K,GAAD,CAAMzI,KAAMmJ,IACXnJ,O,yCAOQlB,EAAWnB,EAAMoJ,GAAQ,IAClC/G,EAAwBlB,EAAxBkB,KAAMiF,EAAkBnG,EAAlBmG,cACd,OACE,wBAAI9I,IAAK4K,GACNgC,KAAKkV,gBAAgBje,EAAM,SAAUrC,EAAMsH,GAC5C,gC,oCAKQyL,EAAM/S,EAAMoJ,GAAQ,IAAD,OACvB/G,EAAkC0Q,EAAlC1Q,KAAMiF,EAA4ByL,EAA5BzL,cAAe+L,EAAaN,EAAbM,SAC7B,OACE,wBAAI7U,IAAK4K,GACNgC,KAAKkV,gBAAgBje,EAAM,cAAerC,EAAMsH,GACjD,4BACE,yBAAKuD,UAAU,eACb,kBAAC8T,GAAD,CACE3S,QAAS,kBAAM,EAAKiH,kBAAkB5Q,IACtCrC,KAAK,SACL4e,QAAM,EACNG,MAAI,IAEL1L,GAAY,kBAACsL,GAAD,CAAQjR,GAAI2F,EAAUrT,KAAK,OAAO4e,QAAM,EAACG,MAAI,S,mCAOtD,IAAD,SACa3T,KAAKC,MAArB0G,EADG,EACHA,MAAO/R,EADJ,EACIA,KACf,OAAO+R,EAAMzE,KAAI,SAACsK,EAAOxO,GAAR,MACA,cAAfwO,EAAM5X,KACF,EAAKugB,mBAAmB3I,EAAO5X,EAAMoJ,GACrC,EAAKoX,cAAc5I,EAAO5X,EAAMoJ,Q,+BAI9B,IAAD,EAC8CgC,KAAKC,MAAlD0G,EADD,EACCA,MAAO/R,EADR,EACQA,KAAMygB,EADd,EACcA,YAAalZ,EAD3B,EAC2BA,OAAQ4Y,EADnC,EACmCA,OACpCO,EAAqB,cAAT1gB,EAAuB,aAAeA,EAElD0N,EAAKyS,EAAOpW,MAAP,UjC/Ea,SiC+Eb,YACY/J,EADZ,YACoBmgB,EAAOpW,MAD3B,kBjC/Ea,SiC+Eb,YAEY/J,EAFZ,QAILG,EAAU4R,EAAMtT,OACpB,yBAAKoM,UAAU,iBACb,+BACE,+BACE,4BACE,wCACA,wBAAIA,UAAU,cAAd,aAGJ,+BAAQO,KAAKuV,gBAIjB,4BAAKje,GAAmBge,IAG1B,OACE,6BACE,yBAAK7V,UAAU,kBACb,kBAAC+I,GAAD,CAAa5T,KAAMA,EAAM+J,MAAOoW,EAAOpW,QACvC,yBAAKc,UAAU,gBACb,kBAAC,OAAD,CAAMA,UAAU,iBAAiB6C,GAAIA,GAClC+S,IAGL,yBAAK5V,UAAU,cACb,kBAAC,GAAD,CAAauJ,SAAS,WAAW7M,OAAQA,MAG5CpH,O,GApG6B+L,aCJ9B3I,GAAwDsB,GAAxDtB,wBAAyBG,GAA+BmB,GAA/BnB,2BAiBpBkd,GAAa,eAACzf,EAAD,uDAAa,GAAb,OAAoB,SAAAgE,GAE5C,OADAA,EAAS,CAAEnF,KAfsB,wBAgB1B+E,GACL7D,EAAYC,GACZ,CAAEnB,KAjB6B,sBAiBFqC,KAAM,SACnC,CAAErC,KAjB6B,sBAiBFqC,KAAM,SACnC8C,KAIS0b,GAAY,SAAC1f,EAAWE,GAAZ,OAAyB,SAAA8D,GAEhD,OADAA,EAAS,CAAEnF,KAtBqB,uBAuBzB+E,GACL3D,EAAWD,EAAWE,GACtB,CAAErB,KAxB4B,qBAwBFqC,KAAM,QAClC,CAAErC,KAxB4B,qBAwBFqC,KAAM,SAClC8C,KAIS2b,GAAa,SAAA3f,GAAS,OAAI,SAACgE,EAAUmF,GAEhD,IAAMhM,EAAWgM,IAAWhM,SAASA,SAC/ByB,EAA6BzB,EAA7ByB,KAAMyK,EAAuBlM,EAAvBkM,YAAaxI,EAAU1D,EAAV0D,MAEzB,IAAKjC,GAAQiC,EACXjC,EAAI,UAAM2I,GAAQ1G,GAAd,WACC,CACL,IAAM0F,EAASqZ,GAAaziB,GAC5B,GAAIoJ,EAAOjJ,OACT,OAAO0G,EAASsC,GAAgBC,IAIpCvC,EAAS,CAAEnF,K3C7Ce,iB2C+C1B,IAAME,EAAehC,KAAEyO,KAAKrO,GAAU,SAACgB,EAAOd,EAAKgL,GACjD,MAAe,gBAARhL,GAAiC,SAARA,GAA4B,KAAVc,KAGpD,OAAOsG,GACLxE,EAAWD,EAAWpB,GACtB6M,GAAe,CAAE1M,eAAcsK,gBAC/B,CAAExK,KAlD0B,mBAkDFqC,KAAM,QAChC,CAAErC,KAlD0B,mBAkDFqC,KAAM,SAChC8C,KAIS6b,GAAU,SAAC7f,EAAWE,GAAZ,OAAyB,SAAC8D,EAAUmF,GAEzD,IAAMhM,EAAWgM,IAAWhM,SAASA,SAC/ByB,EAA6BzB,EAA7ByB,KAAMyK,EAAuBlM,EAAvBkM,YAAaxI,EAAU1D,EAAV0D,MAEzB,IAAKjC,GAAQiC,EACXjC,EAAI,UAAM2I,GAAQ1G,GAAd,WACC,CACL,IAAM0F,EAASqZ,GAAaziB,GAC5B,GAAIoJ,EAAOjJ,OACT,OAAO0G,EAASsC,GAAgBC,IAIpCvC,EAAS,CAAEnF,K3C1Ee,iB2C4E1B,IAAME,EAAehC,KAAEyO,KAAKrO,GAAU,SAACgB,EAAOd,EAAKgL,GACjD,MAAe,gBAARhL,GAAiC,SAARA,GAA4B,KAAVc,KAE9CgI,EAAgBnG,EAAS,UAAMA,EAAN,YAAmBpB,GAAnB,UAA+BA,GAE9D,OAAO6F,GAELxE,EAAWD,EAAWE,GACtBuL,GAAe,CAAE7M,KAAMuH,EAAepH,eAAcsK,gBACpD,CAAExK,KAjF0B,mBAiFFqC,KAAM,QAChC,CAAErC,KAjF0B,mBAiFFqC,KAAM,SAChC8C,KAIS8b,GAAa,SAAC9f,EAAWE,GAAZ,OAAyB,SAAA8D,GACjD,IAAMmC,EAAgB4C,GAAoB/I,EAAWE,GACrD,OAAO2E,GACL5E,EAAWD,EAAWE,GACtB,CAAErB,KAxF6B,sBAwFFqC,KAAM,OAAQ4D,GAAIqB,GAC/C,CAAEtH,KAxF6B,sBAwFFqC,KAAM,SACnC8C,KAIE4b,GAAe,SAAAziB,GAAQ,OAC3B8H,GACE9H,EACA,CAAEyB,KAAM,qBACR,CACE,gBAAiBwD,KACjB,gBAAiBG,QAIjBkJ,GAAiB,SAAAhF,GAAG,OAAI+B,KAAKe,UAAUnB,GAAW3B,KCnHjD,IAAMsZ,GAAb,4LACuB,IAAD,EACa9V,KAAKC,OACpCuV,EAFkB,EACVA,YADU,EACET,OACFpW,SAHtB,gDAM4B4G,GAAY,IAC5BiQ,EAAejQ,EAAfiQ,WACJxV,KAAKC,MAAM8U,OAAOpW,QAAU4G,EAAUwP,OAAOpW,OAC/C6W,EAAWjQ,EAAUwP,OAAOpW,SATlC,+BAaY,IAAD,EACmDqB,KAAKC,MAAvD6F,EADD,EACCA,WAAYtN,EADb,EACaA,MAAO2D,EADpB,EACoBA,OAAQ4Y,EAD5B,EAC4BA,OAAQc,EADpC,EACoCA,WAE3C,GAAI/P,EACF,OAAO,KAGT,IAAMlP,EAAQ8H,GAAiB,QAASqW,EAAOpW,OAE/C,OACE,kBAAC,IAAD,CAAe/H,MAAOA,GACpB,kBAAC,GAAD,CACEhC,KAAK,QACL+R,MAAOnO,EACPuc,OAAQA,EACRM,YAAY,WACZlZ,OAAQA,EACR2Y,WAAYe,SA9BtB,GAA2B/U,aA6DZ0C,gBAfS,SAAAjR,GAAK,MAAK,CAChCiG,MAAOmD,GAAoBpJ,EAAMiG,MAAMA,MAAOjG,EAAM4X,MAAMvO,OAC1DkK,WAAYvT,EAAMiG,MAAMsN,eAGC,SAAA/L,GAAQ,OACjC0J,YACE,CACE+R,cACAK,cACA1Z,WAEFpC,KAGWyJ,CAA6CsS,I,SCjEvCC,G,2MACnB3D,aAAe,SAAApd,GAAM,IACX8X,EAAa,EAAK7M,MAAlB6M,SAMR,EAAKxH,KAAK1J,MAAM1H,MAAQc,EAAE2O,OAAOzP,MAEjC4Y,EAAS9X,EAAE2O,OAAOzP,Q,wEAGV,IAAD,EACgB8L,KAAKC,MAApBtL,EADD,EACCA,KAAMC,EADP,EACOA,KAEVsU,EAAc,aAClB,GAAa,UAATtU,EAAkB,CACpB,IAAM+M,EAAOC,OAASC,OAAO,cAC7BqH,EAAW,UAAMvH,EAAN,sBACO,eAAT/M,IACTsU,EAAc,qBAGhB,IAAI8M,EAAU,KAWd,MAVa,eAATphB,IACFohB,EACE,0BAAMvW,UAAU,WACd,kBAACC,GAAD,CAAMzI,KAAK,gBACX,0BAAMwI,UAAU,gBAAhB,gBACe,mCADf,kDAOJ,yBAAKA,UAAU,cACb,uCAAauW,GACb,kBAAC,KAAD,CACE5iB,IAAKuB,EACLmY,SAAU9M,KAAKoS,aACflJ,YAAaA,EACb6E,aAAcpZ,EACd+Q,IAAI,e,GA3C6B5E,aCFtBmV,G,2MAKnB7D,aAAe,SAAApd,IAEb8X,EADqB,EAAK7M,MAAlB6M,UACC9X,EAAE2O,OAAOzP,Q,qFANEqR,GACpB,OAAOA,EAAU3O,QAAUoJ,KAAKC,MAAMrJ,Q,+BAQ9B,IACAA,EAAUoJ,KAAKC,MAAfrJ,MACR,OACE,yBAAK6I,UAAU,eACb,wCACA,kBAAC,KAAD,CACEqN,SAAU9M,KAAKoS,aACflJ,YAAY,QACZ6E,aAAcnX,EACd8O,IAAI,e,GAnB0B5E,a,kDCSxCoV,KAAKC,iBAAiB,eAAqBC,EAAQ,MACnDF,KAAKC,iBAAiB,SAAqBC,EAAQ,MACnDF,KAAKC,iBAAiB,cAAqBC,EAAQ,MACnDF,KAAKC,iBAAiB,WAAqBC,EAAQ,MACnDF,KAAKC,iBAAiB,OAAqBC,EAAQ,MACnDF,KAAKC,iBAAiB,QAAqBC,EAAQ,MACnDF,KAAKC,iBAAiB,UAAqBC,EAAQ,MACnDF,KAAKC,iBAAiB,eAAqBC,EAAQ,MACnDF,KAAKC,iBAAiB,QAAqBC,EAAQ,MACnDF,KAAKC,iBAAiB,eAAqBC,EAAQ,MACnDF,KAAKC,iBAAiB,MAAqBC,EAAQ,MACnDF,KAAKC,iBAAiB,UAAqBC,EAAQ,MACnDF,KAAKC,iBAAiB,MAAqBC,EAAQ,MACnDF,KAAKC,iBAAiB,OAAqBC,EAAQ,MACnDF,KAAKC,iBAAiB,OAAqBC,EAAQ,MACnDF,KAAKC,iBAAiB,SAAqBC,EAAQ,MACnDF,KAAKC,iBAAiB,MAAqBC,EAAQ,MACnDF,KAAKC,iBAAiB,aAAqBC,EAAQ,MACnDF,KAAKC,iBAAiB,MAAqBC,EAAQ,MACnDF,KAAKC,iBAAiB,WAAqBC,EAAQ,MACnDF,KAAKC,iBAAiB,SAAqBC,EAAQ,MACnDF,KAAKC,iBAAiB,MAAqBC,EAAQ,MACnDF,KAAKC,iBAAiB,MAAqBC,EAAQ,MACnDF,KAAKC,iBAAiB,cAAqBC,EAAQ,MACnDF,KAAKC,iBAAiB,SAAqBC,EAAQ,MACnDF,KAAKC,iBAAiB,QAAqBC,EAAQ,MACnDF,KAAKC,iBAAiB,UAAqBC,EAAQ,MACnDF,KAAKC,iBAAiB,SAAqBC,EAAQ,MACnDF,KAAKC,iBAAiB,UAAqBC,EAAQ,MACnDF,KAAKC,iBAAiB,KAAqBC,EAAQ,MACnDF,KAAKC,iBAAiB,SAAqBC,EAAQ,MACnDF,KAAKC,iBAAiB,SAAqBC,EAAQ,MACnDF,KAAKC,iBAAiB,OAAqBC,EAAQ,MACnDF,KAAKC,iBAAiB,aAAqBC,EAAQ,MACnDF,KAAKC,iBAAiB,UAAqBC,EAAQ,MACnDF,KAAKC,iBAAiB,WAAqBC,EAAQ,MACnDF,KAAKC,iBAAiB,OAAqBC,EAAQ,MACnDF,KAAKC,iBAAiB,MAAqBC,EAAQ,MACnDF,KAAKC,iBAAiB,OAAqBC,EAAQ,MACnDF,KAAKC,iBAAiB,aAAqBC,EAAQ,MACnDF,KAAKC,iBAAiB,OAAqBC,EAAQ,MACnDF,KAAKC,iBAAiB,QAAqBC,EAAQ,MACnDF,KAAKC,iBAAiB,aAAqBC,EAAQ,MACnDF,KAAKC,iBAAiB,SAAqBC,EAAQ,MACnDF,KAAKC,iBAAiB,OAAqBC,EAAQ,MACnDF,KAAKC,iBAAiB,OAAqBC,EAAQ,MACnDF,KAAKC,iBAAiB,OAAqBC,EAAQ,MACnDF,KAAKC,iBAAiB,aAAqBC,EAAQ,MACnDF,KAAKC,iBAAiB,MAAqBC,EAAQ,MACnDF,KAAKC,iBAAiB,WAAqBC,EAAQ,MACnDF,KAAKC,iBAAiB,WAAqBC,EAAQ,MACnDF,KAAKC,iBAAiB,cAAqBC,EAAQ,MACnDF,KAAKC,iBAAiB,SAAqBC,EAAQ,MACnDF,KAAKC,iBAAiB,OAAqBC,EAAQ,MACnDF,KAAKC,iBAAiB,QAAqBC,EAAQ,MACnDF,KAAKC,iBAAiB,MAAqBC,EAAQ,MACnDF,KAAKC,iBAAiB,aAAqBC,EAAQ,MACnDF,KAAKC,iBAAiB,QAAqBC,EAAQ,MACnDF,KAAKC,iBAAiB,QAAqBC,EAAQ,MACnDF,KAAKC,iBAAiB,MAAqBC,EAAQ,MACnDF,KAAKC,iBAAiB,YAAqBC,EAAQ,MACnDF,KAAKC,iBAAiB,aAAqBC,EAAQ,MACnDF,KAAKC,iBAAiB,SAAqBC,EAAQ,MACnDF,KAAKC,iBAAiB,SAAqBC,EAAQ,MACnDF,KAAKC,iBAAiB,IAAqBC,EAAQ,MACnDF,KAAKC,iBAAiB,WAAqBC,EAAQ,MACnDF,KAAKC,iBAAiB,OAAqBC,EAAQ,MACnDF,KAAKC,iBAAiB,OAAqBC,EAAQ,MACnDF,KAAKC,iBAAiB,QAAqBC,EAAQ,MACnDF,KAAKC,iBAAiB,OAAqBC,EAAQ,MACnDF,KAAKC,iBAAiB,QAAqBC,EAAQ,MACnDF,KAAKC,iBAAiB,YAAqBC,EAAQ,MACnDF,KAAKC,iBAAiB,MAAqBC,EAAQ,MACnDF,KAAKC,iBAAiB,QAAqBC,EAAQ,MACnDF,KAAKC,iBAAiB,aAAqBC,EAAQ,MACnDF,KAAKC,iBAAiB,QAAqBC,EAAQ,MACnDF,KAAKC,iBAAiB,WAAqBC,EAAQ,MACnDF,KAAKC,iBAAiB,MAAqBC,EAAQ,MACnDF,KAAKC,iBAAiB,OAAqBC,EAAQ,MACnDF,KAAKC,iBAAiB,MAAqBC,EAAQ,MAgHpCF,UAAf,ECrMMG,GAAa,CACjB,iBACA,aACA,sBACA,oBA0IaC,G,2MAnDbC,qBAAuB,SAACC,EAAIC,EAAW7c,GACrC,IAAM8c,EAAaF,EAAGG,UAAU,SAC1BC,EAAWJ,EAAGG,UAAU,OACxBE,EAAOL,EAAGM,eAH6B,eAK1BL,EAL0B,GAKxCM,EALwC,KAKlCC,EALkC,KAMzCpd,IACFod,EAAOA,EAAK7Z,QAAQ,QAASvD,IAG/B4c,EAAGS,iBAAH,UAAuBF,GAAvB,OAA8BF,GAA9B,OAAqCG,IACrCN,EAAWQ,IAAMH,EAAK1jB,OAElBqjB,IAAeE,IACjBA,EAASM,IAAMH,EAAK1jB,QAGtBmjB,EAAGW,aAAaT,EAAYE,GAC5BJ,EAAGlK,S,EAGL8K,eAAiB,SAAAziB,GAAS,IAAD,EACS,EAAKke,OAA7BwE,EADe,EACfA,WADe,IACHnH,QACYoH,YAAxBC,EAFe,EAEfA,MAAO7U,EAFQ,EAERA,KACT9I,EAAG,cAAUjF,EAAV,uBACH2d,EAAMvU,GAAqBpJ,GAE3BC,EAAO,4BAA4B6G,KAAK6W,GAAOiF,EAAQ7U,EAC7D,EAAK6T,qBAAqBc,EAAYziB,EAAMgF,I,mFA9G5CoG,KAAK7G,SACLsO,OAAOyO,KAAOA,K,4CAGM3Q,GACpB,OAAOA,EAAUiS,eAAiBxX,KAAKC,MAAMuX,e,2CAI7CxX,KAAKyX,UACLzX,KAAK7G,W,6CAIL6G,KAAKyX,Y,+BAGG,IAAD,SACsBzX,KAAKC,MAA1B6M,EADD,EACCA,SAAU4K,EADX,EACWA,OACdC,EAAOhkB,OAAOwF,OAAO6G,KAAKC,OAC9B0X,EAAI,QAAc3X,KAAKsF,KAAKuR,KAC5Bc,EAAI,yBAA8B,EAClCA,EAAI,cAAmB,EACvBA,EAAI,gBAAsB,CACxBC,wBAAwB,GAE1BD,EAAI,YAAkB,CACpBJ,MAAO,CAAC,KAAM,aAEhB,IAAIM,EAAe,CACjB,OACA,SACA,UACA,IACA,OACA,QACA,iBACA,eACA,IACA,OACA,QACA,QACA,CACE5gB,KAAM,aACN6gB,OAAQ,kBAAM,EAAKxS,KAAKyS,WAAWzS,KAAK0S,QAAQC,SAChDxY,UAAW,kBACX7I,MAAO,sBAET,IACA,UACA,eACA,aACA,KAEE8gB,GACFG,EAAa7kB,KAAK,CAChBiE,KAAM,OACN6gB,OAAQJ,EACRjY,UAAW,iBACX7I,MAAO,SAGX+gB,EAAI,QAAcE,EAClB,IAAMhF,EAAS,IAAIqF,KAAUP,GACzB9E,EAAOwE,YACTxE,EAAOwE,WAAWc,GAAG,UAAU,WAC7BrL,EAAS+F,EAAO3e,YAGpB8L,KAAK6S,OAASA,I,gCAId,IAAK,IAAIzQ,KAAKiU,GAAY,CACxB,IAAI+B,EAAkBpY,KAAKsF,KAAK+S,UAAUC,cACxC,IAAMjC,GAAWjU,IAEnBgW,GAAmBA,EAAgBG,Y,+BAqCrC,OACE,6BACE,yBAAK7X,MAAO,CAAE8X,QAAS,SACrB,kBAAC,GAAD,CAAY9S,IAAI,aAAaqF,OAAQ/K,KAAKoX,kBAE5C,yBAAK1R,IAAI,aACP,8BAAUA,IAAI,e,GA1HK5E,aCNd,SAAS2X,GAAT,GAWX,IAVF7jB,EAUC,EAVDA,KACAD,EASC,EATDA,KACA8F,EAQC,EARDA,KACA7D,EAOC,EAPDA,MACA8gB,EAMC,EANDA,OACAxG,EAKC,EALDA,YACAE,EAIC,EAJDA,WACAD,EAGC,EAHDA,WACAlc,EAEC,EAFDA,WACAyjB,EACC,EADDA,iBAEA,OACE,yBAAKjZ,UAAU,gBACb,kBAAC,GAAD,CAAWqN,SAAUsE,EAAYxc,KAAMA,EAAMD,KAAMA,IACnD,kBAAC,GAAD,CAAYmY,SAAUoE,EAAata,MAAOA,IAC1C,kBAAC,GAAD,CACEkW,SAAUqE,EACVuG,OAAQA,EACRxO,YAAY,OACZsO,aAAc/c,IAEhB,kBAAC,GAAD,MACA,kBAAC,GAAD,CAAU8W,OAAQtc,EAAY0c,aAAc+G,KAKlDD,GAAiB1X,aAAe,CAC9BpM,KAAM,GACN8F,KAAM,GACN7D,MAAO,GACP3B,WAAY,GACZyjB,iBAAkB,I,ICrBZrhB,GAAsCoC,GAAtCpC,gBAAiBD,GAAqBqC,GAArBrC,iBAEZuhB,GAAb,2MA0BE1E,gBAAkB,SAAAC,GAChB,GAAI,EAAKjU,MAAMkU,aACb,OAAO9c,MA5Bb,EAgCEgd,gBAAkB,SAAArf,GAChBiJ,GAAejJ,GADM,MAEqB,EAAKiL,MAAvC2V,EAFa,EAEbA,QAASzB,EAFI,EAEJA,aAAcY,EAFV,EAEUA,OAC/B,GAAIZ,EAAc,CAAC,IAAD,eACaY,EAAOpW,OAEpCiX,EAHgB,gBAEMnY,KAAK,QArCjC,mFACuB,IAAD,EAC2BuC,KAAKC,MAA1CwV,EADU,EACVA,UAAWV,EADD,EACCA,OAAQT,EADT,EACSA,OAAQC,EADjB,EACiBA,MADjB,eAEWQ,EAAOpW,OAEpC8W,EAJkB,gBAGIhY,KAAK,MAG3B6W,EAAOE,kBAAkBD,EAAOvU,KAAKiU,mBAPzC,gDAU4B1O,GACxB,GAAIvF,KAAKC,MAAM4F,UAAYN,EAAUM,QAAS,CAC5C,IAAM+S,EAAWrT,EAAUsT,KAAKlkB,KAG5BikB,IAFS5Y,KAAKC,MAAM4Y,KAAKlkB,MAG3BsgB,iBAAejiB,KAAf,UzCtCoB,SyCsCpB,kBAA6C4lB,OAhBrD,6CAqB0B,IAAD,EACW5Y,KAAKC,MAA7B7D,EADa,EACbA,YADa,EACAE,OACdjJ,QAAU+I,MAvBrB,wCA0CoBnF,GAAO,IAAD,EACS+I,KAAKC,MAA5B4V,EADc,EACdA,WAAYd,EADE,EACFA,OAEpB,GADgBtN,OAAOC,QAAQtQ,GAAiBH,IACnC,CAAC,IAAD,eACkB8d,EAAOpW,OAA7B5I,EADI,KAGX8f,EAAW9f,EAHA,WAEW0H,KAAK,MAE3BwX,iBAAejiB,KAAf,UzCvEsB,SyCuEtB,kBAA6C+C,GAAa,QAjDhE,+BAqDY,IAAD,SAWHiK,KAAKC,MATP6F,EAFK,EAELA,WACA+S,EAHK,EAGLA,KACAvc,EAJK,EAILA,OACA4U,EALK,EAKLA,YACAC,EANK,EAMLA,WACAC,EAPK,EAOLA,WACAvL,EARK,EAQLA,QACAsO,EATK,EASLA,aACAY,EAVK,EAULA,OAGF,GAAIjP,EACF,OAAO,KAGT,GAAIhT,KAAE2J,QAAQoc,GACZ,OAAO,wDAGT,IAAMpE,EAAmB,CACvBzb,KAAMgH,KAAKqU,iBAIXpd,EAKE4hB,EALF5hB,KACAmI,EAIEyZ,EAJFzZ,YACA6I,EAGE4Q,EAHF5Q,SACAnT,EAEE+jB,EAFF/jB,aACAgkB,EACED,EADFC,sBAEI/iB,EAAYgf,EAAOpW,MAAM,GAEzB/H,EAAQ9B,GAAgBA,EAAa8B,MAAQ9B,EAAa8B,MAAQ,GAClEmiB,EAAiBra,GAAiB,QAAS3I,EAAWa,GAASK,GAErE,OACE,kBAAC,IAAD,CAAeL,MAAOmiB,GACpB,kBAAC,UAAD,CAASrE,SAAUD,EAAkBhV,UAAU,UAC5CnD,EAAOjJ,OAAS,GAAK,kBAAC,GAAD,CAAQiJ,OAAQA,IAEtC,yBAAKmD,UAAU,kBACb,kBAAC+I,GAAD,CAAa5T,KAAK,QAAQ+J,MAAO5I,KAGnC,yBAAK0J,UAAU,mBACb,kBAACgZ,GAAD,CACE7jB,KAAK,QACLsc,YAAaA,EACbE,WAAYA,EACZD,WAAYA,EACZuG,OAAQ1X,KAAKqU,gBACb1f,KAAMsC,EACNL,MAAOA,EACP6D,KAAM2E,EACNnK,WAAU,aAAI2B,QAAOwI,cAAazK,KAAMsC,GAASnC,GACjD4jB,iBAAkBI,IAEpB,yBAAKrZ,UAAU,gBACb,kBAAC8T,GAAD,CACE3S,QAASZ,KAAKqU,gBACdzf,KAAK,OACL4e,OAAQW,EACRV,UAAW5N,EACX6N,OAAK,IAEP,kBAACH,GAAD,CAAQjR,GAAI2F,EAAUrT,KAAK,OAAO4e,QAAM,EAACE,OAAK,IAC9C,kBAAC,GAAD,MACA,kBAACH,GAAD,CACE3S,QAAS,kBAAM,EAAKiH,kBAAkB5Q,IACtCrC,KAAK,SACL4e,QAAM,EACNE,OAAK,YA9HrB,GAA8B5S,aAgLf8T,wBACbpR,aAvBsB,SAAAjR,GAAK,MAAK,CAChCsmB,KAAMtmB,EAAMiG,MAAMqgB,KAClB/S,WAAYvT,EAAMiG,MAAMsN,WACxBqO,aAAc5hB,EAAMW,SAASihB,aAC7BtO,QAAStT,EAAMiG,MAAMqN,QACrBvJ,OAAQ/J,EAAM4X,MAAM7N,WAGK,SAAAvC,GAAQ,OACjC0J,YACE,CACEgS,aACAI,cACAD,WACA1E,eACAC,cACAC,cACAhV,gBAEFrC,KAIFyJ,CAA6CmV,KC9LhC,SAASK,GAAT,GAWX,IAVFpkB,EAUC,EAVDA,KACAF,EASC,EATDA,OACA4H,EAQC,EARDA,OACAuJ,EAOC,EAPDA,QACAsL,EAMC,EANDA,WACAC,EAKC,EALDA,WACAF,EAIC,EAJDA,YACAiD,EAGC,EAHDA,aACA8E,EAEC,EAFDA,YACUta,EACT,EADDoW,OAAUpW,MAEJua,EAAoB,WAATtkB,EAAoB,QAAUA,EAE/C,OACE,kBAAC,UAAD,CAAS8f,SAAU,CAAE1b,KAAMigB,IACxB3c,EAAOjJ,OAAS,GAAK,kBAAC,GAAD,CAAQiJ,OAAQA,IAEtC,yBAAKmD,UAAU,kBACb,kBAAC+I,GAAD,CAAa5T,KAAMA,EAAM+J,MAAOA,KAGlC,yBAAKc,UAAU,mBACb,kBAACgZ,GAAD,CACE7jB,KAAMA,EACNwc,WAAYA,EACZF,YAAaA,EACbC,WAAYA,EACZuG,OAAQuB,EACRP,iBAAkBS,aAAczkB,EAAQiK,EAAOua,KAEjD,yBAAKzZ,UAAU,gBACb,kBAAC8T,GAAD,CACE3S,QAASqY,EACTrkB,KAAK,SACL4e,OAAQW,EACRV,UAAW5N,EACX6N,OAAK,O,IChCTrc,GAAoBoC,GAApBpC,gBAEK+hB,GAAb,2MAiBEnF,gBAAkB,SAAAC,GAChB,GAAI,EAAKjU,MAAMkU,aACb,OAAO9c,MAnBb,EAuBEgd,gBAAkB,SAAArf,GAChBiJ,GAAejJ,GADM,MAEwB,EAAKiL,MAA1CkU,EAFa,EAEbA,aAAcuB,EAFD,EAECA,WAAYX,EAFb,EAEaA,OAClCZ,GAAgBuB,EAAWX,EAAOpW,QA1BtC,mFACuB,IAAD,EACQqB,KAAKC,MAAvBqU,EADU,EACVA,OAAQC,EADE,EACFA,MAChBD,EAAOE,kBAAkBD,EAAOvU,KAAKiU,mBAHzC,gDAM4B1O,GACpBvF,KAAKC,MAAM4F,UAAYN,EAAUM,SACnCoP,iBAAejiB,KAAf,U3CxBsB,S2CwBtB,kBAA6CuS,EAAUsT,KAAKlkB,SARlE,6CAY0B,IAAD,EACWqL,KAAKC,MAA7B7D,EADa,EACbA,YADa,EACAE,OACdjJ,QAAU+I,MAdrB,+BA6BY,IAAD,EAUH4D,KAAKC,MARP8U,EAFK,EAELA,OACArgB,EAHK,EAGLA,OACA4H,EAJK,EAILA,OACAuJ,EALK,EAKLA,QACAsL,EANK,EAMLA,WACAC,EAPK,EAOLA,WACAF,EARK,EAQLA,YACAiD,EATK,EASLA,aAGIvd,EAAQ8H,GAAiB,QAASqW,EAAOpW,MAAO,YAEtD,OACE,kBAAC,IAAD,CAAe/H,MAAOA,GACpB,kBAACoiB,GAAD,CACEpkB,KAAK,QACLmgB,OAAQA,EACRrgB,OAAQA,EACR4H,OAAQA,EACRuJ,QAASA,EACTsL,WAAYA,EACZC,WAAYA,EACZF,YAAaA,EACbiD,aAAcA,EACd8E,YAAajZ,KAAKqU,uBAvD5B,GAA6BvT,aAkGd8T,wBACbpR,aArBsB,SAAAjR,GAAK,MAAK,CAChCsmB,KAAMtmB,EAAMiG,MAAMqgB,KAClB1E,aAAc5hB,EAAMW,SAASihB,aAC7B7X,OAAQ/J,EAAM4X,MAAM7N,OACpBuJ,QAAStT,EAAMiG,MAAMqN,QACrBnR,OAAQnC,EAAMmC,OAAOA,WAGI,SAAAqF,GAAQ,OACjC0J,YACE,CACEyN,eACAC,cACAC,cACAsE,cACAtZ,gBAEFrC,KAIFyJ,CAA6C4V,KC7FvChiB,GAAyCqC,GAAzCrC,iBAAkBE,GAAuBmC,GAAvBnC,mBAEb+hB,GAAb,4LACuB,IAAD,EACkBrZ,KAAKC,MAAjCgB,EADU,EACVA,gBAAiB8T,EADP,EACOA,OACzB9T,EAAgB8T,EAAO1e,gBAAiB0e,EAAOpW,SAHnD,gDAM4B4G,GAAY,IAC5BtE,EAA4BsE,EAA5BtE,gBAAiB8T,EAAWxP,EAAXwP,OAGvBA,EAAOpW,QAAUqB,KAAKC,MAAM8U,OAAOpW,OACnCoW,EAAO1e,kBAAoB2J,KAAKC,MAAM8U,OAAO1e,iBAE7C4K,EAAgB8T,EAAO1e,gBAAiB0e,EAAOpW,SAbrD,wCAiBoB1I,GAAW,IAAD,EACS+J,KAAKC,MAAhCyB,EADkB,EAClBA,eAAgBqT,EADE,EACFA,OACRtN,OAAOC,QAAQtQ,GAAiBnB,KACrCyL,EAAeqT,EAAO1e,gBAAiB0e,EAAOpW,MAAO1I,KApBpE,oCAwBI,OACE,yBAAKwJ,UAAU,iBACb,+BACE,+BACE,4BACE,oCACA,oCACA,wBAAIA,UAAU,cAAd,aAGJ,+BAAQO,KAAKuV,kBAlCvB,oCAwCgB+D,GAAM,IAAD,OACTze,EAAyDye,EAAzDze,GAAI5D,EAAqDqiB,EAArDriB,KAAML,EAA+C0iB,EAA/C1iB,MAAOqR,EAAwCqR,EAAxCrR,SAAU7G,EAA8BkY,EAA9BlY,WAAYlF,EAAkBod,EAAlBpd,cACzCoG,EAAE,U5ClEgB,S4CkEhB,wBAAkClB,EAAlC,YAAgDlF,GAEpDyF,EAAO2X,EAAI3X,KAAK1E,UAAU,EAAGqc,EAAI3X,KAAK7D,YAAY,MAMtD,OALA6D,EACsC,aAApCC,KAAOD,GAAME,OAAO,YAChBD,KAAOD,GAAME,OAAO,MACpBD,KAAOD,GAAME,OAAO,OAGxB,wBAAIzO,IAAKyH,GACP,wBAAI4E,UAAU,aACZ,gCACE,kBAAC,OAAD,CAAM6C,GAAIA,GACR,kBAAC5C,GAAD,CAAMzI,KAAK,gBACVL,GAASK,KAIhB,4BAAK0K,GACL,4BACE,yBAAKlC,UAAU,eACb,kBAAC8T,GAAD,CACE3S,QAAS,kBAAM,EAAKiH,kBAAkB5Q,IACtCrC,KAAK,SACL4e,QAAM,EACNG,MAAI,IAEL1L,GAAY,kBAACsL,GAAD,CAAQjR,GAAI2F,EAAUrT,KAAK,OAAO4e,QAAM,EAACG,MAAI,SArEtE,yCA4EqB5d,GAAY,IACXM,EAAsB2J,KAAKC,MAArC8U,OAAU1e,gBACVY,EAAuClB,EAAvCkB,KAAMiF,EAAiCnG,EAAjCmG,cAAeqd,EAAkBxjB,EAAlBwjB,cACvBjX,EAAE,U5CvGgB,S4CuGhB,wBAAkCjM,EAAlC,YAAqD6F,GAEzDyF,EAAO4X,EAActc,UAAU,EAAGsc,EAAczb,YAAY,MAEhE,OADA6D,EAAOC,KAAOD,GAAME,OAAO,MAEzB,wBAAIzO,IAAK6D,GACP,wBAAIwI,UAAU,aACZ,gCACE,kBAAC,OAAD,CAAM6C,GAAIA,GACR,kBAAC5C,GAAD,CAAMzI,KAAK,WACVA,KAIP,4BAAK0K,GACL,gCA9FR,mCAmGgB,IAAD,OACH6X,EAAcxZ,KAAKC,MAAnBuZ,UACR,OAAO1mB,KAAEoP,IAAIsX,GAAW,SAAAhN,GACtB,OAAIA,EAAM5X,MAAuB,cAAf4X,EAAM5X,KACf,EAAKugB,mBAAmB3I,GAExB,EAAK4I,cAAc5I,QAzGlC,+BA8GY,IAAD,EAC2CxM,KAAKC,MAA/C6F,EADD,EACCA,WAAY0T,EADb,EACaA,UAAWrd,EADxB,EACwBA,OAAQ4Y,EADhC,EACgCA,OAC/B1e,EAAoB0e,EAApB1e,gBAER,GAAIyP,EACF,OAAO,KAGT,IAAMnH,EAAQoW,EAAOpW,OAAS,GACxB2D,EAAKyS,EAAOpW,MAAP,U5C/Ia,S4C+Ib,wBACwBtI,EADxB,YAC2CsI,EAD3C,kB5C/Ia,S4C+Ib,wBAEwBtI,EAFxB,QAIL0iB,EAAiBra,GAAiBrI,EAAiB0e,EAAOpW,OAEhE,OACE,kBAAC,IAAD,CAAe/H,MAAOmiB,GACpB,6BACE,yBAAKtZ,UAAU,kBACb,kBAAC+I,GAAD,CAAa5T,KAAMyB,EAAiBsI,MAAOA,IAC3C,yBAAKc,UAAU,gBACb,kBAAC,OAAD,CAAMA,UAAU,iBAAiB6C,GAAIA,GACd,UAApBjM,EAA8B,WAAa,iBAGhD,yBAAKoJ,UAAU,cACb,kBAAC,GAAD,CAAauJ,SAAS,QAAQ7M,OAAQA,MAGzCqd,EAAUnmB,OAAS,GAAK2M,KAAKyZ,eAC5BD,EAAUnmB,QAAU,4BAAKiE,GAAmB,oBA5IxD,GAA+BwJ,aA2KhB0C,gBAfS,SAAAjR,GAAK,MAAK,CAChCinB,W9CoFkCne,E8CpFH9I,EAAMqG,YAAY8gB,Q9CoFT9d,E8CpFkBrJ,EAAM4X,MAAMvO,M9CqFjEP,EAGDO,EACK9I,KAAE+I,OAAOR,GAAM,SAAAY,GACpB,OAAIA,EAAKrH,KACAqH,EAAKhF,KAAK8E,cAAcvG,SAASoG,EAAMG,eAEvCE,EAAKrF,MAAMmF,cAAcvG,SAASoG,EAAMG,kBAI9CV,EAXE,I8CrFTyK,WAAYvT,EAAMqG,YAAYkN,Y9CmFG,IAACzK,EAAMO,K8ChFf,SAAA7B,GAAQ,OACjC0J,YACE,CACExC,mBACAS,kBACAvF,WAEFpC,KAGWyJ,CAA6C6V,IC3KpDhiB,GAA0DoC,GAA1DpC,gBAAiBD,GAAyCqC,GAAzCrC,iBAAkBE,GAAuBmC,GAAvBnC,mBAE9BqiB,GAAb,2MA4BE1F,gBAAkB,SAAAC,GAChB,GAAI,EAAKjU,MAAMkU,aACb,OAAO9c,MA9Bb,EAkCEgd,gBAAkB,SAAArf,GAChBiJ,GAAejJ,GADM,MAEyB,EAAKiL,MAA3CwB,EAFa,EAEbA,YAAa0S,EAFA,EAEAA,aAAcY,EAFd,EAEcA,OACnC,GAAIZ,EAAc,CAChB,IAAM/S,EAAa2T,EAAO1e,gBADV,eAEa0e,EAAOpW,OAEpC8C,EAAYL,EAJI,gBAGM3D,KAAK,QAxCjC,EA6CEoK,kBAAoB,WAAO,IAAD,EACW,EAAK5H,MAAhCyB,EADgB,EAChBA,eAAgBqT,EADA,EACAA,OADA,eAEKA,EAAOpW,OAA7B5I,EAFiB,KAGlBE,EAHkB,WAGFwH,KAAK,KAE3B,GADgBgK,OAAOC,QAAQtQ,GAAiBnB,IACnC,CACX,IAAMmL,EAAa2T,EAAO1e,gBAC1BqL,EAAeN,EAAYrL,EAAWE,GACtCgf,iBAAejiB,KAAf,U7C/EsB,S6C+EtB,wBACiCoO,EADjC,YAC+CrL,GAAa,OAtDlE,mFACuB,IAAD,EAC+BiK,KAAKC,MAA9CiB,EADU,EACVA,cAAe6T,EADL,EACKA,OAAQT,EADb,EACaA,OAAQC,EADrB,EACqBA,MADrB,eAEWQ,EAAOpW,OAA7B5I,EAFW,KAGZE,EAHY,WAGIwH,KAAK,KAC3ByD,EAAc6T,EAAO1e,gBAAiBN,EAAWE,GACjDqe,EAAOE,kBAAkBD,EAAOvU,KAAKiU,mBANzC,gDAS4B1O,GAAY,IAC5BqU,EAAoB5Z,KAAKC,MAAzB2Z,gBACR,GAAI5Z,KAAKC,MAAM4F,UAAYN,EAAUM,QAAS,CAC5C,IAAM+S,EAAWrT,EAAUqU,gBAAgBjlB,KAGvCikB,IAFSgB,EAAgBjlB,MAG3BsgB,iBAAejiB,KAAf,U7C1CoB,S6C0CpB,wBACiC4lB,EAAS3b,UAAU,QAjB5D,6CAuB0B,IAAD,EACW+C,KAAKC,MAA7B7D,EADa,EACbA,YADa,EACAE,OACdjJ,QAAU+I,MAzBrB,+BA2DY,IAAD,EAWH4D,KAAKC,MATP6F,EAFK,EAELA,WACA8T,EAHK,EAGLA,gBACAtd,EAJK,EAILA,OACA4U,EALK,EAKLA,YACAC,EANK,EAMLA,WACAC,EAPK,EAOLA,WACAvL,EARK,EAQLA,QACAsO,EATK,EASLA,aACAY,EAVK,EAULA,OAGF,GAAIjP,EACF,OAAO,KAGT,GAAIhT,KAAE2J,QAAQmd,GACZ,OAAO,4BAAKtiB,GAAmB,aAlB1B,IAsBLV,EAOEgjB,EAPFhjB,MACAwI,EAMEwa,EANFxa,YACA6I,EAKE2R,EALF3R,SACA7G,EAIEwY,EAJFxY,WACAtM,EAGE8kB,EAHF9kB,aACAgkB,EAEEc,EAFFd,sBACA7hB,EACE2iB,EADF3iB,KAEIlB,EAAYgf,EAAOpW,MAAM,GAEzB8V,EAAmB,CACvBzb,KAAMgH,KAAKqU,iBAGP0E,EAAiBra,GAAiB0C,EAAYrL,EAAWa,GAE/D,OACE,kBAAC,IAAD,CAAeA,MAAOmiB,GACpB,kBAAC,UAAD,CAASrE,SAAUD,EAAkBhV,UAAU,UAC5CnD,EAAOjJ,OAAS,GAAK,kBAAC,GAAD,CAAQiJ,OAAQA,IAEtC,yBAAKmD,UAAU,kBACb,kBAAC+I,GAAD,CAAa5T,KAAMwM,EAAYzC,MAAO5I,KAGxC,yBAAK0J,UAAU,mBACb,kBAACgZ,GAAD,CACE7jB,KAAMwM,EACNzM,KAAMsC,EACNL,MAAOA,EACP6D,KAAM2E,EACNgS,WAAYA,EACZF,YAAaA,EACbC,WAAYA,EACZuG,OAAQ1X,KAAKqU,gBACbpf,WAAU,aAAI2B,QAAOjC,KAAMsC,EAAMmI,eAAgBtK,GACjD4jB,iBAAkBI,IAEpB,yBAAKrZ,UAAU,gBACb,kBAAC8T,GAAD,CACE3S,QAASZ,KAAKqU,gBACdzf,KAAK,OACL4e,OAAQW,EACRV,UAAW5N,EACX6N,OAAK,IAEP,kBAACH,GAAD,CAAQjR,GAAI2F,EAAUrT,KAAK,OAAO4e,QAAM,EAACE,OAAK,IAC9C,kBAAC,GAAD,MACA,kBAACH,GAAD,CACE3S,QAASZ,KAAK6H,kBACdjT,KAAK,SACL4e,QAAM,EACNE,OAAK,YArIrB,GAAkC5S,aAuLnB8T,wBACbpR,aAvBsB,SAAAjR,GAAK,MAAK,CAChCqnB,gBAAiBrnB,EAAMqG,YAAYghB,gBACnC9T,WAAYvT,EAAMqG,YAAYkN,WAC9BqO,aAAc5hB,EAAMW,SAASihB,aAC7BtO,QAAStT,EAAMqG,YAAYiN,QAC3BvJ,OAAQ/J,EAAM4X,MAAM7N,WAGK,SAAAvC,GAAQ,OACjC0J,YACE,CACEvC,iBACAQ,kBACAD,eACAyP,eACAC,cACAC,cACAhV,gBAEFrC,KAIFyJ,CAA6CmW,KCpMvCtiB,GAAoBoC,GAApBpC,gBAEKwiB,GAAb,2MAqBE5F,gBAAkB,SAAAC,GAChB,GAAI,EAAKjU,MAAMkU,aACb,OAAO9c,MAvBb,EA2BEgd,gBAAkB,SAAArf,GAChBiJ,GAAejJ,GADM,MAE4B,EAAKiL,MAA9CkU,EAFa,EAEbA,aAAchT,EAFD,EAECA,eAAgB4T,EAFjB,EAEiBA,OACtCZ,GAAgBhT,EAAe4T,EAAO1e,gBAAiB0e,EAAOpW,QA9BlE,mFACuB,IAAD,EACQqB,KAAKC,MAAvBqU,EADU,EACVA,OAAQC,EADE,EACFA,MAChBD,EAAOE,kBAAkBD,EAAOvU,KAAKiU,mBAHzC,gDAM4B1O,GACxB,GAAIvF,KAAKC,MAAM4F,UAAYN,EAAUM,QAAS,CAC5C,IAAMlR,EAAO4Q,EAAUqU,gBAAgBjlB,KACjCgK,EAAQhK,EAAK0I,OAAO1I,EAAKiJ,QAAQ,KAAO,EAAGjJ,EAAKtB,QACtD4hB,iBAAejiB,KAAf,U9C1BsB,S8C0BtB,wBACiCuS,EAAUqU,gBAAgBxY,WAD3D,YACyEzC,OAX/E,6CAgB0B,IAAD,EACWqB,KAAKC,MAA7B7D,EADa,EACbA,YADa,EACAE,OACdjJ,QAAU+I,MAlBrB,+BAiCY,IAAD,EAUH4D,KAAKC,MARP8U,EAFK,EAELA,OACArgB,EAHK,EAGLA,OACA4H,EAJK,EAILA,OACAuJ,EALK,EAKLA,QACAsL,EANK,EAMLA,WACAC,EAPK,EAOLA,WACAF,EARK,EAQLA,YACAiD,EATK,EASLA,aAGI/S,EAAa2T,EAAO1e,gBACpBO,EAAQ8H,GAAiB0C,EAAY2T,EAAOpW,MAAO,gBAEzD,OACE,kBAAC,IAAD,CAAe/H,MAAOA,GACpB,kBAACoiB,GAAD,CACEpkB,KAAMwM,EACN2T,OAAQA,EACRrgB,OAAQA,EACR4H,OAAQA,EACRuJ,QAASA,EACTsL,WAAYA,EACZC,WAAYA,EACZF,YAAaA,EACbiD,aAAcA,EACd8E,YAAajZ,KAAKqU,uBA5D5B,GAAiCvT,aAuGlB8T,wBACbpR,aArBsB,SAAAjR,GAAK,MAAK,CAChCqnB,gBAAiBrnB,EAAMqG,YAAYghB,gBACnCzF,aAAc5hB,EAAMW,SAASihB,aAC7B7X,OAAQ/J,EAAM4X,MAAM7N,OACpBuJ,QAAStT,EAAMqG,YAAYiN,QAC3BnR,OAAQnC,EAAMmC,OAAOA,WAGI,SAAAqF,GAAQ,OACjC0J,YACE,CACEyN,eACAC,cACAC,cACAjQ,kBACA/E,gBAEFrC,KAIFyJ,CAA6CqW,KC5GvCxhB,GAA0DoB,GAA1DpB,0BAA2BD,GAA+BqB,GAA/BrB,2BAkBtB0hB,GAAiB,eAAC/jB,EAAD,uDAAa,GAAb,OAAoB,SAAAgE,GAEhD,OADAA,EAAS,CAAEnF,KAhB0B,4BAiB9B+E,GACLpD,EAAgBR,GAChB,CAAEnB,KAlBiC,0BAkBFqC,KAAM,SACvC,CAAErC,KAlBiC,0BAkBFqC,KAAM,SACvC8C,KAISggB,GAAgB,SAAChkB,EAAWE,GAAZ,OAAyB,SAAA8D,GAEpD,OADAA,EAAS,CAAEnF,KAvByB,2BAwB7B+E,GACLnD,EAAeT,EAAWE,GAC1B,CAAErB,KAzBgC,yBAyBFqC,KAAM,QACtC,CAAErC,KAzBgC,yBAyBFqC,KAAM,SACtC8C,KAaSigB,GAAc,SACzBjkB,EACAE,EACAoE,GAHyB,IAIzBue,EAJyB,uDAId,GACX3Z,EALyB,uDAKhB,SALgB,OAMtB,SAAClF,EAAUmF,GACd,IAAMoT,EAAMvU,GAAqB6a,GAAY3iB,GAE7C,GAAe,QAAXgJ,EAAkB,CACpB,IAAM7E,EAAO,QAAQqB,KAAK6W,GACtBpf,EAAWgM,IAAWhM,SAASA,SACnCA,EAAWiL,GAAWjL,GACtBmH,EAAOD,EAAOmE,KAAKe,UAAUpM,EAAU,KAAM,GAAKqJ,GAAOrJ,GAG3D,IAAMiM,EAAUyZ,EACZ,CAAEjkB,KAAMikB,EAAUxZ,YAAa/E,GAC/B,CAAE+E,YAAa/E,GAGbiC,EAAS2d,GAAiBhkB,EAAUoE,GAC1C,OAAIiC,EAAOjJ,OACF0G,EAASsC,GAAgBC,KAElCvC,EAAS,CAAEnF,KxDtEe,iBwDwEnB4F,GACLhE,EAAeT,EAAWE,GAC1BsI,KAAKe,UAAUH,GACf,CAAEvK,KAnE8B,uBAmEFqC,KAAM,QACpC,CAAErC,KAnE8B,uBAmEFqC,KAAM,SACpC8C,MAISmgB,GAAiB,SAACnkB,EAAWE,GAAZ,OAAyB,SAAA8D,GACrD,IAAMmC,EAAgB4C,GAAoB/I,EAAWE,GACrD,OAAO2E,GACLpE,EAAeT,EAAWE,GAC1B,CAAErB,KA1EiC,0BA0EFqC,KAAM,OAAQ4D,GAAIqB,GACnD,CAAEtH,KA1EiC,0BA0EFqC,KAAM,SACvC8C,KAISogB,GAAoB,iBAAO,CACtCvlB,KA/E8B,qBAkF1BqlB,GAAmB,SAAChkB,EAAUoE,GAAX,OACvBW,GACE,CAAE/E,WAAUoE,QACZ,CAAEpE,SAAU,WAAYoE,KAAM,YAC9B,CACE,oBAAqBjC,KACrB,gBAAiBC,QCzGhB,IAAM+hB,GAAb,4LACuB,IAAD,EACiBpa,KAAKC,OACxC6Z,EAFkB,EACVA,gBADU,EACM/E,OACFpW,SAH1B,gDAM4B4G,GAAY,IAC5BuU,EAAmBvU,EAAnBuU,eACJ9Z,KAAKC,MAAM8U,OAAOpW,QAAU4G,EAAUwP,OAAOpW,OAC/Cmb,EAAevU,EAAUwP,OAAOpW,SATtC,+BAaY,IAAD,EACuDqB,KAAKC,MAA3D6F,EADD,EACCA,WAAYuD,EADb,EACaA,MAAOlN,EADpB,EACoBA,OAAQ4Y,EAD5B,EAC4BA,OAAQmF,EADpC,EACoCA,eAE3C,GAAIpU,EACF,OAAO,KAGT,IAAMlP,EAAQ8H,GAAiB,aAAcqW,EAAOpW,OAEpD,OACE,kBAAC,IAAD,CAAe/H,MAAOA,GACpB,kBAAC,GAAD,CACEhC,KAAK,YACL+R,MAAO0C,EACP0L,OAAQA,EACRM,YAAY,gBACZlZ,OAAQA,EACR2Y,WAAYoF,SA9BtB,GAA+BpZ,aA6DhB0C,gBAfS,SAAAjR,GAAK,MAAK,CAChC8W,MAAO1N,GAAoBpJ,EAAMoG,UAAU0Q,MAAO9W,EAAM4X,MAAMvO,OAC9DkK,WAAYvT,EAAMoG,UAAUmN,eAGH,SAAA/L,GAAQ,OACjC0J,YACE,CACEqW,kBACAI,kBACA/d,WAEFpC,KAGWyJ,CAA6C4W,ICxCpD/iB,GAA0DoC,GAA1DpC,gBAAiBD,GAAyCqC,GAAzCrC,iBAAkBE,GAAuBmC,GAAvBnC,mBAE9B+iB,GAAb,2MACE9nB,MAAQ,CACNyhB,SAAS,GAFb,EAgCEC,gBAAkB,SAAAC,GAAiB,IAAD,EACU,EAAKjU,MAAvCqa,EADwB,EACxBA,gBAAiBnG,EADO,EACPA,aACzB,GAAImG,GAAmBnG,EACrB,OAAO9c,MAnCb,EAuCE+c,WAAa,WACX,EAAKrU,UAAS,SAAAxN,GACZ,MAAO,CAAEyhB,SAAUzhB,EAAMyhB,aAzC/B,EA6CEK,gBAAkB,SAAArf,GAChBiJ,GAAejJ,GADM,IAYjBiC,EAAMoD,EAAM0Y,EAZK,EAQjB,EAAK9S,MALPsa,EAHmB,EAGnBA,SACAD,EAJmB,EAInBA,gBACAnG,EALmB,EAKnBA,aACA6F,EANmB,EAMnBA,YACAjF,EAPmB,EAOnBA,OAEMpgB,EAAwB4lB,EAAxB5lB,KAAMuH,EAAkBqe,EAAlBre,cACRse,EAAW7lB,EAAKwI,QAAQjB,EAAe,IAVxB,eAaQ6Y,EAAOpW,OAA7B5I,EAbc,KAcfE,EAde,WAcCwH,KAAK,KAC3B,GAAI6c,GAAmBnG,EAAc,CACnC,GAAI,EAAK5hB,MAAMyhB,QAAS,CAAC,IAAD,EACQ,EAAK1O,KAAKmV,IAAInV,KAApCoV,EADc,EACdA,SAAUnS,EADI,EACJA,QAClBtR,EAAOyjB,EAASxmB,MAAQqU,EAAQrU,MAChCmG,EAAO,KACP0Y,EAAO,UACF,CAAC,IACEnX,EAAU,EAAK0J,KAAKqV,UAAUrV,KAA9B1J,MACR3E,EAAO2E,EAAM1H,OAAS0H,EAAMqE,MAAM8N,aAClC1T,EAAO,EAAKiL,KAAKuN,OAAOC,WACxBC,EAAO,SAGT,IAAM6H,EAAY7kB,EACdykB,EAAQ,UAAMzkB,EAAN,KAAqBkB,EAC7BujB,EAAWvjB,EAGf+iB,EAAYjkB,EAAWE,EAAUoE,EADhBugB,IAAcjmB,EAAOimB,EAAY,GACD7H,KA9EvD,mFAKuB,IAAD,EAC+B/S,KAAKC,MAA9C8Z,EADU,EACVA,cAAehF,EADL,EACKA,OAAQT,EADb,EACaA,OAAQC,EADrB,EACqBA,MADrB,eAEWQ,EAAOpW,OAA7B5I,EAFW,KAGZE,EAHY,WAGIwH,KAAK,KAC3B6W,EAAOE,kBAAkBD,EAAOvU,KAAKiU,iBACrC8F,EAAchkB,EAAWE,KAV7B,gDAa4BsP,GACpBvF,KAAKC,MAAM4F,UAAYN,EAAUM,UAClBN,EAAUgV,SAAS5lB,OACvBqL,KAAKC,MAAMsa,SAAS5lB,MAI/BsgB,iBAAejiB,KAAf,UjDrDoB,SiDqDpB,sBAC+BuS,EAAUgV,SAASre,mBArB1D,6CA2B0B,IAAD,EACW8D,KAAKC,MAA7B7D,EADa,EACbA,YADa,EACAE,OACdjJ,QAAU+I,MA7BrB,wCAkFoBzH,GAAO,IAAD,EACaqL,KAAKC,MAAhCia,EADc,EACdA,eAAgBnF,EADF,EACEA,OAGxB,GAFgBtN,OAAOC,QAAQtQ,GAAiBzC,IAEnC,CACX,IAAMoB,EAAYgf,EAAOpW,MAAM,GAE/Bub,EAAenkB,EADE8H,GAAoBlJ,IAErC,IAAMqgB,EAAMjf,EAAS,WAAOA,GAAc,GAC1Ckf,iBAAejiB,KAAf,UjD5HsB,SiD4HtB,qBAAgDgiB,OA3FtD,oCA+FiB,IAAD,SACiDhV,KAAKC,MAA1Dsa,EADI,EACJA,SAAUD,EADN,EACMA,gBAAiBnG,EADvB,EACuBA,aAActO,EADrC,EACqCA,QACzClR,EAAS4lB,EAAT5lB,KACFsB,EAAW4H,GAAoBlJ,GAC/B2d,EAAMvU,GAAqBpJ,GAC3BkmB,EAAa,cAAcpf,KAAK6W,GAEtC,OACE,yBAAK7S,UAAU,gBACb,kBAAC8T,GAAD,CACE3S,QAASZ,KAAKqU,gBACdzf,KAAK,OACL4e,OAAQ8G,GAAmBnG,EAC3BV,UAAW5N,EACX6N,OAAK,IAENmH,GACC,kBAACtH,GAAD,CACE3S,QAASZ,KAAKoU,WACdxf,KAAK,cACL6e,UAAWzT,KAAKzN,MAAMyhB,QACtBR,QAAM,EACNE,OAAK,IAGT,kBAAC,GAAD,MACA,kBAACH,GAAD,CACE3S,QAAS,kBAAM,EAAKiH,kBAAkB5R,IACtCrB,KAAK,SACL4e,QAAM,EACNE,OAAK,OA7Hf,wCAmIoBzd,GAAW,IAAD,EAC+B+J,KAAKC,MAAtDsa,EADkB,EAClBA,SAAUD,EADQ,EACRA,gBAAiBH,EADT,EACSA,kBAC3B/a,EAAoCmb,EAApCnb,YAAarK,EAAuBwlB,EAAvBxlB,QAASsd,EAAckI,EAAdlI,KAAMC,EAAQiI,EAARjI,IAC5B0B,EAAYhU,KAAKzN,MAAjByhB,QAER,OAAIA,GAAWjf,EAEX,yBAAK0K,UAAU,gBACb,kBAAC,GAAD,CACE8R,OAAQxc,EACRsd,KAAMA,EACNC,IAAKA,EACLxF,SAAUqN,EACVzU,IAAI,UAIAsO,GAAW5U,EAEnB,yBAAKK,UAAU,gBACb,kBAAC,GAAD,CACEqN,SAAUqN,EACVvlB,KAAK,aACLD,KAAMsB,EACNyP,IAAI,cAEN,kBAAC,GAAD,CACEgN,cAAe4H,EACf/a,eAAgB4a,EAChBplB,QAASqK,EACTxK,KAAM0d,EACN5M,IAAI,iBAdL,IApJX,+BAyKY,IAAD,EAC0C1F,KAAKC,MAA9Csa,EADD,EACCA,SAAUzU,EADX,EACWA,WAAYiP,EADvB,EACuBA,OAAQzY,EAD/B,EAC+BA,OAEtC,GAAIwJ,EACF,OAAO,KAGT,GAAIhT,KAAE2J,QAAQ8d,EAASxlB,SACrB,OAAO,4BAAKuC,GAAmB,YAGjC,IAAMvB,EAAYgf,EAAOpW,MAAM,GACzB1I,EAAW4H,GAAoB0c,EAAS5lB,MAExC8f,EAAmB,CACvBzb,KAAMgH,KAAKqU,iBAGP0E,EAAiBra,GAAiB,aAAc3I,EAAWE,GAEjE,OACE,kBAAC,IAAD,CAAeW,MAAOmiB,GACpB,kBAAC,UAAD,CAASrE,SAAUD,EAAkBhV,UAAU,UAC5CnD,EAAOjJ,OAAS,GAAK,kBAAC,GAAD,CAAQiJ,OAAQA,IAEtC,yBAAKmD,UAAU,kBACb,kBAAC+I,GAAD,CAAa5T,KAAK,YAAY+J,MAAO5I,KAGvC,yBAAK0J,UAAU,mBACZO,KAAK2U,kBAAkB1e,GACvB+J,KAAK8a,qBAxMlB,GAAkCha,aAsPnB8T,wBACbpR,aAtBsB,SAAAjR,GAAK,MAAK,CAChCgoB,SAAUhoB,EAAMoG,UAAUoiB,YAC1BjV,WAAYvT,EAAMoG,UAAUmN,WAC5BD,QAAStT,EAAMoG,UAAUkN,QACzByU,gBAAiB/nB,EAAMoG,UAAU2hB,gBACjCnG,aAAc5hB,EAAMW,SAASihB,aAC7B7X,OAAQ/J,EAAM4X,MAAM7N,WAGK,SAAAvC,GAAQ,OACjC0J,YACE,CACEsW,iBACAC,eACAE,kBACAC,qBACA/d,gBAEFrC,KAIFyJ,CAA6C6W,KCrQvChjB,GAAoBoC,GAApBpC,gBAEK2jB,GAAb,2MACEzoB,MAAQ,CACNyhB,SAAS,GAFb,EAuBEC,gBAAkB,SAAAC,GAChB,IAAK,EAAK3hB,MAAMyhB,SAAW,EAAK/T,MAAMqa,gBACpC,OAAOjjB,MAzBb,EA6BE+c,WAAa,WACX,EAAKrU,UAAS,SAAAxN,GACZ,MAAO,CAAEyhB,SAAUzhB,EAAMyhB,aA/B/B,EAmCEK,gBAAkB,SAAArf,GAChBiJ,GAAejJ,GADM,IAGjBiB,EAHiB,EAE0C,EAAKgK,MAA5Dqa,EAFa,EAEbA,gBAAiBnG,EAFJ,EAEIA,aAAc6F,EAFlB,EAEkBA,YAAajF,EAF/B,EAE+BA,OAGpD,GAAIuF,GAAmBnG,EACrB,GAAI,EAAK5hB,MAAMyhB,QAAS,CAAC,IAAD,EACQ,EAAK1O,KAAKmV,IAAInV,KAApCoV,EADc,EACdA,SAAUnS,EADI,EACJA,QAClBtS,EAAWykB,EAASxmB,MAAQqU,EAAQrU,MACpC8lB,EAAYjF,EAAOpW,MAAO1I,EAAU,KAAM,KAAM,YAEhDA,EAAW,EAAKqP,KAAKqV,UAAUrV,KAAK1J,MAAM1H,MAC1C8lB,EAAYjF,EAAOpW,MAAO1I,EAAU,EAAKqP,KAAKuN,OAAOC,aA/C7D,mFAKuB,IAAD,EACQ9S,KAAKC,MAAvBqU,EADU,EACVA,OAAQC,EADE,EACFA,MAChBD,EAAOE,kBAAkBD,EAAOvU,KAAKiU,mBAPzC,gDAU4B1O,GACpBvF,KAAKC,MAAM4F,UAAYN,EAAUM,SACnCoP,iBAAejiB,KAAf,UlDjCsB,SkDiCtB,sBAC+BuS,EAAUgV,SAASre,kBAbxD,6CAkB0B,IAAD,EACW8D,KAAKC,MAA7B7D,EADa,EACbA,YADa,EACAE,OACdjJ,QAAU+I,MApBrB,oCAoDiB,IAAD,EACuC4D,KAAKC,MAAhDqa,EADI,EACJA,gBAAiBnG,EADb,EACaA,aAActO,EAD3B,EAC2BA,QAEvC,OACE,yBAAKpG,UAAU,gBACb,kBAAC8T,GAAD,CACE3S,QAASZ,KAAKqU,gBACdzf,KAAK,SACL4e,OAAQ8G,GAAmBnG,EAC3BV,UAAW5N,EACX6N,OAAK,IAEP,kBAACH,GAAD,CACE3S,QAASZ,KAAKoU,WACdxf,KAAK,cACL6e,UAAWzT,KAAKzN,MAAMyhB,QACtBR,QAAM,EACNE,OAAK,OArEf,0CA2EuB,IAAD,EAC6B1T,KAAKC,MAA5Cqa,EADU,EACVA,gBAAiBH,EADP,EACOA,kBAEzB,OAAIna,KAAKzN,MAAMyhB,QAEX,yBAAKvU,UAAU,gBACb,kBAAC,GAAD,CAASqN,SAAUqN,EAAmBzU,IAAI,SAM9C,yBAAKjG,UAAU,gBACb,kBAAC,GAAD,CACEqN,SAAUqN,EACVvlB,KAAK,aACLD,KAAK,GACL+Q,IAAI,cAEN,kBAAC,GAAD,CACEgN,cAAe4H,EACf/a,eAAgB4a,EAChBplB,QAAQ,GACR2Q,IAAI,cAlGd,+BAwGY,IAAD,EACoB1F,KAAKC,MAAxB3D,EADD,EACCA,OAAQyY,EADT,EACSA,OAEVN,EAAmB,CACvBzb,KAAMgH,KAAKqU,iBAGPzd,EAAQ8H,GAAiB,aAAcqW,EAAOpW,MAAO,iBAE3D,OACE,kBAAC,IAAD,CAAe/H,MAAOA,GACpB,kBAAC,UAAD,CAAS8d,SAAUD,GAChBnY,EAAOjJ,OAAS,GAAK,kBAAC,GAAD,CAAQiJ,OAAQA,IAEtC,yBAAKmD,UAAU,kBACb,kBAAC+I,GAAD,CAAa5T,KAAK,YAAY+J,MAAOoW,EAAOpW,SAG9C,yBAAKc,UAAU,mBACZO,KAAK2U,oBACL3U,KAAK8a,qBA5HlB,GAAiCha,aAoKlB8T,wBACbpR,aAnBsB,SAAAjR,GAAK,MAAK,CAChCgoB,SAAUhoB,EAAMoG,UAAUoiB,YAC1BlV,QAAStT,EAAMoG,UAAUkN,QACzByU,gBAAiB/nB,EAAMoG,UAAU2hB,gBACjCnG,aAAc5hB,EAAMW,SAASihB,aAC7B7X,OAAQ/J,EAAM4X,MAAM7N,WAGK,SAAAvC,GAAQ,OACjC0J,YACE,CACEuW,eACAG,qBACA/d,gBAEFrC,KAIFyJ,CAA6CwX,KCjLvC7iB,GAAwDsB,GAAxDtB,wBAAyBG,GAA+BmB,GAA/BnB,2BAkBpB2iB,GAAc,eAACllB,EAAD,uDAAa,GAAb,OAAoB,SAAAgE,GAE7C,OADAA,EAAS,CAAEnF,KAjBuB,yBAkB3B+E,GACLzD,EAAaH,GACb,CAAEnB,KAnB8B,uBAmBFqC,KAAM,UACpC,CAAErC,KAnB8B,uBAmBFqC,KAAM,SACpC8C,KAISmhB,GAAa,SAACnlB,EAAWE,GAAZ,OAAyB,SAAA8D,GAEjD,OADAA,EAAS,CAAEnF,KAvBsB,wBAwB1B+E,GACLxD,EAAYJ,EAAWE,GACvB,CAAErB,KAzB6B,sBAyBFqC,KAAM,SACnC,CAAErC,KAzB6B,sBAyBFqC,KAAM,SACnC8C,KAISohB,GAAW,SAACpI,EAAMhd,GAAP,IAAkBE,EAAlB,uDAA6B,GAA7B,OAAoC,SAC1D8D,EACAmF,GAGA,IAAMhM,EAAWgM,IAAWhM,SAASA,SAC/ByB,EAA6BzB,EAA7ByB,KAAMyK,EAAuBlM,EAAvBkM,YAAaxI,EAAU1D,EAAV0D,MAGzB,IAAKjC,GAAQiC,EACXjC,EAAI,UAAM2I,GAAQ1G,GAAd,YACC,IAAKjC,IAASiC,EACnB,OAAOmD,EAASsC,GAAgB+e,GAAcloB,KAGhD6G,EAAS,CAAEnF,K5DhDe,iB4DmD1B,IAIIuK,EAJErK,EAAehC,KAAEyO,KAAKrO,GAAU,SAACgB,EAAOd,EAAKgL,GACjD,MAAe,gBAARhL,GAAiC,SAARA,GAA4B,KAAVc,KAIvC,WAAT6e,GAEF9c,EAAWtB,EAAKwI,QAAQ,WAAY,IACpCgC,EAAU,CAAErK,eAAcsK,gBAK1BD,EAAU,CAAExK,KAHIoB,EAAS,kBACVA,EADU,YACGpB,GADH,kBAEVA,GACcG,eAAcsK,eAI7C,OAAO5E,GACLrE,EAAYJ,EAAWE,GACvBuL,GAAerC,GACf,CAAEvK,KAjE2B,oBAiEFqC,KAAM,SACjC,CAAErC,KAjE2B,oBAiEFqC,KAAM,SACjC8C,KAISshB,GAAc,SAACtlB,EAAWE,GAAZ,OAAyB,SAAA8D,GAClD,IAAMmC,EAAgB4C,GAAoB/I,EAAWE,GACrD,OAAO2E,GACLzE,EAAYJ,EAAWE,GACvB,CAAErB,KAvE8B,uBAuEFqC,KAAM,QAAS4D,GAAIqB,GACjD,CAAEtH,KAvE8B,uBAuEFqC,KAAM,SACpC8C,KAISuhB,GAAe,SAACvlB,EAAWE,GAAZ,OAAyB,SAAC8D,EAAUmF,GAC9D,IAAMhM,EAAWgM,IAAWhM,SAASA,SAC7BkM,EAAgBlM,EAAhBkM,YAGFtK,EAAehC,KAAEyO,KAAKrO,GAAU,SAACgB,EAAOd,EAAKgL,GACjD,MAAe,gBAARhL,GAAiC,SAARA,GAA4B,KAAVc,KAGpD,OAAOsG,GACLlE,EAAe,QAASP,EAAWE,GACnCuL,GAAe,CAAEpC,cAAatK,iBAC9B,CAAEF,KrDnF8B,uBqDmFFqC,KAAM,OACpC,CAAErC,KrDnF8B,uBqDmFFqC,KAAM,SACpC8C,KAIEqhB,GAAgB,SAAAloB,GAAQ,OAC5B8H,GACE9H,EACA,CAAEyB,KAAM,qBACR,CACE,gBAAiBwD,KACjB,gBAAiBG,QAIjBkJ,GAAiB,SAAAhF,GAAG,OAAI+B,KAAKe,UAAUnB,GAAW3B,KCvHjD,IAAM+e,GAAb,4LACuB,IAAD,EACcvb,KAAKC,OACrCgb,EAFkB,EACVA,aADU,EACGlG,OACFpW,SAHvB,gDAM4B4G,GAAY,IAC5B0V,EAAgB1V,EAAhB0V,YACJjb,KAAKC,MAAM8U,OAAOpW,QAAU4G,EAAUwP,OAAOpW,OAC/Csc,EAAY1V,EAAUwP,OAAOpW,SATnC,+BAaY,IAAD,EACqDqB,KAAKC,MAAzD6F,EADD,EACCA,WAAYpN,EADb,EACaA,OAAQyD,EADrB,EACqBA,OAAQ4Y,EAD7B,EAC6BA,OAAQsG,EADrC,EACqCA,YAE5C,GAAIvV,EACF,OAAO,KAGT,IAAMlP,EAAQ8H,GAAiB,SAAUqW,EAAOpW,OAEhD,OACE,kBAAC,IAAD,CAAe/H,MAAOA,GACpB,kBAAC,GAAD,CACEhC,KAAK,SACL+R,MAAOjO,EACPqc,OAAQA,EACRM,YAAY,YACZlZ,OAAQA,EACR2Y,WAAYuG,SA9BtB,GAA4Bva,aA6Db0C,gBAfS,SAAAjR,GAAK,MAAK,CAChCmG,OAAQiD,GAAoBpJ,EAAMmG,OAAOA,OAAQnG,EAAM4X,MAAMvO,OAC7DkK,WAAYvT,EAAMmG,OAAOoN,eAGA,SAAA/L,GAAQ,OACjC0J,YACE,CACEwX,eACAI,eACAlf,WAEFpC,KAGWyJ,CAA6C+X,IC5C1DlkB,GAGEoC,GAHFpC,gBACAD,GAEEqC,GAFFrC,iBACAY,GACEyB,GADFzB,uBAGWwjB,GAAb,2MA4BEvH,gBAAkB,SAAAC,GAChB,GAAI,EAAKjU,MAAMkU,aACb,OAAO9c,MA9Bb,EAkCEgd,gBAAkB,SAAArf,GAChBiJ,GAAejJ,GADM,MAEsB,EAAKiL,MAAxCkb,EAFa,EAEbA,SAAUhH,EAFG,EAEHA,aAAcY,EAFX,EAEWA,OAChC,GAAIZ,EAAc,CAAC,IAAD,eACaY,EAAOpW,OAEpCwc,EAAS,OAHO,gBAEM1d,KAAK,QAvCjC,mFACuB,IAAD,EAC4BuC,KAAKC,MAA3Cib,EADU,EACVA,WAAYnG,EADF,EACEA,OAAQT,EADV,EACUA,OAAQC,EADlB,EACkBA,MADlB,eAEWQ,EAAOpW,OAEpCuc,EAJkB,gBAGIzd,KAAK,MAG3B6W,EAAOE,kBAAkBD,EAAOvU,KAAKiU,mBAPzC,gDAU4B1O,GACpBvF,KAAKC,MAAM4F,UAAYN,EAAUM,UAClBN,EAAUkW,MAAM9mB,OACpBqL,KAAKC,MAAMwb,MAAM9mB,MAG5BsgB,iBAAejiB,KAAf,UrDhDoB,SqDgDpB,mBAC4BuS,EAAUkW,MAAMvf,mBAjBpD,6CAuB0B,IAAD,EACW8D,KAAKC,MAA7B7D,EADa,EACbA,YADa,EACAE,OACdjJ,QAAU+I,MAzBrB,yCA4CqBzH,GAAO,IAAD,EACuBqL,KAAKC,MAA3Cob,EADe,EACfA,YAAaC,EADE,EACFA,aAAcvG,EADZ,EACYA,OADZ,eAGMA,EAAOpW,OAA7B5I,EAHgB,KAIjBE,EAJiB,WAIDwH,KAAK,KACrBie,EAAQ9Z,OAASC,OAAO,cACxB8Z,EAAa,UAAMD,EAAN,YAAezlB,GAC5BiC,EAAWnC,EAAS,iBACZA,EADY,YACC4lB,GADD,iBAEZA,GAGd,GADgBlU,OAAOC,QAAQ1P,GAAuBrD,EAAMuD,IAC/C,CACX,IAAM0jB,EAAO7lB,EAAS,WAAOA,GAAc,GAC3CslB,EAAYtlB,EAAWE,GACvBqlB,EAAavlB,EAAW4lB,GACxB1G,iBAAejiB,KAAf,UrD5FsB,SqD4FtB,kBAA6C4oB,OA5DnD,wCAgEoB3kB,GAAO,IAAD,EACU+I,KAAKC,MAA7Bob,EADc,EACdA,YAAatG,EADC,EACDA,OAErB,GADgBtN,OAAOC,QAAQtQ,GAAiBH,IACnC,CAAC,IAAD,eACkB8d,EAAOpW,OAA7B5I,EADI,KAELE,EAFK,WAEWwH,KAAK,KACrBme,EAAO7lB,EAAS,WAAOA,GAAc,GAC3CslB,EAAYtlB,EAAWE,GACvBgf,iBAAejiB,KAAf,UrDxGsB,SqDwGtB,kBAA6C4oB,OAxEnD,+BA4EY,IAAD,SAWH5b,KAAKC,MATP6F,EAFK,EAELA,WACA2V,EAHK,EAGLA,MACAnf,EAJK,EAILA,OACA4U,EALK,EAKLA,YACAC,EANK,EAMLA,WACAC,EAPK,EAOLA,WACAvL,EARK,EAQLA,QACAsO,EATK,EASLA,aACAY,EAVK,EAULA,OAGF,GAAIjP,EACF,OAAO,KACF,GAAIhT,KAAE2J,QAAQgf,GACnB,OAAO,yDAGT,IAAMhH,EAAmB,CACvBzb,KAAMgH,KAAKqU,iBAIXpd,EAMEwkB,EANFxkB,KACAtC,EAKE8mB,EALF9mB,KACAyK,EAIEqc,EAJFrc,YACA6I,EAGEwT,EAHFxT,SACAnT,EAEE2mB,EAFF3mB,aACAgkB,EACE2C,EADF3C,sBAEI/iB,EAAYgf,EAAOpW,MAAM,GACzB/H,EAAQ9B,GAAgBA,EAAa8B,MAAQ9B,EAAa8B,MAAQ,GAClEmiB,EAAiBra,GAAiB,SAAU3I,EAAWa,GAASK,GAEtE,OACE,kBAAC,IAAD,CAAeL,MAAOmiB,GACpB,kBAAC,UAAD,CAASrE,SAAUD,EAAkBhV,UAAU,UAC5CnD,EAAOjJ,OAAS,GAAK,kBAAC,GAAD,CAAQiJ,OAAQA,IACtC,yBAAKmD,UAAU,kBACb,kBAAC+I,GAAD,CAAa5T,KAAK,SAAS+J,MAAO5I,KAGpC,yBAAK0J,UAAU,mBACb,kBAACgZ,GAAD,CACE7jB,KAAK,SACLD,KAAMsC,EACNL,MAAOA,EACP6D,KAAM2E,EACNgS,WAAYA,EACZD,WAAYA,EACZD,YAAaA,EACbwG,OAAQ1X,KAAKqU,gBACbpf,WAAU,aAAI2B,QAAOwI,cAAazK,KAAMsC,GAASnC,GACjD4jB,iBAAkBI,IAEpB,yBAAKrZ,UAAU,gBACb,kBAAC8T,GAAD,CACE3S,QAASZ,KAAKqU,gBACdzf,KAAK,OACL4e,OAAQW,EACRV,UAAW5N,EACX6N,OAAK,IAEP,kBAACH,GAAD,CAAQjR,GAAI2F,EAAUrT,KAAK,OAAO4e,QAAM,EAACE,OAAK,IAC9C,kBAAC,GAAD,MACA,kBAACH,GAAD,CACE3S,QAAS,kBAAM,EAAKib,mBAAmBlnB,IACvCC,KAAK,UACL4e,QAAM,EACNE,OAAK,IAEP,kBAACH,GAAD,CACE3S,QAAS,kBAAM,EAAKiH,kBAAkB5Q,IACtCrC,KAAK,SACL4e,QAAM,EACNE,OAAK,YAxJrB,GAA+B5S,aA4MhB8T,wBACbpR,aAxBsB,SAAAjR,GAAK,MAAK,CAChCkpB,MAAOlpB,EAAMmG,OAAO+iB,MACpB3V,WAAYvT,EAAMmG,OAAOoN,WACzBqO,aAAc5hB,EAAMW,SAASihB,aAC7BtO,QAAStT,EAAMmG,OAAOmN,QACtBvJ,OAAQ/J,EAAM4X,MAAM7N,WAGK,SAAAvC,GAAQ,OACjC0J,YACE,CACEyX,cACAG,eACAF,YACAG,gBACApK,eACAC,cACAC,cACAhV,gBAEFrC,KAIFyJ,CAA6CgY,KC/NvCnkB,GAAoBoC,GAApBpC,gBAEKykB,GAAb,2MAmBE7H,gBAAkB,SAAAC,GAChB,GAAI,EAAKjU,MAAMkU,aACb,OAAO9c,MArBb,EAyBEgd,gBAAkB,SAAArf,GAChBiJ,GAAejJ,GADM,MAEsB,EAAKiL,MAAxCkU,EAFa,EAEbA,aAAcgH,EAFD,EAECA,SAAUpG,EAFX,EAEWA,OAChCZ,GAAgBgH,EAAS,SAAUpG,EAAOpW,QA5B9C,mFACuB,IAAD,EACQqB,KAAKC,MAAvBqU,EADU,EACVA,OAAQC,EADE,EACFA,MAChBD,EAAOE,kBAAkBD,EAAOvU,KAAKiU,mBAHzC,gDAM4B1O,GACpBvF,KAAKC,MAAM4F,UAAYN,EAAUM,SACnCoP,iBAAejiB,KAAf,UtDxBsB,SsDwBtB,mBAC4BuS,EAAUkW,MAAMvf,kBATlD,6CAc0B,IAAD,EACW8D,KAAKC,MAA7B7D,EADa,EACbA,YADa,EACAE,OACdjJ,QAAU+I,MAhBrB,+BA+BY,IAAD,EAUH4D,KAAKC,MARP8U,EAFK,EAELA,OACArgB,EAHK,EAGLA,OACA4H,EAJK,EAILA,OACAuJ,EALK,EAKLA,QACAsL,EANK,EAMLA,WACAC,EAPK,EAOLA,WACAF,EARK,EAQLA,YACAiD,EATK,EASLA,aAGIvd,EAAQ8H,GAAiB,SAAUqW,EAAOpW,MAAO,aAEvD,OACE,kBAAC,IAAD,CAAe/H,MAAOA,GACpB,kBAACoiB,GAAD,CACEpkB,KAAK,SACLmgB,OAAQA,EACRrgB,OAAQA,EACR4H,OAAQA,EACRuJ,QAASA,EACTsL,WAAYA,EACZC,WAAYA,EACZF,YAAaA,EACbiD,aAAcA,EACd8E,YAAajZ,KAAKqU,uBAzD5B,GAA8BvT,aAoGf8T,wBACbpR,aArBsB,SAAAjR,GAAK,MAAK,CAChCkpB,MAAOlpB,EAAMmG,OAAO+iB,MACpBtH,aAAc5hB,EAAMW,SAASihB,aAC7B7X,OAAQ/J,EAAM4X,MAAM7N,OACpBuJ,QAAStT,EAAMmG,OAAOmN,QACtBnR,OAAQnC,EAAMmC,OAAOA,WAGI,SAAAqF,GAAQ,OACjC0J,YACE,CACEyN,eACAC,cACAC,cACA+J,YACA/e,gBAEFrC,KAIFyJ,CAA6CsY,K,qBC1DhCC,GAnDf,uLAEI/b,KAAKsF,KAAK0W,cAAcC,SAF5B,+BAKY,IAAD,EACsDjc,KAAKC,MAA1DoJ,EADD,EACCA,MAAO1K,EADR,EACQA,MAAOud,EADf,EACeA,OAAQ1U,EADvB,EACuBA,cAAe2U,EADtC,EACsCA,YAC7C,OACE,kBAAC,KAAD,CACED,OAAQA,EACRxW,IAAI,gBACJjG,UAAU,WACV4C,gBAAgB,kBAChB+Z,UAAQ,EACRC,cAAY,GAEXhT,EAAMhW,OACL,yBAAKoM,UAAU,qBACZ3M,KAAEoP,IAAImH,GAAO,SAAC1B,EAAMvF,GAAP,OACZ,kBAAC,GAAD,CACEhP,IAAKgP,EACLxB,QAASub,EACT3U,cAAeA,EACf7I,MAAOA,EACPgJ,KAAMA,OAGV,kBAAC,GAAD,MACA,yBAAKlI,UAAU,eACb,uEAIJ,yBAAKA,UAAU,gBACb,kBAACC,GAAD,CAAMzI,KAAK,WACX,yEAnCZ,GAA8B6J,aCiBtBvJ,GAAuBkC,GAAvBlC,mBAEK+kB,GAAb,2MA2BEC,aAAe,WACb,EAAKjX,KAAKkX,SAASD,gBA5BvB,mFACuB,IAAD,EACmBvc,KAAKC,OAC1CkJ,EAFkB,EACVA,kBADU,EACQ4L,OACFpW,SAH5B,gDAM4B4G,GAAY,IAC5B4D,EAAqB5D,EAArB4D,iBACJnJ,KAAKC,MAAM8U,OAAOpW,QAAU4G,EAAUwP,OAAOpW,OAC/CwK,EAAiB5D,EAAUwP,OAAOpW,SATxC,6BAaS8d,GAAgB,IAAD,EACyBzc,KAAKC,MAA1CmJ,EADY,EACZA,kBAAmBC,EADP,EACOA,MAAO0L,EADd,EACcA,OAC5B2H,EhEsD+B,SAACD,EAAeE,GACvD,GACGF,IAAkBA,EAAcppB,QAChCspB,IAAiBA,EAAatpB,OAE/B,MAAO,GAET,IAAMupB,EAAmB9pB,KAAEoP,IAAIya,GAAc,SAAAE,GAAE,OAC7Chf,GAAoBgf,EAAGloB,SAEzB,OAAO7B,KAAEgqB,MAAML,GACZ5gB,QAAO,SAAA8L,GAAI,OAAIiV,EAAiBpnB,SAASmS,EAAK1Q,SAC9CiL,KAAI,SAAAyF,GAAI,OAAIA,EAAK1Q,QACjB/C,QgEnEqB6oB,CAA0BN,EAAepT,GAC/D,GAAIqT,EAAcrpB,OAAS,IACToU,OAAOC,QACrBnQ,GAAmBmlB,EAAcjf,KAAK,QAGtC,OAAO,EAGX2L,EAAkB2L,EAAOpW,MAAO8d,KAxBpC,2CA+BuBO,EAAc5pB,GAAM,IAAD,SACkB4M,KAAKC,MAArD8U,EAD8B,EAC9BA,OAAQhL,EADsB,EACtBA,kBAAmBJ,EADG,EACHA,iBACnC,OACE,wBAAIvW,IAAKA,GACP,4BACE,kBAAC,GAAD,CACEsS,IAAI,WACJ/G,MAAOoW,EAAOpW,OAAS,GACvB0K,MAAO2T,EACPb,YAAapS,EACbvC,cAAemC,EACfuS,OAAQ,SAAAc,GAAY,OAAI,EAAKd,OAAOc,UA1ChD,yCAiDqBjnB,EAAWiI,GAAQ,IAC5B/G,EAAelB,EAAfkB,KAAMtC,EAASoB,EAATpB,KACR2N,EAAE,UxD9EgB,SwD8EhB,wBAAkC3N,GAC1C,OACE,wBAAIvB,IAAK4K,GACP,wBAAIyB,UAAU,aACZ,gCACE,kBAAC,OAAD,CAAM6C,GAAIA,GACR,kBAAC5C,GAAD,CAAMzI,KAAK,WACVA,QA1Df,mCAkEgB,IAAD,OACHoS,EAAUrJ,KAAKC,MAAfoJ,MACF4T,EAAO5T,EAAMxN,QAAO,SAAAqhB,GAAM,MAAoB,cAAhBA,EAAOtoB,QACrCooB,EAAe3T,EAAMxN,QAAO,SAAAqhB,GAAM,OAAKA,EAAOtoB,QAEpD,OAAOqoB,EACJ/a,KAAI,SAACsK,EAAOxO,GAAR,OAAkB,EAAKmX,mBAAmB3I,EAAOxO,MACrDmf,OAAOnd,KAAKod,qBAAqBJ,EAAcC,EAAK5pB,OAAS,MAzEpE,oCA6EI,OACE,yBAAKoM,UAAU,iBACb,+BACE,+BACE,4BACE,oDAGJ,+BAAQO,KAAKuV,kBArFvB,+BA2FY,IAAD,SACgCvV,KAAKC,MAApC6F,EADD,EACCA,WAAYiP,EADb,EACaA,OAAQ5Y,EADrB,EACqBA,OAE5B,GAAI2J,EACF,OAAO,KAGT,IAAMxD,EAAE,UxD7HgB,SwD6HhB,sBACF1L,EAAQ8H,GAAiB,eAAgBqW,EAAOpW,OAEtD,OACE,kBAAC,IAAD,CAAe/H,MAAOA,GACpB,6BACE,yBAAK6I,UAAU,kBACb,kBAAC+I,GAAD,CAAa5T,KAAK,cAAc+J,MAAOoW,EAAOpW,QAC9C,yBAAKc,UAAU,yBACb,kBAAC,OAAD,CAAMA,UAAU,eAAe6C,GAAIA,GAAnC,iBAGA,kBAACiR,GAAD,CACE3S,QAAS,kBAAM,EAAK2b,gBACpB3nB,KAAK,SACL4e,QAAM,KAGV,yBAAK/T,UAAU,cACb,kBAAC,GAAD,CAAauJ,SAAS,WAAW7M,OAAQA,MAG5C6D,KAAKyZ,oBAxHhB,GAAiC3Y,aA0JlB0C,gBAhBS,SAAAjR,GAAK,MAAK,CAChC8W,MAAOO,GAAiBrX,EAAMsG,YAAYwQ,MAAO9W,EAAM4X,MAAMvO,OAC7DkK,WAAYvT,EAAMsG,YAAYiN,eAGL,SAAA/L,GAAQ,OACjC0J,YACE,CACE0F,oBACAC,qBACAO,oBACAxN,WAEFpC,KAGWyJ,CAA6C8Y,IC3K7Ce,GARE,kBACf,yBAAK5d,UAAU,YACb,yBAAKuI,IAAKoO,EAAQ,KAA2ClO,IAAI,iBACjE,sEACA,2ECiBF,qBAAC,QAAD,CAAOvT,KAAI,U1DvBe,U0DuBMsb,UAAWrK,IACzC,kBAAC,aAAD,CAAYqK,UAAW6F,KACvB,kBAAC,QAAD,CAAOnhB,KAAK,gBAAgBsb,UAAW8D,KACvC,kBAAC,QAAD,CAAOpf,KAAK,SACV,kBAAC,aAAD,CAAYsb,UAAW6F,KACvB,kBAAC,QAAD,CAAOnhB,KAAK,WAAWsb,UAAWmJ,KAClC,kBAAC,QAAD,CAAOzkB,KAAK,WAAWsb,UAAW0I,KAClC,kBAAC,QAAD,CAAOhkB,KAAK,KAAKsb,UAAW6F,MAE9B,kBAAC,QAAD,CAAOnhB,KAAK,eACV,kBAAC,QAAD,CAAOA,KAAK,oBACV,kBAAC,aAAD,CAAYsb,UAAWoJ,KACvB,kBAAC,QAAD,CAAO1kB,KAAK,WAAWsb,UAAW4J,KAClC,kBAAC,QAAD,CAAOllB,KAAK,WAAWsb,UAAW0J,KAClC,kBAAC,QAAD,CAAOhlB,KAAK,KAAKsb,UAAWoJ,OAGhC,kBAAC,QAAD,CAAO1kB,KAAK,UACV,kBAAC,aAAD,CAAYsb,UAAWsL,KACvB,kBAAC,QAAD,CAAO5mB,KAAK,WAAWsb,UAAW6L,KAClC,kBAAC,QAAD,CAAOnnB,KAAK,WAAWsb,UAAWuL,KAClC,kBAAC,QAAD,CAAO7mB,KAAK,KAAKsb,UAAWsL,MAE9B,kBAAC,QAAD,CAAO5mB,KAAK,aACV,kBAAC,aAAD,CAAYsb,UAAWmK,KACvB,kBAAC,QAAD,CAAOzlB,KAAK,WAAWsb,UAAW+K,KAClC,kBAAC,QAAD,CAAOrmB,KAAK,WAAWsb,UAAWoK,KAClC,kBAAC,QAAD,CAAO1lB,KAAK,KAAKsb,UAAWmK,MAE9B,kBAAC,QAAD,CAAOzlB,KAAK,eACV,kBAAC,aAAD,CAAYsb,UAAWqM,KACvB,kBAAC,QAAD,CAAO3nB,KAAK,QAAQsb,UAAWnG,KAC/B,kBAAC,QAAD,CAAOnV,KAAK,KAAKsb,UAAWqM,MAE9B,kBAAC,QAAD,CAAO3nB,KAAI,U1DzDa,S0DyDb,MAAuBsb,UAAWoN,M,mDC3ClCC,eAAgB,CAC7BC,QAASC,gBACTtL,KjCIa,WAMZ,IALD3f,EAKA,uDALQ,CACNmf,KAAM,GACN5L,YAAY,GAEdgS,EACA,uCACA,OAAQA,EAAOljB,MACb,IAxBmC,0BAyBjC,OAAO,eACFrC,EADL,CAEEuT,YAAY,IAEhB,IA5BmC,0BA6BjC,OAAO,eACFvT,EADL,CAEEmf,KAAMoG,EAAOpG,KACb5L,YAAY,IAEhB,IAjCmC,0BAkCjC,OAAO,eACFvT,EADL,CAEEuT,YAAY,IAEhB,QACE,OAAOvT,IiC5BXmC,OlEuDa,WASZ,IARDnC,EAQA,uDARQ,CACNmC,OAAQ,GACRmR,SAAS,EACT6M,eAAe,EACfyB,cAAc,EACdrO,YAAY,GAEdgS,EACA,uCACA,OAAQA,EAAOljB,MACb,IAzEgC,uBA0E9B,OAAO,eACFrC,EADL,CAEEuT,YAAY,IAEhB,IA7EgC,uBA8E9B,OAAO,eACFvT,EADL,CAEEmC,OAAQojB,EAAOpjB,OACfoR,YAAY,IAEhB,IAlFgC,uBAmF9B,OAAO,eACFvT,EADL,CAEEuT,YAAY,IAEhB,IArF8B,qBAsF5B,OAAO,eACFvT,EADL,CAEEmC,OAAQojB,EAAOpjB,OACfge,eAAe,EACf7M,SAAS,IAEb,IA3F8B,qBA4F5B,OAAO,eACFtT,EADL,CAEEmgB,eAAe,IAEnB,IA/FiC,wBAgG/B,OAAO,eACFngB,EADL,CAEEmgB,eAAe,EACf7M,SAAS,IAEb,QACE,OAAO,eACFtT,EADL,CAEEsT,SAAS,EACT6M,eAAe,MkEvGrBla,MzB8Ga,WAQZ,IAPDjG,EAOA,uDAPQ,CACNiG,MAAO,GACPqgB,KAAM,GACN/S,YAAY,EACZD,SAAS,GAEXiS,EACA,uCACA,OAAQA,EAAOljB,MACb,IA/H+B,sBAgI/B,IA7H8B,qBA8H5B,OAAO,eACFrC,EADL,CAEEuT,YAAY,IAEhB,IApI+B,sBAqI7B,OAAO,eACFvT,EADL,CAEEiG,MAAOsf,EAAOtf,MACdsN,YAAY,EACZ+S,KAAM,KAEV,IA1I+B,sBA2I7B,OAAO,eACFtmB,EADL,CAEEuT,YAAY,EACZtN,MAAO,KAEX,IA9I8B,qBA+I5B,OAAO,eACFjG,EADL,CAEEsmB,KAAMf,EAAOe,KACb/S,YAAY,IAEhB,IAnJ8B,qBAoJ5B,OAAO,eACFvT,EADL,CAEEsmB,KAAM,GACN/S,YAAY,IAEhB,IAvJ4B,mBAwJ1B,OAAO,eACFvT,EADL,CAEEsmB,KAAMf,EAAOe,KACbhT,SAAS,IAEb,IA1J+B,sBA2J7B,OAAO,eACFtT,EADL,CAEEiG,MAAOwD,GAAczJ,EAAMiG,MAAOsf,EAAOjd,MAE7C,QACE,OAAO,eACFtI,EADL,CAEEsT,SAAS,MyBpKfjN,Y7D4Ka,WASZ,IARDrG,EAQA,uDARQ,CACNqG,YAAa,GACb8gB,QAAS,GACTE,gBAAiB,GACjB9T,YAAY,EACZD,SAAS,GAEXiS,EACA,uCACA,OAAQA,EAAOljB,MACb,IAtLqC,4BAuLrC,IApLoC,2BAqLpC,IAlLkC,yBAmLhC,OAAO,eACFrC,EADL,CAEEuT,YAAY,IAEhB,IA5LqC,4BA6LnC,OAAO,eACFvT,EADL,CAEEqG,YAAakf,EAAOlf,YACpBkN,YAAY,IAEhB,IA/LoC,2BAgMlC,OAAO,eACFvT,EADL,CAEEmnB,QAAS5B,EAAO4B,QAChB5T,YAAY,IAEhB,IAlMkC,yBAmMhC,OAAO,eACFvT,EADL,CAEEqnB,gBAAiB9B,EAAOwB,IACxBxT,YAAY,IAEhB,IA7MqC,4BA8MnC,OAAO,eACFvT,EADL,CAEEqG,YAAa,GACbkN,YAAY,IAEhB,IAhNoC,2BAiNlC,OAAO,eACFvT,EADL,CAEEmnB,QAAS,GACT5T,YAAY,IAEhB,IAnNkC,yBAoNhC,OAAO,eACFvT,EADL,CAEEqnB,gBAAiB,GACjB9T,YAAY,IAEhB,IAvNgC,uBAwN9B,OAAO,eACFvT,EADL,CAEEqnB,gBAAiB9B,EAAOwB,IACxBzT,SAAS,IAEb,IA1NmC,0BA2NjC,OAAO,eACFtT,EADL,CAEEmnB,QAAS1d,GAAczJ,EAAMmnB,QAAS5B,EAAOjd,MAEjD,QACE,OAAO,eACFtI,EADL,CAEEsT,SAAS,M6D/Of3S,SlCmEa,WAQZ,IAPDX,EAOA,uDAPQ,CACNW,SAAU,GACVD,gBAAiB,EACjBuc,WAAY,GACZ2E,cAAc,GAEhB2D,EACA,uCACA,OAAQA,EAAOljB,MACb,IAvFwB,eAwFtB,OAAO,eACFrC,EADL,CAEEW,SAAS,eACJX,EAAMW,SADH,CAEN0D,MAAOkhB,EAAOlhB,QAEhBud,cAAc,IAElB,IA/FuB,cAgGrB,OAAO,eACF5hB,EADL,CAEEW,SAAS,eACJX,EAAMW,SADH,CAENkM,YAAa0Y,EAAOrd,OAEtB0Z,cAAc,IAElB,IAvGuB,cAwGrB,OAAO,eACF5hB,EADL,CAEEW,SAAS,eACJX,EAAMW,SADH,CAENyB,KAAMmjB,EAAOnjB,OAEfwf,cAAc,IAElB,IA/GgC,uBAgH9B,OAAO,eACF5hB,EADL,CAEEW,SAAU4kB,EAAO/iB,UAErB,IAnHyB,gBAoHvB,OAAO,eACFxC,EADL,CAEEW,SAAUZ,aAAmBC,EAAOulB,EAAOtlB,YAC3CS,gBAAiBV,EAAMU,gBAAkB,IAE7C,IAxH4B,mBAyH1B,OAAO,eACFV,EADL,CAEEW,SAAUC,aAAwBZ,EAAOulB,EAAOtlB,WAAYslB,EAAO1kB,KACnE+gB,cAAc,EACd3E,WAAW,GAAD,OAAqB,IAAhBiO,KAAKC,YAExB,IA9H4B,mBA+H1B,OAAO,eACFnrB,EADL,CAEEW,SAAUM,aACRjB,EACAulB,EAAOtlB,WACPslB,EAAOrkB,SACPqkB,EAAOpkB,OAAO4K,QAEhB6V,cAAc,IAElB,IAxI8B,qBAyI5B,OAAO,eACF5hB,EADL,CAEEW,SAAUc,aACRzB,EACAulB,EAAO7jB,SACP6jB,EAAO5jB,OAETigB,cAAc,IAElB,IAjJ2B,kBAkJzB,OAAO,eACF5hB,EADL,CAEEW,SAAUmB,aACR9B,EACAulB,EAAOtlB,WACPslB,EAAOxjB,OACPwjB,EAAOvjB,WAETib,WAAW,GAAD,OAAqB,IAAhBiO,KAAKC,UACpBvJ,cAAc,IAElB,IA5JyB,gBA6JvB,OAAO,eACF5hB,EADL,CAEEW,SAAUiB,aACR5B,EACAulB,EAAO7jB,SACP6jB,EAAO1jB,aAETnB,gBAAiBV,EAAMU,gBAAkB,EACzCkhB,cAAc,IAElB,IAtKwB,eAuKtB,OAAO,eACF5hB,EADL,CAEEW,SAAUc,aACRzB,EACAulB,EAAO7jB,SACP6jB,EAAO5jB,OAETigB,cAAc,IAElB,QACE,OAAO,eACF5hB,EADL,CAEE4hB,cAAc,MkClLpBzb,OR8Ga,WAQZ,IAPDnG,EAOA,uDAPQ,CACNmG,OAAQ,GACR+iB,MAAO,GACP3V,YAAY,EACZD,SAAS,GAEXiS,EACA,uCACA,OAAQA,EAAOljB,MACb,IAlIgC,uBAmIhC,IA/H+B,sBAgI7B,OAAO,eACFrC,EADL,CAEEuT,YAAY,IAEhB,IAvIgC,uBAwI9B,OAAO,eACFvT,EADL,CAEEmG,OAAQof,EAAOpf,OACfoN,YAAY,EACZ2V,MAAO,KAEX,IA7IgC,uBA8I9B,OAAO,eACFlpB,EADL,CAEEuT,YAAY,EACZpN,OAAQ,KAEZ,IAhJ+B,sBAiJ7B,OAAO,eACFnG,EADL,CAEEkpB,MAAO3D,EAAO2D,MACd3V,YAAY,IAEhB,IArJ+B,sBAsJ7B,OAAO,eACFvT,EADL,CAEEkpB,MAAO,GACP3V,YAAY,IAEhB,IAxJ6B,oBAyJ3B,OAAO,eACFvT,EADL,CAEEkpB,MAAO3D,EAAO2D,MACd5V,SAAS,IAEb,IA1JgC,uBA2J9B,OAAO,eACFtT,EADL,CAEEmG,OAAQsD,GAAczJ,EAAMmG,OAAQof,EAAOjd,MAE/C,QACE,OAAO,eACFtI,EADL,CAEEsT,SAAS,MQpKflN,UZkGa,WAUZ,IATDpG,EASA,uDATQ,CACN8W,MAAO,GACP0R,YAAa,GACbjV,YAAY,EACZD,SAAS,EACTyU,iBAAiB,EACjBnG,cAAc,GAEhB2D,EACA,uCACA,OAAQA,EAAOljB,MACb,IArHmC,0BAsHnC,IAnHkC,yBAoHhC,OAAO,eACFrC,EADL,CAEEuT,YAAY,IAEhB,IA1HmC,0BA2HjC,OAAO,eACFvT,EADL,CAEE8W,MAAOyO,EAAOzO,MACdvD,YAAY,EACZiV,YAAa,KAEjB,IAhImC,0BAiIjC,OAAO,eACFxoB,EADL,CAEEuT,YAAY,EACZiV,YAAa,KAEjB,IApIkC,yBAqIhC,OAAO,eACFxoB,EADL,CAEEwoB,YAAajD,EAAOnQ,KACpB7B,YAAY,IAEhB,IAzIkC,yBA0IhC,OAAO,eACFvT,EADL,CAEEwoB,YAAa,GACbjV,YAAY,IAEhB,IA7IgC,uBA8I9B,OAAO,eACFvT,EADL,CAEEwoB,YAAajD,EAAOnQ,KACpB9B,SAAS,EACTyU,iBAAiB,IAErB,IAnJgC,uBAoJ9B,OAAO,eACF/nB,EADL,CAEE+nB,iBAAiB,IAErB,IAtJmC,0BAuJjC,OAAO,eACF/nB,EADL,CAEE8W,MAAOrN,GAAczJ,EAAM8W,MAAOyO,EAAOjd,MAE7C,IAzJ4B,mBA0J1B,OAAO,eACFtI,EADL,CAEE+nB,iBAAiB,EACjBzU,SAAS,IAEb,QACE,OAAO,eACFtT,EADL,CAEEsT,SAAS,EACTyU,iBAAiB,MYvKvBzhB,Y7CkEa,WAOZ,IANDtG,EAMA,uDANQ,CACN8W,MAAO,GACPvD,YAAY,EACZ6X,WAAW,GAEb7F,EACA,uCACA,OAAQA,EAAOljB,MACb,IAlFqC,4BAmFnC,OAAO,eACFrC,EADL,CAEEuT,YAAY,IAEhB,IAtFqC,4BAuFnC,OAAO,eACFvT,EADL,CAEE8W,MAAOyO,EAAOzO,MACdvD,YAAY,IAEhB,IA3FqC,4BA4FnC,OAAO,eACFvT,EADL,CAEEuT,YAAY,IAEhB,IA5FkC,yBA6FhC,OAAO,eACFvT,EADL,CAEEorB,WAAW,IAEf,IAhGkC,yBAqGlC,IApGkC,yBAqGhC,OAAO,eACFprB,EADL,CAEEorB,WAAW,IAEf,IAvGqC,4BAwGnC,OAAO,eACFprB,EADL,CAEE8W,MAAOrN,GAAczJ,EAAM8W,MAAOyO,EAAOjd,MAE7C,QACE,OAAOtI,I6C/GX4X,MpESa,WAMZ,IALD5X,EAKA,uDALQ,CACNqJ,MAAO,GACPU,OAAQ,IAEVwb,EACA,uCACA,OAAQA,EAAOljB,MACb,IA5B0B,iBA6BxB,OAAO,eACFrC,EADL,CAEEqJ,MAAOkc,EAAOlc,QAElB,IAhCwB,eAiCtB,OAAO,eACFrJ,EADL,CAEE+J,OAAQ,KAEZ,IApC4B,mBAqC1B,OAAO,eACF/J,EADL,CAEE+J,OAAQwb,EAAOxb,SAEnB,QACE,OAAO,eACF/J,EADL,CAEEqJ,MAAO,OoElCb+J,c1EXa,WAKZ,IAJDpT,EAIA,uDAJQ,CACNwE,aAAc,IAEhB+gB,EACA,uCACA,OAAQA,EAAOljB,MACb,IApB4B,mBAqB1B,OAAO,eACFrC,EADL,CAEEwE,aAAc+gB,EAAO/gB,eAEzB,QACE,OAAOxE,M2EiBEqrB,IAtCAC,OAEY,SAAAC,GACzB,IAAMC,EAAc,CAACC,MAErB,OAAOC,YACLC,GACAJ,EACAK,YAAQC,IAAe,WAAf,EAAmBL,OCHzBM,I,OAAQT,MACRU,GAAUC,+BAAqBtJ,iBAAgBoJ,IAErDG,iBACE,kBAAC,IAAD,CAAUH,MAAOA,IACf,kBAAC,SAAD,CAAQC,QAASA,GAASG,OAAQA,IAChC,kBAAC,WAAD,CAAUC,KAAI,U7DjBQ,S6DiBR,KAAsBpc,GAAE,U7DjBhB,S6DiBgB,eAG1Cqc,SAASC,eAAe,W","file":"static/js/main.f3346e4e.chunk.js","sourcesContent":["import _ from 'underscore';\nimport cloneDeep from 'lodash/cloneDeep';\n\n/**\n * Returns the metadata of the state with the new empty field. If the field does\n * not exist, returns the original metadata. Does not mutate the given state.\n * @param {Object} state\n * @param {String} namePrefix\n * @return {Object} metadata\n */\nexport const addFieldToMetadata = (state, namePrefix) => {\n  let tmpState = cloneDeep(state);\n  let field = eval(`tmpState.${namePrefix}`);\n  if (field === undefined) return tmpState.metadata;\n  if (_.isArray(field)) field.push('');\n  else field[`New field ${state.new_field_count}`] = '';\n  return tmpState.metadata;\n};\n\n/**\n * Returns the metadata of the state with the removed key. If the field does not\n * exist, returns the original metadata. Does not mutate the given state.\n * @param {Object} state\n * @param {String} namePrefix\n * @param {String} key\n * @return {Object} metadata\n */\nexport const removeFieldFromMetadata = (state, namePrefix, key) => {\n  let tmpState = cloneDeep(state);\n  let field = eval(`tmpState.${namePrefix}`);\n  if (field === undefined) return tmpState.metadata;\n  if (_.isArray(field)) {\n    if (key >= field.length) {\n      return tmpState.metadata;\n    }\n    field.splice(key, 1);\n  } else {\n    if (!_.has(field, key)) {\n      return tmpState.metadata;\n    }\n    delete field[key];\n  }\n  return tmpState.metadata;\n};\n\n/**\n * Returns the metadata of the state with the updated key. If the field does not\n * exist or the key already exists, returns the original metadata. Does not\n * mutate the given state.\n * @param {Object} state\n * @param {String} namePrefix\n * @param {String} fieldKey\n * @param {String} newKey\n * @return {Object} metadata\n */\nexport const updateMetadataFieldKey = (state, namePrefix, fieldKey, newKey) => {\n  let tmpState = cloneDeep(state);\n  let field = eval(`tmpState.${namePrefix}`);\n  if (field === undefined) return tmpState.metadata;\n  if (_.has(field, newKey)) return tmpState.metadata;\n  field = Object.keys(field).reduce((result, current) => {\n    if (current === fieldKey) result[newKey] = field[current];\n    else result[current] = field[current];\n    return result;\n  }, {});\n  eval(`tmpState.${namePrefix} = field`);\n  return tmpState.metadata;\n};\n\n/**\n * Returns the metadata of the state with the updated value of given path(nameAttr).\n * If the field does not exist, creates a new field. Does not mutate the given state.\n * @param {Object} state\n * @param {String} nameAttr\n * @param {String} value\n * @return {Object} metadata\n */\nexport const updateMetadataFieldValue = (state, nameAttr, value) => {\n  let tmpState = cloneDeep(state);\n  eval(`tmpState.${nameAttr} = value`);\n  return tmpState.metadata;\n};\n\n/**\n * Returns the metadata of the state with the converted type of given path(nameAttr).\n * If the field does not exist, returns the original metadata.\n * Does not mutate the given state.\n * @param {Object} state\n * @param {String} nameAttr\n * @param {String} convertType\n * @return {Object} metadata\n */\nexport const convertMetadataField = (state, nameAttr, convertType) => {\n  let tmpState = cloneDeep(state);\n  let field = eval(`tmpState.${nameAttr}`);\n  if (field === undefined) return tmpState.metadata;\n  if (convertType === 'array') field = [''];\n  else if (convertType === 'object') {\n    let key = `New field ${state.new_field_count}`;\n    field = { [key]: '' };\n  } else field = '';\n  eval(`tmpState.${nameAttr} = field`);\n  return tmpState.metadata;\n};\n\n/**\n * Returns the metadata of the state with the sorted array. Moves the array item to\n * target index, shifts the rest of them. If the given path is not an array,\n * returns the original metadata. Does not mutate the given state.\n * @param {Object} state\n * @param {String} namePrefix\n * @param {Number} srcInd\n * @param {Number} targetInd\n * @return {Object} metadata\n */\nexport const moveMetadataArrayItem = (state, namePrefix, srcInd, targetInd) => {\n  let tmpState = cloneDeep(state);\n  let arr = eval(`tmpState.${namePrefix}`);\n  if (!_.isArray(arr)) return tmpState.metadata;\n  arr.splice(targetInd, 0, arr.splice(srcInd, 1)[0]);\n  return tmpState.metadata;\n};\n\n/**\n * Injects the relevant default front matter fields read from the config file into\n * the provided front matter object\n * @param {Object} config\n * @param {String} path\n * @param {String} type\n * @param {Object} front_matter\n * @return {Object} metadata\n */\nexport const injectDefaultFields = (config, path, type, front_matter = {}) => {\n  let defaults;\n  try {\n    defaults = config.content.defaults;\n  } catch (e) {\n    return {};\n  }\n  let metafields = {};\n  _.each(defaults, field => {\n    const scope = field.scope;\n    if (\n      (!scope.type || scope.type === type) &&\n      (!scope.path || scope.path === path)\n    ) {\n      _.extend(metafields, field.values);\n    }\n  });\n  return _.extend(metafields, front_matter);\n};\n\n/**\n * Given a field-value and corresponding key, this utility returns\n * metadata type for the pair.\n * @param {*} value\n * @param {String} key\n * @return {String} type\n */\nexport const computeFieldType = (value, key = null) => {\n  let type = 'simple';\n  const specialKeys = ['tags', 'categories'];\n  if (specialKeys.includes(key) && _.isArray(value)) return type;\n\n  if (_.isObject(value)) type = 'object';\n  if (_.isArray(value)) type = 'array';\n  return type;\n};\n","module.exports = \"data:image/png;base64,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\"","export const API =\n  process.env.NODE_ENV === 'production'\n    ? '/_api'\n    : 'http://localhost:4000/_api';\n\nexport const getSiteMetaUrl = () => `${API}/site_meta`;\n\nexport const getConfigurationUrl = () => `${API}/configuration`;\nexport const putConfigurationUrl = () => `${API}/configuration`;\n\nexport const pagesAPIUrl = (directory = '') => `${API}/pages/${directory}`;\nexport const pageAPIUrl = (directory, filename) =>\n  directory\n    ? `${API}/pages/${directory}/${filename}`\n    : `${API}/pages/${filename}`;\n\nexport const draftsAPIUrl = (directory = '') => `${API}/drafts/${directory}`;\nexport const draftAPIUrl = (directory, filename) =>\n  directory\n    ? `${API}/drafts/${directory}/${filename}`\n    : `${API}/drafts/${filename}`;\n\nexport const collectionsAPIUrl = () => `${API}/collections`;\nexport const collectionAPIUrl = (collection_name, directory) =>\n  directory\n    ? `${API}/collections/${collection_name}/entries/${directory}`\n    : `${API}/collections/${collection_name}/entries`;\nexport const documentAPIUrl = (collection_name, directory, filename) =>\n  directory\n    ? `${API}/collections/${collection_name}/${directory}/${filename}`\n    : `${API}/collections/${collection_name}/${filename}`;\n\nexport const datafilesAPIUrl = (directory = '') => `${API}/data/${directory}`;\nexport const datafileAPIUrl = (directory, filename) =>\n  directory\n    ? `${API}/data/${directory}/${filename}`\n    : `${API}/data/${filename}`;\n\nexport const staticfilesAPIUrl = (directory = '') =>\n  `${API}/static_files/${directory}`;\nexport const staticfileAPIUrl = (directory, filename) =>\n  directory\n    ? `${API}/static_files/${directory}/${filename}`\n    : `${API}/static_files/${filename}`;\n","// Action Types\nexport const ADD_NOTIFICATION = 'ADD_NOTIFICATION';\n\n// Actions\nexport const addNotification = (title, message, level) => ({\n  type: ADD_NOTIFICATION,\n  notification: {\n    title,\n    message,\n    level,\n  },\n});\n\n// Reducer\nexport default function notifications(\n  state = {\n    notification: {},\n  },\n  action\n) {\n  switch (action.type) {\n    case ADD_NOTIFICATION:\n      return {\n        ...state,\n        notification: action.notification,\n      };\n    default:\n      return state;\n  }\n}\n","export class BadInputError extends Error {\n  constructor(message) {\n    super();\n    this.name = 'BadInputError';\n    this.message = message || 'Bad input';\n    this.stack = new Error().stack;\n  }\n}\n","// inline messages\nexport const getDeleteMessage = filename =>\n  `Are you sure that you want to delete \"${filename}\" ?`;\n\nexport const getLeaveMessage = () =>\n  'You have unsaved changes on this page. Are you sure you want to leave?';\n\nexport const getNotFoundMessage = type => `No ${type} found.`;\n\nexport const getOverrideMessage = filename =>\n  `${filename} will be overwritten. Continue anyway?`;\n\n// notification messages\nexport const getParserErrorMessage = () => 'Parse Error';\n\nexport const getSuccessMessage = () => 'Success';\n\nexport const getErrorMessage = () => 'Error';\n\nexport const getUploadSuccessMessage = filename =>\n  `${filename} uploaded successfully`;\n\nexport const getUploadErrorMessage = () => `Error occurred uploading the file.`;\n\nexport const getFetchErrorMessage = filename =>\n  `Could not fetch the ${filename}`;\n\nexport const getUpdateErrorMessage = filename =>\n  `Could not update the ${filename}`;\n\nexport const getDeleteErrorMessage = filename =>\n  `Could not delete the ${filename}`;\n\nexport const getPublishDraftMessage = (draftPath, postPath) =>\n  `'${draftPath}' will be converted to '${postPath}'`;\n\n// validation messages\nexport const getTitleRequiredMessage = () => 'The title is required.';\n\nexport const getFilenameRequiredMessage = () => 'The filename is required.';\n\nexport const getContentRequiredMessage = () => 'The content is required.';\n\nexport const getFilenameNotValidMessage = () => 'The filename is not valid.';\n\n// sidebar titles\nexport const sidebar = {\n  pages: 'Pages',\n  posts: 'Posts',\n  drafts: 'Drafts',\n  datafiles: 'Data Files',\n  collections: 'Collections',\n  staticfiles: 'Static Files',\n  configuration: 'Configuration',\n};\n\n// button labels\nexport const labels = {\n  save: {\n    label: 'Save',\n    triggeredLabel: 'Saved',\n  },\n  create: {\n    label: 'Create',\n    triggeredLabel: 'Created',\n  },\n  delete: {\n    label: 'Delete',\n  },\n  publish: {\n    label: 'Publish',\n  },\n  view: {\n    label: 'View',\n  },\n  upload: {\n    label: 'Upload files',\n  },\n  viewToggle: {\n    label: 'Switch View to GUI Editor',\n    triggeredLabel: 'Switch View to Raw Editor',\n  },\n};\n","// TODO:\n// -------------------------------\n// import * as da from './da';\n// import * as es from './es';\n// import * as fr from './fr';\n// import * as ptBr from './ptBr';\n// import * as sv from './sv';\n\nimport * as en from './en';\n\nconst translations = en; // TODO: select language\nexport default translations;\n","import fetch from 'isomorphic-fetch';\nimport { addNotification } from '../ducks/notifications';\nimport { BadInputError } from './apiErrors';\n\nimport translations from '../translations';\nconst {\n  getErrorMessage,\n  getFetchErrorMessage,\n  getUpdateErrorMessage,\n  getDeleteErrorMessage,\n} = translations;\n\n/**\n * Fetch wrapper for GET request that dispatches actions according to the\n * request status\n * @param {String} url\n * @param {Object} action_success\n * @param {Object} action_failure\n * @return {Function} dispatch\n */\nexport const get = (url, action_success, action_failure, dispatch) => {\n  return fetch(url, { credentials: 'same-origin' })\n    .then(res => res.json())\n    .then(data =>\n      dispatch({\n        type: action_success.type,\n        [action_success.name]: data,\n      })\n    )\n    .catch(error => {\n      dispatch({\n        type: action_failure.type,\n        [action_failure.name]: error,\n      });\n      dispatch(\n        addNotification(\n          getErrorMessage(),\n          getFetchErrorMessage(action_success.name),\n          'error'\n        )\n      );\n    });\n};\n\n/**\n * Fetch wrapper for PUT request that dispatches actions according to the\n * request status\n * @param {String} url\n * @param {Object} body\n * @param {Object} action_success\n * @param {Object} action_failure\n * @return {Function} dispatch\n */\nexport const put = (url, body, action_success, action_failure, dispatch) => {\n  return fetch(url, {\n    method: 'PUT',\n    credentials: 'same-origin',\n    body,\n  })\n    .then(res => res.json())\n    .then(data => {\n      if (data.error_message) {\n        throw new BadInputError(data.error_message);\n      }\n      dispatch({\n        type: action_success.type,\n        [action_success.name]: data,\n      });\n    })\n    .catch(error => {\n      dispatch({\n        type: action_failure.type,\n        [action_failure.name]: error,\n      });\n      let error_message =\n        error.name === 'BadInputError'\n          ? error.message\n          : getUpdateErrorMessage(action_success.name);\n      dispatch(addNotification(getErrorMessage(), error_message, 'error'));\n    });\n};\n\n/**\n * Fetch wrapper for DELETE request that dispatches actions according to the\n * request status\n * @param {String} url\n * @param {Object} action_success\n * @param {Object} action_failure\n * @return {Function} dispatch\n */\nexport const del = (url, action_success, action_failure, dispatch) => {\n  return fetch(url, {\n    method: 'DELETE',\n    credentials: 'same-origin',\n  })\n    .then(data =>\n      dispatch({\n        type: action_success.type,\n        id: action_success.id,\n      })\n    )\n    .catch(error => {\n      dispatch({\n        type: action_failure.type,\n        [action_failure.name]: error,\n      });\n      dispatch(\n        addNotification(\n          getErrorMessage(),\n          getDeleteErrorMessage(action_success.name),\n          'error'\n        )\n      );\n    });\n};\n","import _ from 'underscore';\n\nconst DATE_FILENAME_MATCHER = /^(?:.+\\/)*(\\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1]))-(.*)(\\.[^.]+)$/;\nconst FILENAME_MATCHER = /^(.*)(\\.[^.]+)$/;\n\nconst validated = (field, single) => {\n  switch (single) {\n    case 'required':\n      return !!field;\n    case 'date':\n      return DATE_FILENAME_MATCHER.test(field);\n    case 'filename':\n      return FILENAME_MATCHER.test(field);\n    default:\n      return false;\n  }\n};\n\n/**\n * Returns error messages if the given values does not pass the provided validations.\n * @param {Object} values\n * @param {Object} validations\n * @param {Object} messages\n * @return {Array} errorMessages\n */\nexport const validator = (values, validations, messages) => {\n  let errorMessages = [];\n  _.each(validations, (validationStr, field, list) => {\n    const validationArr = validationStr.split('|');\n    _.each(validationArr, single => {\n      if (!validated(values[field], single)) {\n        errorMessages.push(messages[`${field}.${single}`]);\n      }\n    });\n  });\n  return errorMessages;\n};\n","// Selectors\nexport const filterBySearchInput = (list, input) => {\n  if (input) {\n    return list.filter(p => p.name.toLowerCase().includes(input.toLowerCase()));\n  }\n  return list;\n};\n\nexport const filterDeleted = (list, id) => {\n  return list.filter(item => item.relative_path !== id);\n};\n\n// Action Types\nexport const SEARCH_CONTENT = 'SEARCH_CONTENT';\nexport const CLEAR_ERRORS = 'CLEAR_ERRORS';\nexport const VALIDATION_ERROR = 'VALIDATION_ERROR';\n\n// Actions\nexport const search = input => ({\n  type: SEARCH_CONTENT,\n  input,\n});\n\nexport const clearErrors = () => ({\n  type: CLEAR_ERRORS,\n});\n\nexport const validationError = errors => ({\n  type: VALIDATION_ERROR,\n  errors,\n});\n\n// Reducer\nexport default function utils(\n  state = {\n    input: '',\n    errors: [],\n  },\n  action\n) {\n  switch (action.type) {\n    case SEARCH_CONTENT:\n      return {\n        ...state,\n        input: action.input,\n      };\n    case CLEAR_ERRORS:\n      return {\n        ...state,\n        errors: [],\n      };\n    case VALIDATION_ERROR:\n      return {\n        ...state,\n        errors: action.errors,\n      };\n    default:\n      return {\n        ...state,\n        input: '',\n      };\n  }\n}\n","import yaml from 'js-yaml';\nimport _ from 'underscore';\n\n/**\n * Converts the object into YAML string.\n * @param {Object} object\n * @return {String} yaml\n */\nexport const toYAML = obj =>\n  !_.isEmpty(obj) ? yaml.safeDump(obj, { indent: 2 }) : '';\n\n/**\n * Converts the YAML string into JS object.\n * @param {String} string\n * @return {Object} obj\n */\nexport const toJSON = yamlString => (yamlString ? yaml.load(yamlString) : {});\n\n/**\n * Capitalize the given string.\n * @param {String} string\n * @return {String} string\n */\nexport const capitalize = string => {\n  if (!string) return '';\n  return string.charAt(0).toUpperCase() + string.substring(1).toLowerCase();\n};\n\n/**\n * Convert the given string into title case format.\n * @param {String} string\n * @return {String} string\n */\nexport const toTitleCase = string => {\n  if (!string) return '';\n  return string.replace(/\\w\\S*/g, txt => {\n    return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();\n  });\n};\n\n/**\n * Slugify the given string\n * @param {String} string\n * @return {String} string\n */\nexport const slugify = string => {\n  if (!string) return '';\n  const a = 'àáäâèéëêìíïîıòóöôùúüûñçşßÿœæŕśńṕẃǵğǹḿǘẍźḧ·/_,:;';\n  const b = 'aaaaeeeeiiiiioooouuuuncssyoarsnpwggnmuxzh------';\n  const p = new RegExp(a.split('').join('|'), 'g');\n\n  return string\n    .toString()\n    .toLowerCase()\n    .replace(/\\s+/g, '-') // Replace spaces with -\n    .replace(p, c => b.charAt(a.indexOf(c))) // Replace special chars\n    .replace(/&/g, '-') // Replace & with 'and'\n    .replace(/[^\\w-]+/g, '') // Remove all non-word chars\n    .replace(/-+/g, '-') // Replace multiple - with single -\n    .replace(/^-+/, '') // Trim - from start of text\n    .replace(/-+$/, ''); // Trim - from end of text\n};\n\n/**\n * Returns filename from the given path\n * @param {String} path\n * @return {String} filename\n */\nexport const getFilenameFromPath = path => {\n  if (!path) return '';\n  return path.substring(path.lastIndexOf('/') + 1);\n};\n\n/**\n * Returns extension from the given path or filename\n * @param {String} path or filename\n * @return {String} extension or nil\n */\nexport const getExtensionFromPath = path => {\n  if (!path) return '';\n  const filename = getFilenameFromPath(path);\n  const index = filename.lastIndexOf('.');\n\n  if (index > 0) {\n    return filename.substring(index + 1);\n  } else {\n    return '';\n  }\n};\n\n/**\n * returns the uploaded static files that are being overwritten\n * @param {Array} uploadedFiles\n * @param {Array} currentFiles\n * @return {Array} filenames\n */\nexport const existingUploadedFilenames = (uploadedFiles, currentFiles) => {\n  if (\n    (uploadedFiles && !uploadedFiles.length) ||\n    (currentFiles && !currentFiles.length)\n  ) {\n    return [];\n  }\n  const currentFilenames = _.map(currentFiles, cf =>\n    getFilenameFromPath(cf.path)\n  );\n  return _.chain(uploadedFiles)\n    .filter(file => currentFilenames.includes(file.name))\n    .map(file => file.name)\n    .value();\n};\n\n/**\n * Given an Event object, prevents the default event\n * from bubbling, if possible.\n * @param {Event} event\n */\nexport const preventDefault = event => {\n  if (event && event.preventDefault) {\n    event.preventDefault();\n  }\n};\n\n/**\n * Given an object, trims every keys and values recursively.\n * @param {Object} object\n * @return {Object} trimmedObject\n */\nexport const trimObject = object => {\n  if (!_.isObject(object)) return object;\n  return _.keys(object).reduce((acc, key) => {\n    if (typeof object[key] === 'string') {\n      try {\n        acc[key.trim()] = JSON.parse(object[key].trim());\n      } catch (e) {\n        acc[key.trim()] = object[key].trim();\n      }\n    } else {\n      acc[key.trim()] = trimObject(object[key]);\n    }\n    return acc;\n  }, Array.isArray(object) ? [] : {});\n};\n\n/**\n * Given a resource type and splat, returns a formatted title string.\n * Falsy values are discarded.\n * @param {String} type - Resource type.\n * @param {String} splat - Directory splat for current resource.\n * @param {String} [prefix=''] - Optional string text to be placed in front.\n * @return {String} Empty string or formatted title.\n */\nexport const getDocumentTitle = (type, splat, prefix = '') => {\n  if (!type) return '';\n  const label = toTitleCase(type.toString());\n  return [prefix, splat, label].filter(Boolean).join(' | ');\n};\n\n/**\n * @param {String} directory - Directory splat for current resource.\n * @param {String} filename - Basename of current resource.\n * @return {String} Filename or directory splat joined to the filename.\n */\nexport const computeRelativePath = (directory, filename) => {\n  return directory ? `${directory}/${filename}` : `${filename}`;\n};\n","import { getConfigurationUrl, putConfigurationUrl } from '../constants/api';\nimport { get, put } from '../utils/fetch';\nimport { validator } from '../utils/validation';\nimport { CLEAR_ERRORS, validationError } from './utils';\nimport { toYAML } from '../utils/helpers';\n\nimport translations from '../translations';\nconst { getContentRequiredMessage } = translations;\n\n// Action Types\nexport const FETCH_CONFIG_REQUEST = 'FETCH_CONFIG_REQUEST';\nexport const FETCH_CONFIG_SUCCESS = 'FETCH_CONFIG_SUCCESS';\nexport const FETCH_CONFIG_FAILURE = 'FETCH_CONFIG_FAILURE';\nexport const PUT_CONFIG_REQUEST = 'PUT_CONFIG_REQUEST';\nexport const PUT_CONFIG_SUCCESS = 'PUT_CONFIG_SUCCESS';\nexport const PUT_CONFIG_FAILURE = 'PUT_CONFIG_FAILURE';\nexport const CONFIG_EDITOR_CHANGED = 'CONFIG_EDITOR_CHANGED';\n\n// Actions\nexport const fetchConfig = () => dispatch => {\n  dispatch({ type: FETCH_CONFIG_REQUEST });\n  return get(\n    getConfigurationUrl(),\n    { type: FETCH_CONFIG_SUCCESS, name: 'config' },\n    { type: FETCH_CONFIG_FAILURE, name: 'error' },\n    dispatch\n  );\n};\n\nexport const putConfig = (config, source = 'editor') => (\n  dispatch,\n  getState\n) => {\n  let payload;\n\n  if (source === 'gui') {\n    config = getState().metadata.metadata;\n    payload = { raw_content: toYAML(config) };\n  } else {\n    payload = { raw_content: config };\n  }\n\n  // handle errors\n  const errors = validateConfig(config);\n  if (errors.length) {\n    return dispatch(validationError(errors));\n  }\n  dispatch({ type: CLEAR_ERRORS });\n\n  return put(\n    putConfigurationUrl(),\n    JSON.stringify(payload),\n    { type: PUT_CONFIG_SUCCESS, name: 'config' },\n    { type: PUT_CONFIG_FAILURE, name: 'error' },\n    dispatch\n  );\n};\n\nconst validateConfig = config =>\n  validator(\n    { config },\n    { config: 'required' },\n    {\n      'config.required': getContentRequiredMessage(),\n    }\n  );\n\nexport const onEditorChange = () => ({\n  type: CONFIG_EDITOR_CHANGED,\n});\n\n// Reducer\nexport default function config(\n  state = {\n    config: {},\n    updated: false,\n    editorChanged: false,\n    fieldChanged: false,\n    isFetching: false,\n  },\n  action\n) {\n  switch (action.type) {\n    case FETCH_CONFIG_REQUEST:\n      return {\n        ...state,\n        isFetching: true,\n      };\n    case FETCH_CONFIG_SUCCESS:\n      return {\n        ...state,\n        config: action.config,\n        isFetching: false,\n      };\n    case FETCH_CONFIG_FAILURE:\n      return {\n        ...state,\n        isFetching: false,\n      };\n    case PUT_CONFIG_SUCCESS:\n      return {\n        ...state,\n        config: action.config,\n        editorChanged: false,\n        updated: true,\n      };\n    case PUT_CONFIG_FAILURE:\n      return {\n        ...state,\n        editorChanged: false,\n      };\n    case CONFIG_EDITOR_CHANGED:\n      return {\n        ...state,\n        editorChanged: true,\n        updated: false,\n      };\n    default:\n      return {\n        ...state,\n        updated: false,\n        editorChanged: false,\n      };\n  }\n}\n","export default {\n  save: 'mod+s',\n};\n","import React from 'react';\n\nconst Splitter = () => <div className=\"splitter\" />;\n\nexport default Splitter;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nexport default function Icon({ name }) {\n  return <i className={`fa fa-${name}`} aria-hidden=\"true\" />;\n}\n\nIcon.propTypes = {\n  name: PropTypes.string.isRequired,\n};\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport Icon from './Icon';\n\nclass Accordion extends Component {\n  state = { collapsed: true };\n\n  handleClick = () => {\n    this.setState(state => {\n      return {\n        collapsed: !state.collapsed,\n      };\n    });\n  };\n\n  renderIndicator() {\n    const { counter, count } = this.props;\n    const { collapsed } = this.state;\n\n    if (collapsed && counter && count) {\n      return <div className=\"counter\">{count}</div>;\n    }\n    return (\n      <div className=\"chevrons\">\n        <Icon name={`chevron-${collapsed ? 'down' : 'up'}`} />\n      </div>\n    );\n  }\n\n  render() {\n    const { icon, label, minHeight, count, children } = this.props;\n    const { collapsed } = this.state;\n    const accordionClasses = classnames('accordion', { collapsed });\n\n    let panelHeight = minHeight;\n    if (!collapsed) {\n      panelHeight = minHeight && count ? (count + 1) * minHeight : 'none';\n    }\n\n    return (\n      <div\n        className={accordionClasses}\n        style={{ maxHeight: panelHeight }}\n        onClick={this.handleClick}\n      >\n        <div className=\"accordion-label\">\n          {icon && <Icon name={icon} />}\n          {label}\n          <div className=\"indicator\">{this.renderIndicator()}</div>\n        </div>\n        {children}\n      </div>\n    );\n  }\n}\n\nAccordion.defaultProps = {\n  minHeight: 50,\n};\n\nAccordion.propTypes = {\n  children: PropTypes.element.isRequired,\n  label: PropTypes.string.isRequired,\n  minHeight: PropTypes.number,\n  count: PropTypes.number,\n  counter: PropTypes.bool,\n  icon: PropTypes.string,\n};\n\nexport default Accordion;\n","import _ from 'underscore';\nimport moment from 'moment';\nimport { CLEAR_ERRORS, validationError, filterDeleted } from './utils';\nimport { get, put, del } from '../utils/fetch';\nimport { validator } from '../utils/validation';\nimport { slugify, trimObject, computeRelativePath } from '../utils/helpers';\nimport {\n  collectionsAPIUrl,\n  collectionAPIUrl,\n  documentAPIUrl,\n} from '../constants/api';\n\nimport translations from '../translations';\nconst {\n  getTitleRequiredMessage,\n  getFilenameRequiredMessage,\n  getFilenameNotValidMessage,\n} = translations;\n\n// Action Types\nexport const FETCH_COLLECTIONS_REQUEST = 'FETCH_COLLECTIONS_REQUEST';\nexport const FETCH_COLLECTIONS_SUCCESS = 'FETCH_COLLECTIONS_SUCCESS';\nexport const FETCH_COLLECTIONS_FAILURE = 'FETCH_COLLECTIONS_FAILURE';\nexport const FETCH_COLLECTION_REQUEST = 'FETCH_COLLECTION_REQUEST';\nexport const FETCH_COLLECTION_SUCCESS = 'FETCH_COLLECTION_SUCCESS';\nexport const FETCH_COLLECTION_FAILURE = 'FETCH_COLLECTION_FAILURE';\nexport const FETCH_DOCUMENT_REQUEST = 'FETCH_DOCUMENT_REQUEST';\nexport const FETCH_DOCUMENT_SUCCESS = 'FETCH_DOCUMENT_SUCCESS';\nexport const FETCH_DOCUMENT_FAILURE = 'FETCH_DOCUMENT_FAILURE';\nexport const PUT_DOCUMENT_REQUEST = 'PUT_DOCUMENT_REQUEST';\nexport const PUT_DOCUMENT_SUCCESS = 'PUT_DOCUMENT_SUCCESS';\nexport const PUT_DOCUMENT_FAILURE = 'PUT_DOCUMENT_FAILURE';\nexport const DELETE_DOCUMENT_REQUEST = 'DELETE_DOCUMENT_REQUEST';\nexport const DELETE_DOCUMENT_SUCCESS = 'DELETE_DOCUMENT_SUCCESS';\nexport const DELETE_DOCUMENT_FAILURE = 'DELETE_DOCUMENT_FAILURE';\n\n// Actions\nexport const fetchCollections = () => dispatch => {\n  dispatch({ type: FETCH_COLLECTIONS_REQUEST });\n  return get(\n    collectionsAPIUrl(),\n    { type: FETCH_COLLECTIONS_SUCCESS, name: 'collections' },\n    { type: FETCH_COLLECTIONS_FAILURE, name: 'error' },\n    dispatch\n  );\n};\n\nexport const fetchCollection = (\n  collection_name,\n  directory = ''\n) => dispatch => {\n  dispatch({ type: FETCH_COLLECTION_REQUEST });\n  return get(\n    collectionAPIUrl(collection_name, directory),\n    { type: FETCH_COLLECTION_SUCCESS, name: 'entries' },\n    { type: FETCH_COLLECTION_FAILURE, name: 'error' },\n    dispatch\n  );\n};\n\nexport const fetchDocument = (\n  collection_name,\n  directory,\n  filename\n) => dispatch => {\n  dispatch({ type: FETCH_DOCUMENT_REQUEST });\n  return get(\n    documentAPIUrl(collection_name, directory, filename),\n    { type: FETCH_DOCUMENT_SUCCESS, name: 'doc' },\n    { type: FETCH_DOCUMENT_FAILURE, name: 'error' },\n    dispatch\n  );\n};\n\nexport const createDocument = (collection, directory) => (\n  dispatch,\n  getState\n) => {\n  // get edited fields from metadata state\n  const metadata = getState().metadata.metadata;\n  let { path, raw_content, title } = metadata;\n  // if path is not given or equals to directory, generate filename from the title\n  if ((!path || `${path}/` === directory) && title) {\n    path = generateFilenameFromTitle(metadata, collection); // override empty path\n  } else {\n    // validate otherwise\n    const errors = validateDocument(metadata, collection);\n    if (errors.length) {\n      return dispatch(validationError(errors));\n    }\n  }\n  // clear errors\n  dispatch({ type: CLEAR_ERRORS });\n  // omit raw_content, path and empty-value keys in metadata state from front_matter\n  const front_matter = _.omit(metadata, (value, key, object) => {\n    return key === 'raw_content' || key === 'path' || value === '';\n  });\n  // send the put request\n  return put(\n    // create or update document according to filename existence\n    documentAPIUrl(collection, directory, path),\n    preparePayload({ raw_content, front_matter }),\n    { type: PUT_DOCUMENT_SUCCESS, name: 'doc' },\n    { type: PUT_DOCUMENT_FAILURE, name: 'error' },\n    dispatch\n  );\n};\n\nexport const putDocument = (collection, directory, filename) => (\n  dispatch,\n  getState\n) => {\n  // get edited fields from metadata state\n  const metadata = getState().metadata.metadata;\n  let { path, raw_content, title } = metadata;\n  // if path is not given or equals to directory, generate filename from the title\n  if ((!path || `${path}/` === directory) && title) {\n    path = generateFilenameFromTitle(metadata, collection); // override empty path\n  } else {\n    // validate otherwise\n    const errors = validateDocument(metadata, collection);\n    if (errors.length) {\n      return dispatch(validationError(errors));\n    }\n  }\n  // clear errors\n  dispatch({ type: CLEAR_ERRORS });\n  // omit raw_content, path and empty-value keys in metadata state from front_matter\n  const front_matter = _.omit(metadata, (value, key, object) => {\n    return key === 'raw_content' || key === 'path' || value === '';\n  });\n  // add collection type prefix to relative path\n  const relative_path = directory\n    ? `_${collection}/${directory}/${path}`\n    : `_${collection}/${path}`;\n  // send the put request\n  return put(\n    // create or update document according to filename existence\n    documentAPIUrl(collection, directory, filename),\n    preparePayload({ path: relative_path, raw_content, front_matter }),\n    { type: PUT_DOCUMENT_SUCCESS, name: 'doc' },\n    { type: PUT_DOCUMENT_FAILURE, name: 'error' },\n    dispatch\n  );\n};\n\nexport const deleteDocument = (collection, directory, filename) => dispatch => {\n  const relative_path = computeRelativePath(directory, filename);\n  return del(\n    documentAPIUrl(collection, directory, filename),\n    { type: DELETE_DOCUMENT_SUCCESS, name: 'doc', id: relative_path },\n    { type: DELETE_DOCUMENT_FAILURE, name: 'error' },\n    dispatch\n  );\n};\n\nconst generateFilenameFromTitle = (metadata, collection) => {\n  if (collection === 'posts') {\n    // if date is provided, use it, otherwise generate it with today's date\n    let date;\n    if (metadata.date) {\n      date = metadata.date.split(' ')[0];\n    } else {\n      date = moment().format('YYYY-MM-DD');\n    }\n    return `${date}-${slugify(metadata.title)}.md`;\n  }\n  return `${slugify(metadata.title)}.md`;\n};\n\nconst validateDocument = (metadata, collection) => {\n  let validations = { title: 'required' }; // base validations\n  // base messages\n  let messages = {\n    'title.required': getTitleRequiredMessage(),\n    'path.required': getFilenameRequiredMessage(),\n  };\n\n  if (collection === 'posts') {\n    validations['path'] = 'required|date';\n    messages['path.date'] = getFilenameNotValidMessage();\n  } else {\n    validations['path'] = 'required|filename';\n    messages['path.filename'] = getFilenameNotValidMessage();\n  }\n  return validator(metadata, validations, messages);\n};\n\nconst preparePayload = obj => JSON.stringify(trimObject(obj));\n\n// Reducer\nexport default function collections(\n  state = {\n    collections: [],\n    entries: [],\n    currentDocument: {},\n    isFetching: false,\n    updated: false,\n  },\n  action\n) {\n  switch (action.type) {\n    case FETCH_COLLECTIONS_REQUEST:\n    case FETCH_COLLECTION_REQUEST:\n    case FETCH_DOCUMENT_REQUEST:\n      return {\n        ...state,\n        isFetching: true,\n      };\n    case FETCH_COLLECTIONS_SUCCESS:\n      return {\n        ...state,\n        collections: action.collections,\n        isFetching: false,\n      };\n    case FETCH_COLLECTION_SUCCESS:\n      return {\n        ...state,\n        entries: action.entries,\n        isFetching: false,\n      };\n    case FETCH_DOCUMENT_SUCCESS:\n      return {\n        ...state,\n        currentDocument: action.doc,\n        isFetching: false,\n      };\n    case FETCH_COLLECTIONS_FAILURE:\n      return {\n        ...state,\n        collections: [],\n        isFetching: false,\n      };\n    case FETCH_COLLECTION_FAILURE:\n      return {\n        ...state,\n        entries: [],\n        isFetching: false,\n      };\n    case FETCH_DOCUMENT_FAILURE:\n      return {\n        ...state,\n        currentDocument: {},\n        isFetching: false,\n      };\n    case PUT_DOCUMENT_SUCCESS:\n      return {\n        ...state,\n        currentDocument: action.doc,\n        updated: true,\n      };\n    case DELETE_DOCUMENT_SUCCESS:\n      return {\n        ...state,\n        entries: filterDeleted(state.entries, action.id),\n      };\n    default:\n      return {\n        ...state,\n        updated: false,\n      };\n  }\n}\n\n// Selectors\nexport const filterBySearchInput = (list, input) => {\n  if (!list) {\n    return [];\n  }\n  if (input) {\n    return _.filter(list, item => {\n      if (item.type) {\n        return item.name.toLowerCase().includes(input.toLowerCase());\n      } else {\n        return item.title.toLowerCase().includes(input.toLowerCase());\n      }\n    });\n  }\n  return list;\n};\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { Link } from 'react-router';\nimport { ADMIN_PREFIX } from '../constants';\nimport Splitter from '../components/Splitter';\nimport Icon from '../components/Icon';\nimport Accordion from '../components/Accordion';\nimport { fetchCollections } from '../ducks/collections';\nimport { capitalize } from '../utils/helpers';\nimport _ from 'underscore';\n\nimport translations from '../translations';\nconst SidebarTranslations = translations.sidebar;\n\nexport class Sidebar extends Component {\n  componentDidMount() {\n    const { fetchCollections } = this.props;\n    fetchCollections();\n  }\n\n  renderCollections(hiddens = []) {\n    const { collections } = this.props;\n\n    if (!collections.length) {\n      return null;\n    }\n\n    const collectionItems = _.map(collections, (col, i) => {\n      if (col.label !== 'posts' && !hiddens.includes(col.label)) {\n        return (\n          <li key={i}>\n            <Link\n              activeClassName=\"active\"\n              to={`${ADMIN_PREFIX}/collections/${col.label}`}\n            >\n              <Icon name=\"book\" />\n              {col.sidebar_label || capitalize(col.label)}\n            </Link>\n          </li>\n        );\n      }\n    }).filter(Boolean);\n\n    const itemsCount = collectionItems.length;\n    if (!itemsCount) {\n      return null;\n    }\n\n    return (\n      <Accordion\n        count={itemsCount}\n        icon=\"briefcase\"\n        label={SidebarTranslations.collections}\n        counter\n      >\n        <ul>{collectionItems}</ul>\n      </Accordion>\n    );\n  }\n\n  render() {\n    const { config } = this.props;\n\n    const defaults = {\n      pages: {\n        icon: 'file-text',\n        link: 'pages',\n        translation: 'pages',\n      },\n      datafiles: {\n        icon: 'database',\n        link: 'datafiles',\n        translation: 'datafiles',\n        splitterBefore: true,\n      },\n      staticfiles: {\n        icon: 'file',\n        link: 'staticfiles',\n        translation: 'staticfiles',\n      },\n      configuration: {\n        icon: 'cog',\n        link: 'configuration',\n        translation: 'configuration',\n        splitterBefore: true,\n      },\n    };\n\n    const defaultLinks = _.keys(defaults);\n    let hiddenLinks;\n\n    try {\n      hiddenLinks = config.jekyll_admin.hidden_links || [];\n    } catch (e) {\n      hiddenLinks = [];\n    }\n\n    const visibleLinks = _.difference(defaultLinks, hiddenLinks);\n\n    const links = [];\n    _.each(visibleLinks, (link, index, list) => {\n      const current = defaults[link];\n      if (current.splitterBefore) {\n        links.push(<Splitter key={'splitter' + index} />);\n      }\n      links.push(\n        <li key={index}>\n          <Link activeClassName=\"active\" to={`${ADMIN_PREFIX}/${current.link}`}>\n            <Icon name={current.icon} />\n            {SidebarTranslations[current.translation]}\n          </Link>\n        </li>\n      );\n    });\n\n    const collectionsPanel = this.renderCollections(hiddenLinks);\n    const postsPanel = !hiddenLinks.includes('posts');\n    const draftsPanel = config && config.show_drafts;\n\n    return (\n      <div className=\"sidebar\">\n        <Link className=\"logo\" to={`${ADMIN_PREFIX}/pages`} />\n        <ul className=\"routes\">\n          {collectionsPanel}\n          {postsPanel && (\n            <li>\n              <Link\n                activeClassName=\"active\"\n                to={`${ADMIN_PREFIX}/collections/posts`}\n              >\n                <Icon name=\"book\" />\n                {SidebarTranslations.posts}\n              </Link>\n            </li>\n          )}\n          {draftsPanel && (\n            <li>\n              <Link activeClassName=\"active\" to={`${ADMIN_PREFIX}/drafts`}>\n                <Icon name=\"edit\" />\n                {SidebarTranslations.drafts}\n              </Link>\n            </li>\n          )}\n          {(collectionsPanel || postsPanel || draftsPanel) && <Splitter />}\n          {links}\n        </ul>\n      </div>\n    );\n  }\n}\n\nSidebar.propTypes = {\n  collections: PropTypes.array.isRequired,\n  fetchCollections: PropTypes.func.isRequired,\n  config: PropTypes.object.isRequired,\n};\n\nconst mapStateToProps = state => ({\n  collections: state.collections.collections,\n});\n\nconst mapDispatchToProps = dispatch =>\n  bindActionCreators(\n    {\n      fetchCollections,\n    },\n    dispatch\n  );\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Sidebar);\n","export const ADMIN_PREFIX = '/admin';\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from 'react-router';\nimport Icon from '../components/Icon';\n\nexport class Header extends Component {\n  render() {\n    const { config } = this.props;\n    return (\n      <div className=\"header\">\n        <h3 className=\"title\">\n          <Link target=\"_blank\" to={config.url || '/'}>\n            <Icon name=\"home\" />\n            <span>{config.title || 'You have no title!'}</span>\n          </Link>\n        </h3>\n        <span className=\"version\">v{process.env.REACT_APP_VERSION}</span>\n      </div>\n    );\n  }\n}\n\nHeader.propTypes = {\n  config: PropTypes.object.isRequired,\n};\n\nexport default Header;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport NotificationSystem from 'react-notification-system';\n\nexport class Notifications extends Component {\n  componentDidMount() {\n    this.notificationSystem = this.refs.notificationSystem;\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const { notification } = nextProps;\n    this.notificationSystem.addNotification({\n      title: notification.title,\n      message: notification.message,\n      level: notification.level,\n      position: 'br',\n      autoDismiss: 10,\n    });\n  }\n\n  elementStyles = {\n    Containers: {\n      DefaultStyle: {\n        padding: 15,\n        width: 360,\n        textAlign: 'center',\n      },\n    },\n    Title: {\n      DefaultStyle: {\n        fontSize: 21,\n        color: '#fff',\n      },\n    },\n    NotificationItem: {\n      DefaultStyle: {\n        margin: 0,\n        padding: '9px 15px 15px',\n        fontSize: 15,\n        borderRadius: 0,\n        transition: '0.5s ease-in-out',\n      },\n      success: {\n        color: '#fff',\n        backgroundColor: '#088217',\n      },\n      error: {\n        color: '#fff',\n        backgroundColor: '#e21414',\n      },\n      warning: {\n        color: '#fff',\n        backgroundColor: '#ebad1a',\n      },\n      info: {\n        color: '#fff',\n        backgroundColor: '#369cc7',\n      },\n    },\n    Dismiss: {\n      DefaultStyle: {\n        top: 7,\n        right: 9,\n        width: 25,\n        height: 25,\n        padding: 4,\n        backgroundColor: 'transparent',\n        border: '2px solid',\n        opacity: '0.84',\n      },\n    },\n  };\n\n  render() {\n    return (\n      <NotificationSystem ref=\"notificationSystem\" style={this.elementStyles} />\n    );\n  }\n}\n\nNotifications.propTypes = {\n  notification: PropTypes.object.isRequired,\n};\n\nconst mapStateToProps = state => ({\n  notification: state.notifications.notification,\n});\n\nexport default connect(mapStateToProps)(Notifications);\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { HotKeys } from 'react-hotkeys';\nimport DocumentTitle from 'react-document-title';\n\nimport { fetchConfig } from '../ducks/config';\nimport keyboardShortcuts from '../constants/keyboardShortcuts';\n\n// Components\nimport Sidebar from './Sidebar';\nimport Header from './Header';\nimport Notifications from './Notifications';\n\nclass App extends Component {\n  componentDidMount() {\n    const { fetchConfig } = this.props;\n    fetchConfig();\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (this.props.updated !== nextProps.updated) {\n      const { fetchConfig } = this.props;\n      fetchConfig();\n    }\n  }\n\n  render() {\n    const { config, isFetching } = this.props;\n\n    if (isFetching) {\n      return null;\n    }\n\n    return (\n      <DocumentTitle title=\"Jekyll Admin\">\n        <HotKeys keyMap={keyboardShortcuts} className=\"wrapper\">\n          {config.content && (\n            <div>\n              <Sidebar config={config.content} />\n              <div className=\"container\">\n                <Header config={config.content} />\n                <div className=\"content\">{this.props.children}</div>\n              </div>\n              <Notifications />\n            </div>\n          )}\n        </HotKeys>\n      </DocumentTitle>\n    );\n  }\n}\n\nApp.propTypes = {\n  children: PropTypes.element,\n  fetchConfig: PropTypes.func.isRequired,\n  config: PropTypes.object.isRequired,\n  isFetching: PropTypes.bool.isRequired,\n  updated: PropTypes.bool,\n};\n\nconst mapStateToProps = state => ({\n  config: state.config.config,\n  updated: state.config.updated,\n  isFetching: state.config.isFetching,\n});\n\nconst mapDispatchToProps = dispatch =>\n  bindActionCreators({ fetchConfig }, dispatch);\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport TextareaAutosize from 'react-textarea-autosize';\n\nexport default function StaticMetaSimple({ fieldValue }) {\n  return (\n    <div className=\"meta-value\">\n      <TextareaAutosize\n        className=\"field value-field\"\n        value={`${fieldValue}`}\n        disabled\n      />\n    </div>\n  );\n}\n\nStaticMetaSimple.propTypes = {\n  fieldValue: PropTypes.any.isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport StaticMetaArray from './StaticMetaArray';\nimport StaticMetaObject from './StaticMetaObject';\nimport StaticMetaSimple from './StaticMetaSimple';\n\nconst FieldTypes = {\n  array: StaticMetaArray,\n  object: StaticMetaObject,\n  simple: StaticMetaSimple,\n};\n\nexport default function StaticMetaObjectItem({ type, fieldKey, fieldValue }) {\n  const CurrentComponent = FieldTypes[type];\n\n  return (\n    <div className=\"object-item-wrap\">\n      <div className={`object-key ${type}`}>\n        <input\n          value={fieldKey}\n          className=\"field key-field\"\n          type=\"text\"\n          disabled\n        />\n      </div>\n      <div className=\"object-value\">\n        <CurrentComponent fieldValue={fieldValue} />\n      </div>\n    </div>\n  );\n}\n\nStaticMetaObjectItem.propTypes = {\n  type: PropTypes.string.isRequired,\n  fieldKey: PropTypes.string.isRequired,\n  fieldValue: PropTypes.any.isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport _ from 'underscore';\nimport StaticMetaObjectItem from './StaticMetaObjectItem';\nimport { computeFieldType } from '../../../utils/metadata';\n\nexport default function StaticMetaObject({ fieldValue }) {\n  const items = _.map(fieldValue, (value, key) => {\n    const type = computeFieldType(value);\n    return (\n      <StaticMetaObjectItem\n        key={key}\n        fieldKey={key}\n        fieldValue={value}\n        type={type}\n      />\n    );\n  });\n\n  return <div className=\"meta-value-object\">{items}</div>;\n}\n\nStaticMetaObject.propTypes = {\n  fieldValue: PropTypes.any.isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport StaticMetaArray from './StaticMetaArray';\nimport StaticMetaObject from './StaticMetaObject';\nimport StaticMetaSimple from './StaticMetaSimple';\n\nconst FieldTypes = {\n  array: StaticMetaArray,\n  object: StaticMetaObject,\n  simple: StaticMetaSimple,\n};\n\nexport default function StaticMetaArrayItem({ type, fieldValue, index }) {\n  const CurrentComponent = FieldTypes[type];\n\n  return (\n    <div className=\"array-item-wrap\">\n      <div className=\"array\">\n        <div className=\"array-header\">\n          <span className=\"array-field-num\">{index + 1}.</span>\n        </div>\n        <CurrentComponent fieldValue={fieldValue} />\n      </div>\n    </div>\n  );\n}\n\nStaticMetaArrayItem.propTypes = {\n  type: PropTypes.string.isRequired,\n  index: PropTypes.number.isRequired,\n  fieldValue: PropTypes.any.isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport StaticMetaArrayItem from './StaticMetaArrayItem';\nimport { computeFieldType } from '../../../utils/metadata';\n\nexport default function StaticMetaArray({ fieldValue }) {\n  const items = fieldValue.map((item, i) => {\n    const type = computeFieldType(item);\n    return (\n      <StaticMetaArrayItem key={i} index={i} fieldValue={item} type={type} />\n    );\n  });\n  return <div className=\"meta-value-array\">{items}</div>;\n}\n\nStaticMetaArray.propTypes = {\n  fieldValue: PropTypes.any.isRequired,\n};\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Icon from '../Icon';\nimport classnames from 'classnames';\n\nexport default class StaticMetaButton extends Component {\n  state = {\n    dropdown: false,\n  };\n\n  toggleDropdownState = () => {\n    this.setState(state => ({ dropdown: !state.dropdown }));\n  };\n\n  render() {\n    const { onEnableField } = this.props;\n\n    const dropdownClasses = classnames('dropdown', {\n      'showing-dropdown': this.state.dropdown,\n    });\n\n    return (\n      <div className=\"meta-buttons\">\n        <span className={dropdownClasses}>\n          <a\n            className=\"meta-button\"\n            tabIndex=\"1\"\n            onClick={this.toggleDropdownState}\n            onBlur={() => this.setState({ dropdown: false })}\n          >\n            <Icon name=\"chevron-down\" />\n          </a>\n          <div className=\"dropdown-wrap\">\n            <span onMouseDown={() => onEnableField()}>\n              <Icon name=\"pencil\" /> Override default\n            </span>\n          </div>\n        </span>\n      </div>\n    );\n  }\n}\n\nStaticMetaButton.propTypes = {\n  onEnableField: PropTypes.func.isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport StaticMetaArray from './StaticMetaArray';\nimport StaticMetaObject from './StaticMetaObject';\nimport StaticMetaSimple from './StaticMetaSimple';\nimport StaticMetaButton from '../StaticMetaButton';\n\nconst FieldTypes = {\n  array: StaticMetaArray,\n  object: StaticMetaObject,\n  simple: StaticMetaSimple,\n};\n\nexport default function StaticMetaField({\n  type,\n  fieldKey,\n  fieldValue,\n  enableField,\n}) {\n  const CurrentComponent = FieldTypes[type];\n\n  return (\n    <div className=\"metafield  default-field\">\n      <div className={`meta-key ${type}`}>\n        <input\n          value={fieldKey}\n          className=\"field key-field\"\n          type=\"text\"\n          disabled\n        />\n        <StaticMetaButton\n          onEnableField={() => {\n            enableField(`metadata['${fieldKey}']`, fieldValue);\n          }}\n        />\n      </div>\n      <CurrentComponent fieldValue={fieldValue} />\n    </div>\n  );\n}\n\nStaticMetaField.propTypes = {\n  type: PropTypes.string.isRequired,\n  fieldKey: PropTypes.string.isRequired,\n  fieldValue: PropTypes.any.isRequired,\n  enableField: PropTypes.func.isRequired,\n};\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { getFilenameFromPath } from '../utils/helpers';\nimport Icon from './Icon';\n\nimport translations from '../translations';\nconst { getDeleteMessage } = translations;\n\nexport default class FilePreview extends Component {\n  handleClickDelete(path) {\n    const { splat, onClickDelete } = this.props;\n    const filename = getFilenameFromPath(path);\n    const confirm = window.confirm(getDeleteMessage(path));\n    confirm && onClickDelete(splat, filename);\n  }\n\n  renderFileOverlay(file, splat) {\n    if (file.from_theme) {\n      return (\n        <span className=\"theme-indicator\" title=\"Theme Asset\">\n          <Icon name=\"diamond\" />\n        </span>\n      );\n    } else if (splat !== 'index') {\n      return (\n        <button\n          onClick={() => this.handleClickDelete(file.relative_path)}\n          className=\"delete\"\n          title=\"Delete file\"\n        >\n          x\n        </button>\n      );\n    }\n  }\n\n  get isImageFile() {\n    const {\n      file: { type, extname },\n    } = this.props;\n    if (type === 'directory') {\n      return false;\n    }\n\n    return /png|jpg|gif|jpeg|svg|ico/i.test(extname.substring(1));\n  }\n\n  render() {\n    const { onClick, file, splat } = this.props;\n    const node = this.isImageFile ? (\n      <img src={file.http_url} alt={file.relative_path} />\n    ) : (\n      <div>\n        <Icon name=\"file-text-o\" />\n      </div>\n    );\n\n    const nodeLink = onClick ? (\n      <a onClick={() => onClick(file.relative_path)}>{node}</a>\n    ) : (\n      <a href={file.http_url} target=\"_blank\" rel=\"noopener noreferrer\">\n        {node}\n      </a>\n    );\n\n    const filename = splat === 'index' ? file.relative_path : file.name;\n\n    return (\n      <div className=\"file-preview\">\n        {this.renderFileOverlay(file, splat)}\n        {nodeLink}\n        <span className=\"filename\">{filename}</span>\n      </div>\n    );\n  }\n}\n\nFilePreview.propTypes = {\n  file: PropTypes.object.isRequired,\n  splat: PropTypes.string.isRequired,\n  onClickDelete: PropTypes.func,\n  onClick: PropTypes.func,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from 'react-router';\nimport { toTitleCase } from '../utils/helpers';\nimport { ADMIN_PREFIX } from '../constants';\n\nexport default function Breadcrumbs({ type, splat = '' }) {\n  const nonCollectionTypes = ['pages', 'datafiles', 'drafts', 'staticfiles'];\n  const base = nonCollectionTypes.includes(type)\n    ? `${ADMIN_PREFIX}/${type}`\n    : `${ADMIN_PREFIX}/collections/${type}`;\n\n  let label = type;\n  if (type === 'datafiles') {\n    label = 'data files';\n  } else if (type === 'staticfiles') {\n    label = 'static files';\n  }\n\n  let nodes = [];\n  if (splat) {\n    const paths = splat.split('/');\n    nodes = paths.map((path, i) => {\n      const before = i === 0 ? '' : paths.slice(0, i).join('/') + '/';\n      return (\n        <li key={i}>\n          <Link to={`${base}/${before}${path}`}>{path}</Link>\n        </li>\n      );\n    });\n  }\n\n  return (\n    <ul className=\"breadcrumbs\">\n      <li>\n        <Link to={base}>{toTitleCase(label)}</Link>\n      </li>\n      {nodes}\n    </ul>\n  );\n}\n\nBreadcrumbs.propTypes = {\n  type: PropTypes.string.isRequired,\n  splat: PropTypes.string,\n};\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nexport default class InputSearch extends Component {\n  handleKeyPress = event => {\n    const { search } = this.props;\n    search(event.target.value);\n  };\n\n  render() {\n    const { searchBy } = this.props;\n    return (\n      <input\n        onKeyPress={this.handleKeyPress}\n        type=\"text\"\n        className=\"field\"\n        placeholder={`Search by ${searchBy}`}\n      />\n    );\n  }\n}\n\nInputSearch.propTypes = {\n  search: PropTypes.func.isRequired,\n  searchBy: PropTypes.string.isRequired,\n};\n","import _ from 'underscore';\nimport { filterDeleted } from './utils';\nimport { get, del } from '../utils/fetch';\nimport { computeRelativePath } from '../utils/helpers';\nimport { addNotification } from './notifications';\nimport { staticfilesAPIUrl, staticfileAPIUrl } from '../constants/api';\n\nimport translations from '../translations';\nconst {\n  getSuccessMessage,\n  getErrorMessage,\n  getUploadSuccessMessage,\n  getUploadErrorMessage,\n} = translations;\n\n// Action Types\nexport const FETCH_STATICFILES_REQUEST = 'FETCH_STATICFILES_REQUEST';\nexport const FETCH_STATICFILES_SUCCESS = 'FETCH_STATICFILES_SUCCESS';\nexport const FETCH_STATICFILES_FAILURE = 'FETCH_STATICFILES_FAILURE';\nexport const FETCH_STATICFILE_REQUEST = 'FETCH_STATICFILE_REQUEST';\nexport const FETCH_STATICFILE_SUCCESS = 'FETCH_STATICFILE_SUCCESS';\nexport const FETCH_STATICFILE_FAILURE = 'FETCH_STATICFILE_FAILURE';\nexport const PUT_STATICFILE_REQUEST = 'PUT_STATICFILE_REQUEST';\nexport const PUT_STATICFILE_SUCCESS = 'PUT_STATICFILE_SUCCESS';\nexport const PUT_STATICFILE_FAILURE = 'PUT_STATICFILE_FAILURE';\nexport const DELETE_STATICFILE_REQUEST = 'DELETE_STATICFILE_REQUEST';\nexport const DELETE_STATICFILE_SUCCESS = 'DELETE_STATICFILE_SUCCESS';\nexport const DELETE_STATICFILE_FAILURE = 'DELETE_STATICFILE_FAILURE';\n\n// Actions\nexport const fetchStaticFiles = (directory = '') => dispatch => {\n  dispatch({ type: FETCH_STATICFILES_REQUEST });\n  return get(\n    staticfilesAPIUrl(directory),\n    { type: FETCH_STATICFILES_SUCCESS, name: 'files' },\n    { type: FETCH_STATICFILES_FAILURE, name: 'error' },\n    dispatch\n  );\n};\n\nexport const uploadStaticFiles = (directory, files) => dispatch => {\n  _.each(files, file => {\n    const reader = new FileReader();\n    reader.readAsDataURL(file);\n    reader.onloadend = () => {\n      const payload = JSON.stringify({\n        encoded_content: reader.result.split('base64,')[1],\n      });\n      // send the put request\n      return fetch(staticfileAPIUrl(directory, file.name), {\n        method: 'PUT',\n        body: payload,\n        credentials: 'same-origin',\n      })\n        .then(data => {\n          dispatch({ type: PUT_STATICFILE_SUCCESS });\n          dispatch(fetchStaticFiles(directory));\n          dispatch(\n            addNotification(\n              getSuccessMessage(),\n              getUploadSuccessMessage(file.name),\n              'success'\n            )\n          );\n        })\n        .catch(error => {\n          dispatch({\n            type: PUT_STATICFILE_FAILURE,\n            error,\n          });\n          dispatch(\n            addNotification(getErrorMessage(), getUploadErrorMessage(), 'error')\n          );\n        });\n    };\n  });\n};\n\nexport const deleteStaticFile = (directory, filename) => dispatch => {\n  const relative_path = computeRelativePath(directory, filename);\n  return del(\n    staticfileAPIUrl(directory, filename),\n    { type: DELETE_STATICFILE_SUCCESS, name: 'file', id: relative_path },\n    { type: DELETE_STATICFILE_FAILURE, name: 'error' },\n    dispatch\n  );\n};\n\n// Reducer\nexport default function staticfiles(\n  state = {\n    files: [],\n    isFetching: false,\n    uploading: false, // TODO show loading gif\n  },\n  action\n) {\n  switch (action.type) {\n    case FETCH_STATICFILES_REQUEST:\n      return {\n        ...state,\n        isFetching: true,\n      };\n    case FETCH_STATICFILES_SUCCESS:\n      return {\n        ...state,\n        files: action.files,\n        isFetching: false,\n      };\n    case FETCH_STATICFILES_FAILURE:\n      return {\n        ...state,\n        isFetching: false,\n      };\n    case PUT_STATICFILE_REQUEST:\n      return {\n        ...state,\n        uploading: true,\n      };\n    case PUT_STATICFILE_SUCCESS:\n      return {\n        ...state,\n        uploading: false,\n      };\n    case PUT_STATICFILE_FAILURE:\n      return {\n        ...state,\n        uploading: false,\n      };\n    case DELETE_STATICFILE_SUCCESS:\n      return {\n        ...state,\n        files: filterDeleted(state.files, action.id),\n      };\n    default:\n      return state;\n  }\n}\n\n// Selectors\nexport const filterByFilename = (staticfiles, input) => {\n  if (input) {\n    return staticfiles.filter(sf =>\n      sf.path.toLowerCase().includes(input.toLowerCase())\n    );\n  }\n  return staticfiles;\n};\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from 'react-router';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport DocumentTitle from 'react-document-title';\nimport Icon from '../../components/Icon';\nimport FilePreview from '../../components/FilePreview';\nimport Breadcrumbs from '../../components/Breadcrumbs';\nimport InputSearch from '../../components/form/InputSearch';\nimport { search } from '../../ducks/utils';\nimport { fetchStaticFiles, filterByFilename } from '../../ducks/staticfiles';\nimport { ADMIN_PREFIX } from '../../constants';\n\nexport class StaticIndex extends Component {\n  componentDidMount() {\n    const { fetchStaticFiles } = this.props;\n    fetchStaticFiles('index');\n  }\n\n  renderDirectoryListingBtn() {\n    const to = `${ADMIN_PREFIX}/staticfiles`;\n\n    return (\n      <div className=\"page-buttons\">\n        <Link className=\"btn btn-view\" to={to}>\n          Directory Listing\n        </Link>\n      </div>\n    );\n  }\n\n  renderPreviewNode() {\n    const { files, onClickStaticFile } = this.props;\n\n    if (files.length) {\n      return (\n        <div className=\"preview-container\">\n          {files.map((file, i) => {\n            return (\n              <FilePreview\n                key={i}\n                onClick={onClickStaticFile}\n                splat=\"index\"\n                file={file}\n              />\n            );\n          })}\n        </div>\n      );\n    } else {\n      return (\n        <div className=\"preview-info\">\n          <Icon name=\"exclamation-triangle\" />\n          <h2>No files found!</h2>\n          <h4>\n            Upload files at 'Directory Listing' to have them displayed here.\n          </h4>\n        </div>\n      );\n    }\n  }\n\n  render() {\n    const { isFetching, search, modalView } = this.props;\n\n    if (isFetching) {\n      return null;\n    }\n\n    return (\n      <DocumentTitle title=\"Static File Listing\">\n        <div>\n          <div className=\"content-header\">\n            <Breadcrumbs type=\"staticfiles\" />\n            {!modalView && this.renderDirectoryListingBtn()}\n            <div className=\"pull-right\">\n              <InputSearch searchBy=\"filename\" search={search} />\n            </div>\n          </div>\n          <div className=\"static-list\">{this.renderPreviewNode()}</div>\n        </div>\n      </DocumentTitle>\n    );\n  }\n}\n\nStaticIndex.propTypes = {\n  files: PropTypes.array.isRequired,\n  isFetching: PropTypes.bool.isRequired,\n  fetchStaticFiles: PropTypes.func.isRequired,\n  search: PropTypes.func.isRequired,\n  onClickStaticFile: PropTypes.func,\n  modalView: PropTypes.bool,\n};\n\nconst mapStateToProps = state => ({\n  files: filterByFilename(state.staticfiles.files, state.utils.input),\n  isFetching: state.staticfiles.isFetching,\n});\n\nconst mapDispatchToProps = dispatch =>\n  bindActionCreators(\n    {\n      fetchStaticFiles,\n      search,\n    },\n    dispatch\n  );\n\nexport default connect(mapStateToProps, mapDispatchToProps)(StaticIndex);\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Modal from 'react-modal';\nimport StaticIndex from '../containers/views/StaticIndex';\nimport Icon from './Icon';\n\nexport default class FilePicker extends Component {\n  state = {\n    showModal: false,\n  };\n\n  customStyles = {\n    overlay: {\n      backgroundColor: 'rgba(0,0,0,0.6)',\n      zIndex: 10,\n    },\n    content: {\n      margin: 20,\n      paddingTop: 0,\n      paddingRight: 10,\n      paddingLeft: 15,\n    },\n  };\n\n  openModal = () => this.setState({ showModal: true });\n  shutModal = () => this.setState({ showModal: false });\n\n  onPickItem = path => {\n    this.props.onPick(path);\n    this.shutModal();\n  };\n\n  render() {\n    return (\n      <span className=\"images-wrapper\">\n        <button onClick={this.openModal} ref=\"trigger\">\n          <Icon name=\"picture-o\" />\n        </button>\n        <Modal\n          isOpen={this.state.showModal}\n          contentLabel=\"FilePicker\"\n          onRequestClose={this.shutModal}\n          style={this.customStyles}\n        >\n          <div className=\"content\">\n            <StaticIndex onClickStaticFile={this.onPickItem} modalView />\n          </div>\n        </Modal>\n      </span>\n    );\n  }\n}\n\nFilePicker.propTypes = {\n  onPick: PropTypes.func.isRequired,\n};\n","import React, { Component, PropTypes } from 'react';\nimport TextareaAutosize from 'react-textarea-autosize';\nimport classnames from 'classnames';\n\nimport translations from '../../translations';\nconst { getDeleteMessage } = translations;\n\nexport default class MetaTags extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      tagInput: '',\n      pageTags: props.fieldValue || [],\n      autoSuggest: false,\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const { fieldValue } = nextProps;\n    this.setState({ pageTags: fieldValue || [] });\n  }\n\n  componentDidUpdate() {\n    const { nameAttr, updateFieldValue } = this.props;\n    updateFieldValue(nameAttr, this.state.pageTags);\n  }\n\n  createTag(value) {\n    const { pageTags } = this.state;\n    const clone = [...pageTags];\n\n    // create tags only if they do not exist already\n    if (!clone.includes(value)) {\n      clone.push(value);\n\n      this.setState(state => {\n        return {\n          pageTags: clone,\n          tagInput: '',\n          autoSuggest: false,\n        };\n      });\n    }\n  }\n\n  deleteTag(index) {\n    const { pageTags } = this.state;\n    const clone = [...pageTags];\n\n    const tagName = index === -1 ? clone.slice(-1).pop() : clone[index];\n    const confirm = window.confirm(getDeleteMessage(`tag: ${tagName}`));\n\n    if (confirm) {\n      clone.splice(index, 1);\n      this.setState({ pageTags: clone });\n      this.refs.taginput.focus();\n    }\n  }\n\n  // keys that when pressed and released creates a new tag from the input value.\n  creators = [',', ' ', 'Enter'];\n\n  handleKeyUp = e => {\n    const { pageTags } = this.state;\n    const input = e.target.value;\n\n    if (input.length && this.creators.includes(e.key)) {\n      this.createTag(input);\n    } else if (pageTags.length && input.length === 0 && e.key === 'Backspace') {\n      this.deleteTag(-1);\n    }\n  };\n\n  handleOnChange = e => {\n    const value = e.target.value;\n    this.setState(state => {\n      return { tagInput: value };\n    });\n  };\n\n  showSuggestions = () => {\n    this.setState(state => {\n      return { autoSuggest: true };\n    });\n  };\n\n  closeSuggestions = () => {\n    this.setState(state => {\n      return { autoSuggest: false };\n    });\n  };\n\n  rectifyTag = tag => {\n    const rectified = tag.toString().split(' ');\n    this.setState(state => {\n      return { pageTags: rectified };\n    });\n  };\n\n  render() {\n    const { pageTags } = this.state;\n    const tagInput = `${this.state.tagInput}`;\n\n    const suggestions = this.props.suggestions.filter(entry => {\n      return entry.startsWith(tagInput);\n    });\n\n    if (!(pageTags instanceof Array)) {\n      return (\n        <span className=\"meta-error\">\n          Expected an array of items. Found: <strong>{pageTags}</strong>\n          <br />\n          <span onClick={() => this.rectifyTag(pageTags)}>Click here</span>\n          to correct.\n        </span>\n      );\n    }\n\n    const tagPool = pageTags.filter(Boolean); // filter out nil or empty elements\n    const tags = tagPool.map((tag, i) => {\n      return (\n        <span key={i} className=\"tag\">\n          {tag}\n          <span className=\"delete-tag\" onClick={() => this.deleteTag(i)} />\n        </span>\n      );\n    });\n\n    const suggests = suggestions.map((item, i) => {\n      if (!pageTags.includes(item)) {\n        return (\n          <li key={i} onClick={() => this.createTag(item)}>\n            {item}\n          </li>\n        );\n      }\n      return null;\n    }).filter(Boolean);\n\n    const suggestionClasses = classnames('tag-suggestions', {\n      visible: this.state.autoSuggest,\n    });\n\n    return (\n      <div className=\"tags-wrap field value-field\">\n        {tags.length > 0 && <div className=\"tags-list\">{tags}</div>}\n\n        <div className=\"tags-input\">\n          <input\n            type=\"text\"\n            onChange={this.handleOnChange}\n            onFocus={this.showSuggestions}\n            onKeyUp={this.handleKeyUp}\n            value={tagInput.replace(/,|\\s+/, '')}\n            ref=\"taginput\"\n          />\n\n          <TextareaAutosize\n            className=\"field value-field\"\n            value={this.state.pageTags.toString()}\n            hidden\n          />\n        </div>\n        {suggests.length > 0 && (\n          <div className={suggestionClasses}>\n            <ul>{suggests}</ul>\n            <div className=\"close-suggestions\" onClick={this.closeSuggestions}>\n              Close suggestions\n            </div>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nMetaTags.defaultProps = {\n  fieldValue: [],\n  suggestions: [],\n};\n\nMetaTags.propTypes = {\n  updateFieldValue: PropTypes.func.isRequired,\n  nameAttr: PropTypes.any.isRequired,\n  suggestions: PropTypes.array,\n  fieldValue: PropTypes.any,\n};\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport TextareaAutosize from 'react-textarea-autosize';\nimport DateTimePicker from 'react-widgets/lib/DateTimePicker';\nimport DropdownList from 'react-widgets/lib/DropdownList';\nimport moment from 'moment';\nimport momentLocalizer from 'react-widgets-moment';\nimport FilePicker from '../FilePicker';\nimport MetaTags from './MetaTags';\nimport 'react-widgets/dist/css/react-widgets.css';\n\nmomentLocalizer(moment);\n\nexport class MetaSimple extends Component {\n  handleEditableChange = e => {\n    const { nameAttr, updateFieldValue } = this.props;\n    updateFieldValue(nameAttr, e.target.value);\n  };\n\n  handleDatepickerChange = (date, dateStr) => {\n    const { nameAttr, updateFieldValue } = this.props;\n    let formatted = moment(date).format('YYYY-MM-DD HH:mm:ss');\n    updateFieldValue(nameAttr, formatted);\n  };\n\n  handleEditableBlur = e => {\n    const { nameAttr, updateFieldValue } = this.props;\n    updateFieldValue(nameAttr, e.target.value.trim());\n  };\n\n  renderEditable() {\n    const { fieldValue } = this.props;\n    return (\n      <TextareaAutosize\n        onChange={this.handleEditableChange}\n        onBlur={this.handleEditableBlur}\n        className=\"field value-field\"\n        value={`${fieldValue}`}\n      />\n    );\n  }\n\n  renderDatepicker() {\n    const { fieldValue } = this.props;\n    let dateValue = new Date(fieldValue);\n    if (`${dateValue}` === 'Invalid Date') dateValue = null;\n    return (\n      <DateTimePicker\n        onChange={this.handleDatepickerChange}\n        className=\"date-field\"\n        value={dateValue}\n      />\n    );\n  }\n\n  onPickItem = path => {\n    const { nameAttr, updateFieldValue } = this.props;\n    this.refs.imagepicker.value = path;\n    updateFieldValue(nameAttr, path);\n  };\n\n  renderStaticFilePicker() {\n    const { fieldValue } = this.props;\n    return (\n      <div className=\"imagepicker\">\n        <TextareaAutosize\n          onChange={this.handleEditableChange}\n          className=\"field value-field\"\n          value={fieldValue}\n          ref=\"imagepicker\"\n        />\n        <FilePicker onPick={this.onPickItem} />\n      </div>\n    );\n  }\n\n  handleLayoutChange = value => {\n    const { nameAttr, updateFieldValue } = this.props;\n    updateFieldValue(nameAttr, value);\n  };\n\n  renderLayoutPicker() {\n    const { fieldValue, siteMeta } = this.props;\n\n    if (!siteMeta) return this.renderEditable();\n    const layouts = siteMeta.layouts || [];\n\n    return (\n      <DropdownList\n        className=\"layout-field\"\n        data={['none', ...layouts]}\n        defaultValue={fieldValue}\n        onChange={this.handleLayoutChange}\n      />\n    );\n  }\n\n  renderTagsInput(key) {\n    const { fieldValue, nameAttr, updateFieldValue, siteMeta } = this.props;\n    const suggestions = (siteMeta && siteMeta[key]) || [];\n\n    return (\n      <MetaTags\n        fieldValue={fieldValue}\n        nameAttr={nameAttr}\n        updateFieldValue={updateFieldValue}\n        suggestions={suggestions}\n      />\n    );\n  }\n\n  render() {\n    const { fieldKey, nameAttr } = this.props;\n\n    let node;\n    switch (fieldKey) {\n      case 'date':\n        node = this.renderDatepicker();\n        break;\n      case 'image':\n      case 'file':\n        node = this.renderStaticFilePicker();\n        break;\n      case 'tags':\n      case 'categories':\n        node = this.renderTagsInput(fieldKey);\n        break;\n      default:\n        node = this.renderEditable();\n    }\n\n    if (nameAttr === \"metadata['layout']\") {\n      node = this.renderLayoutPicker();\n    }\n\n    return <div className=\"meta-value\">{node}</div>;\n  }\n}\n\nMetaSimple.propTypes = {\n  parentType: PropTypes.string.isRequired,\n  fieldKey: PropTypes.string.isRequired,\n  fieldValue: PropTypes.any,\n  updateFieldValue: PropTypes.func.isRequired,\n  nameAttr: PropTypes.any.isRequired,\n  siteMeta: PropTypes.object,\n};\n\nexport default MetaSimple;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport Icon from '../Icon';\n\nexport default class MetaButtons extends Component {\n  state = {\n    dropdown: false,\n  };\n\n  fieldTypes = {\n    simple: {\n      icon: 'pencil',\n      label: 'Simple',\n    },\n    array: {\n      icon: 'list-ol',\n      label: 'List',\n    },\n    object: {\n      icon: 'th-large',\n      label: 'Object',\n    },\n  };\n\n  fieldTypeKeys = Object.keys(this.fieldTypes);\n\n  toggleDropdownState = () => {\n    this.setState(state => {\n      return { dropdown: !state.dropdown };\n    });\n  };\n\n  renderDropdownItems(type) {\n    const { onConvertClick, parentKey } = this.props;\n\n    if (parentKey === 'tags') return null;\n\n    return this.fieldTypeKeys\n      .map((ftype, i) => {\n        if (type !== ftype) {\n          const { icon, label } = this.fieldTypes[ftype];\n          return (\n            <span key={i} onMouseDown={() => onConvertClick(ftype)}>\n              <Icon name={icon} />\n              Convert to {label}\n            </span>\n          );\n        }\n\n        return null;\n      })\n      .filter(Boolean);\n  }\n\n  render() {\n    const {\n      currentType,\n      parentType,\n      onRemoveClick,\n      isDefaultField,\n    } = this.props;\n    const sortableHandle = (\n      <span className=\"move\">\n        <Icon name=\"arrows\" />\n      </span>\n    );\n\n    const dropdownClasses = classnames('dropdown', {\n      'showing-dropdown': this.state.dropdown,\n    });\n\n    return (\n      <div className=\"meta-buttons\">\n        {parentType === 'array' && sortableHandle}\n        <span className={dropdownClasses}>\n          <a\n            className=\"meta-button\"\n            tabIndex=\"1\"\n            onClick={this.toggleDropdownState}\n            onBlur={() => this.setState({ dropdown: false })}\n          >\n            <Icon name=\"chevron-down\" />\n          </a>\n          <div className=\"dropdown-wrap\">\n            {this.renderDropdownItems(currentType)}\n            <span onMouseDown={() => onRemoveClick()} className=\"remove-field\">\n              <Icon name={isDefaultField ? 'undo' : 'trash-o'} />\n              {isDefaultField ? 'Revert to default' : 'Remove field'}\n            </span>\n          </div>\n        </span>\n      </div>\n    );\n  }\n}\n\nMetaButtons.propTypes = {\n  currentType: PropTypes.string.isRequired,\n  parentType: PropTypes.string.isRequired,\n  onConvertClick: PropTypes.func.isRequired,\n  onRemoveClick: PropTypes.func.isRequired,\n  parentKey: PropTypes.string,\n  isDefaultField: PropTypes.bool,\n};\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { findDOMNode } from 'react-dom';\nimport MetaArray from './MetaArray';\nimport MetaObject from './MetaObject';\nimport MetaSimple from './MetaSimple';\nimport MetaButtons from './MetaButtons';\n\nexport class MetaObjectItem extends Component {\n  handleConvertClick(type) {\n    const { convertField, nameAttr } = this.props;\n    convertField(nameAttr, type);\n  }\n\n  handleKeyBlur() {\n    const { namePrefix, fieldKey, updateFieldKey } = this.props;\n    let currentValue = findDOMNode(this.refs.field_key).value;\n    if (fieldKey !== currentValue && currentValue !== '') {\n      updateFieldKey(namePrefix, fieldKey, currentValue);\n    }\n  }\n\n  handleRemoveClick() {\n    const { removeField, namePrefix, fieldKey } = this.props;\n    removeField(namePrefix, fieldKey);\n  }\n\n  render() {\n    const {\n      type,\n      fieldKey,\n      fieldValue,\n      nameAttr,\n      addField,\n      removeField,\n      updateFieldKey,\n      updateFieldValue,\n      convertField,\n      key_prefix,\n      moveArrayItem,\n    } = this.props;\n    const FieldTypes = {\n      array: MetaArray,\n      object: MetaObject,\n      simple: MetaSimple,\n    };\n    const CurrentComponent = FieldTypes[type];\n    return (\n      <div ref=\"wrap\" className=\"object-item-wrap\">\n        <div className={`object-key ${type}`}>\n          <input\n            ref=\"field_key\"\n            onBlur={e => this.handleKeyBlur(e)}\n            defaultValue={fieldKey}\n            className=\"field key-field\"\n            type=\"text\"\n            placeholder=\"Key\"\n          />\n          <MetaButtons\n            currentType={type}\n            parentType=\"object\"\n            onConvertClick={type => this.handleConvertClick(type)}\n            onRemoveClick={() => this.handleRemoveClick()}\n          />\n        </div>\n        <div className=\"object-value\">\n          <CurrentComponent\n            key_prefix={key_prefix}\n            parentType=\"object\"\n            fieldKey={fieldKey}\n            fieldValue={fieldValue}\n            addField={addField}\n            removeField={removeField}\n            updateFieldKey={updateFieldKey}\n            updateFieldValue={updateFieldValue}\n            moveArrayItem={moveArrayItem}\n            convertField={convertField}\n            nameAttr={nameAttr}\n            namePrefix={nameAttr}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n\nMetaObjectItem.propTypes = {\n  type: PropTypes.string.isRequired,\n  fieldKey: PropTypes.string.isRequired,\n  fieldValue: PropTypes.any.isRequired,\n  nameAttr: PropTypes.string.isRequired,\n  namePrefix: PropTypes.string.isRequired,\n  addField: PropTypes.func.isRequired,\n  removeField: PropTypes.func.isRequired,\n  convertField: PropTypes.func.isRequired,\n  updateFieldKey: PropTypes.func.isRequired,\n  updateFieldValue: PropTypes.func.isRequired,\n  moveArrayItem: PropTypes.func.isRequired,\n  key_prefix: PropTypes.string.isRequired,\n};\nexport default MetaObjectItem;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport _ from 'underscore';\nimport MetaObjectItem from './MetaObjectItem';\nimport { computeFieldType } from '../../utils/metadata';\n\nexport class MetaObject extends Component {\n  render() {\n    const {\n      fieldKey,\n      fieldValue,\n      namePrefix,\n      addField,\n      removeField,\n      updateFieldKey,\n      updateFieldValue,\n      convertField,\n      key_prefix,\n      moveArrayItem,\n    } = this.props;\n    const items = _.map(fieldValue, (value, key) => {\n      const type = computeFieldType(value, key);\n      return (\n        <MetaObjectItem\n          key={key}\n          key_prefix={key_prefix}\n          fieldKey={key}\n          fieldValue={value}\n          type={type}\n          addField={addField}\n          removeField={removeField}\n          updateFieldKey={updateFieldKey}\n          updateFieldValue={updateFieldValue}\n          moveArrayItem={moveArrayItem}\n          convertField={convertField}\n          nameAttr={`${namePrefix}['${key}']`}\n          namePrefix={namePrefix}\n        />\n      );\n    });\n    return (\n      <div className=\"meta-value-object\">\n        {items}\n        <a\n          onClick={() => addField(namePrefix)}\n          className=\"add-field-object\"\n          title=\"Add new key/value pair\"\n        >\n          New key/value pair under <strong>{fieldKey}</strong>\n        </a>\n      </div>\n    );\n  }\n}\n\nMetaObject.propTypes = {\n  fieldKey: PropTypes.string.isRequired,\n  fieldValue: PropTypes.any.isRequired,\n  nameAttr: PropTypes.string.isRequired,\n  namePrefix: PropTypes.string.isRequired,\n  addField: PropTypes.func.isRequired,\n  removeField: PropTypes.func.isRequired,\n  convertField: PropTypes.func.isRequired,\n  updateFieldKey: PropTypes.func.isRequired,\n  updateFieldValue: PropTypes.func.isRequired,\n  moveArrayItem: PropTypes.func.isRequired,\n  key_prefix: PropTypes.string.isRequired,\n};\n\nexport default MetaObject;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport MetaArray from './MetaArray';\nimport MetaObject from './MetaObject';\nimport MetaSimple from './MetaSimple';\nimport MetaButtons from './MetaButtons';\n\nexport class MetaArrayItem extends Component {\n  handleConvertClick(type) {\n    const { convertField, nameAttr } = this.props;\n    convertField(nameAttr, type);\n  }\n\n  handleRemoveClick() {\n    const { removeField, namePrefix, index } = this.props;\n    removeField(namePrefix, index);\n  }\n\n  render() {\n    const {\n      type,\n      fieldKey,\n      fieldValue,\n      index,\n      nameAttr,\n      addField,\n      removeField,\n      updateFieldKey,\n      updateFieldValue,\n      moveArrayItem,\n      convertField,\n      key_prefix,\n    } = this.props;\n    const FieldTypes = {\n      array: MetaArray,\n      object: MetaObject,\n      simple: MetaSimple,\n    };\n    const CurrentComponent = FieldTypes[type];\n    return (\n      <div ref=\"wrap\" data-id={index} className=\"array-item-wrap\">\n        <div className=\"array\">\n          <div className=\"array-header\">\n            <span className=\"array-field-num\">{index + 1}.</span>\n            <MetaButtons\n              currentType={type}\n              parentType=\"array\"\n              onConvertClick={type => this.handleConvertClick(type)}\n              onRemoveClick={() => this.handleRemoveClick()}\n            />\n          </div>\n          <CurrentComponent\n            key_prefix={key_prefix}\n            parentType=\"array\"\n            fieldKey={fieldKey}\n            fieldValue={fieldValue}\n            addField={addField}\n            removeField={removeField}\n            updateFieldKey={updateFieldKey}\n            updateFieldValue={updateFieldValue}\n            moveArrayItem={moveArrayItem}\n            convertField={convertField}\n            nameAttr={nameAttr}\n            namePrefix={nameAttr}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n\nMetaArrayItem.propTypes = {\n  type: PropTypes.string.isRequired,\n  index: PropTypes.number.isRequired,\n  fieldKey: PropTypes.string.isRequired,\n  fieldValue: PropTypes.any.isRequired,\n  addField: PropTypes.func.isRequired,\n  removeField: PropTypes.func.isRequired,\n  updateFieldKey: PropTypes.func.isRequired,\n  updateFieldValue: PropTypes.func.isRequired,\n  moveArrayItem: PropTypes.func.isRequired,\n  convertField: PropTypes.func.isRequired,\n  nameAttr: PropTypes.string.isRequired,\n  namePrefix: PropTypes.string.isRequired,\n  key_prefix: PropTypes.string.isRequired,\n};\n\nexport default MetaArrayItem;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Sortable from 'sortablejs';\nimport Icon from '../Icon';\nimport MetaArrayItem from './MetaArrayItem';\nimport { computeFieldType } from '../../utils/metadata';\n\nexport class MetaArray extends Component {\n  sortableGroupDecorator(component) {\n    const { moveArrayItem, namePrefix } = this.props;\n    if (component) {\n      const options = {\n        draggable: '.array-item-wrap',\n        group: { name: 'meta-array-items', pull: false, put: false },\n        handle: '.move',\n        animation: 0,\n        onEnd: e => {\n          let srcInd = e.item.getAttribute('data-id');\n          moveArrayItem(namePrefix, srcInd, e.newIndex);\n        },\n      };\n      Sortable.create(component, options);\n    }\n  }\n\n  render() {\n    const {\n      fieldKey,\n      fieldValue,\n      namePrefix,\n      addField,\n      removeField,\n      updateFieldKey,\n      updateFieldValue,\n      moveArrayItem,\n      convertField,\n      key_prefix,\n    } = this.props;\n    const items = fieldValue.map((item, i) => {\n      const type = computeFieldType(item);\n      return (\n        <MetaArrayItem\n          key={`${key_prefix}-${i}`}\n          key_prefix={key_prefix}\n          index={i}\n          fieldKey={fieldKey}\n          fieldValue={item}\n          type={type}\n          addField={addField}\n          removeField={removeField}\n          updateFieldKey={updateFieldKey}\n          updateFieldValue={updateFieldValue}\n          moveArrayItem={moveArrayItem}\n          convertField={convertField}\n          nameAttr={`${namePrefix}[${i}]`}\n          namePrefix={namePrefix}\n        />\n      );\n    });\n    return (\n      <div\n        className=\"meta-value-array\"\n        ref={this.sortableGroupDecorator.bind(this)}\n      >\n        {items}\n        <a\n          onClick={() => addField(namePrefix)}\n          className=\"add-field-array\"\n          title=\"Add new list item\"\n        >\n          <Icon name=\"plus\" />\n        </a>\n      </div>\n    );\n  }\n}\n\nMetaArray.propTypes = {\n  fieldKey: PropTypes.string.isRequired,\n  fieldValue: PropTypes.any.isRequired,\n  nameAttr: PropTypes.string.isRequired,\n  namePrefix: PropTypes.string.isRequired,\n  addField: PropTypes.func.isRequired,\n  removeField: PropTypes.func.isRequired,\n  updateFieldKey: PropTypes.func.isRequired,\n  updateFieldValue: PropTypes.func.isRequired,\n  convertField: PropTypes.func.isRequired,\n  moveArrayItem: PropTypes.func.isRequired,\n  key_prefix: PropTypes.string.isRequired,\n};\n\nexport default MetaArray;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { findDOMNode } from 'react-dom';\nimport MetaArray from './MetaArray';\nimport MetaObject from './MetaObject';\nimport MetaSimple from './MetaSimple';\nimport MetaButtons from './MetaButtons';\n\nexport class MetaField extends Component {\n  componentDidMount() {\n    const isNewField = /New field/.test(this.props.fieldKey);\n    isNewField && this.refs.field_key.select();\n  }\n\n  handleConvertClick(type) {\n    const { convertField, nameAttr } = this.props;\n    convertField(nameAttr, type);\n  }\n\n  handleKeyBlur() {\n    const { namePrefix, fieldKey, updateFieldKey } = this.props;\n    let currentValue = findDOMNode(this.refs.field_key).value;\n    if (fieldKey !== currentValue && currentValue !== '') {\n      updateFieldKey(namePrefix, fieldKey, currentValue);\n    }\n  }\n\n  handleRemoveClick() {\n    const { removeField, namePrefix, fieldKey } = this.props;\n    removeField(namePrefix, fieldKey);\n  }\n\n  render() {\n    const {\n      type,\n      parentType,\n      fieldKey,\n      fieldValue,\n      namePrefix,\n      addField,\n      removeField,\n      updateFieldKey,\n      updateFieldValue,\n      moveArrayItem,\n      convertField,\n      key_prefix,\n      siteMeta,\n      isInDefaultState,\n      isDefaultField,\n    } = this.props;\n\n    const FieldTypes = {\n      array: MetaArray,\n      object: MetaObject,\n      simple: MetaSimple,\n    };\n    const CurrentComponent = FieldTypes[type];\n    return (\n      <div ref=\"wrap\" className=\"metafield\">\n        <div className={`meta-key ${type}`}>\n          <input\n            ref=\"field_key\"\n            onBlur={() => this.handleKeyBlur()}\n            defaultValue={fieldKey}\n            className=\"field key-field\"\n            type=\"text\"\n            placeholder=\"Key\"\n            disabled={isInDefaultState}\n          />\n          <MetaButtons\n            currentType={type}\n            isDefaultField={isDefaultField}\n            parentType=\"top\"\n            parentKey={fieldKey}\n            onConvertClick={type => this.handleConvertClick(type)}\n            onRemoveClick={() => this.handleRemoveClick()}\n          />\n        </div>\n        <CurrentComponent\n          key_prefix={key_prefix}\n          fieldKey={fieldKey}\n          parentType={parentType}\n          fieldValue={fieldValue}\n          addField={addField}\n          removeField={removeField}\n          updateFieldKey={updateFieldKey}\n          updateFieldValue={updateFieldValue}\n          moveArrayItem={moveArrayItem}\n          convertField={convertField}\n          nameAttr={`${namePrefix}['${fieldKey}']`}\n          namePrefix={`${namePrefix}['${fieldKey}']`}\n          siteMeta={siteMeta}\n          isInDefaultState={isInDefaultState}\n        />\n      </div>\n    );\n  }\n}\n\nMetaField.propTypes = {\n  type: PropTypes.string.isRequired,\n  parentType: PropTypes.string.isRequired,\n  addField: PropTypes.func.isRequired,\n  removeField: PropTypes.func.isRequired,\n  updateFieldKey: PropTypes.func.isRequired,\n  updateFieldValue: PropTypes.func.isRequired,\n  moveArrayItem: PropTypes.func.isRequired,\n  convertField: PropTypes.func.isRequired,\n  fieldKey: PropTypes.string.isRequired,\n  fieldValue: PropTypes.any,\n  nameAttr: PropTypes.string.isRequired,\n  namePrefix: PropTypes.string.isRequired,\n  key_prefix: PropTypes.string.isRequired,\n  siteMeta: PropTypes.object,\n  isInDefaultState: PropTypes.bool,\n  isDefaultField: PropTypes.bool,\n};\n\nexport default MetaField;\n","import {\n  addFieldToMetadata,\n  removeFieldFromMetadata,\n  updateMetadataFieldKey,\n  updateMetadataFieldValue,\n  moveMetadataArrayItem,\n  convertMetadataField,\n} from '../utils/metadata';\n\n// Action Types\nexport const UPDATE_TITLE = 'UPDATE_TITLE';\nexport const UPDATE_BODY = 'UPDATE_BODY';\nexport const UPDATE_PATH = 'UPDATE_PATH';\nexport const STORE_CONTENT_FIELDS = 'STORE_CONTENT_FIELDS';\nexport const ADD_METAFIELD = 'ADD_METAFIELD';\nexport const REMOVE_METAFIELD = 'REMOVE_METAFIELD';\nexport const UPDATE_FIELD_KEY = 'UPDATE_FIELD_KEY';\nexport const UPDATE_FIELD_VALUE = 'UPDATE_FIELD_VALUE';\nexport const MOVE_ARRAY_ITEM = 'MOVE_ARRAY_ITEM';\nexport const CONVERT_FIELD = 'CONVERT_FIELD';\nexport const ENABLE_FIELD = 'ENABLE_FIELD';\n\n// Actions\nexport const storeContentFields = content => ({\n  type: STORE_CONTENT_FIELDS,\n  content,\n});\n\nexport const addField = namePrefix => ({\n  type: ADD_METAFIELD,\n  namePrefix,\n});\n\nexport const removeField = (namePrefix, key) => ({\n  type: REMOVE_METAFIELD,\n  namePrefix,\n  key,\n});\n\nexport const enableField = (nameAttr, value) => ({\n  type: ENABLE_FIELD,\n  nameAttr,\n  value,\n});\n\nexport const updateFieldKey = (namePrefix, fieldKey, newKey) => ({\n  type: UPDATE_FIELD_KEY,\n  namePrefix,\n  fieldKey,\n  newKey,\n});\n\nexport const updateFieldValue = (nameAttr, value) => ({\n  type: UPDATE_FIELD_VALUE,\n  nameAttr,\n  value,\n});\n\nexport const moveArrayItem = (namePrefix, srcInd, targetInd) => ({\n  type: MOVE_ARRAY_ITEM,\n  namePrefix,\n  srcInd,\n  targetInd,\n});\n\nexport const convertField = (nameAttr, convertType) => ({\n  type: CONVERT_FIELD,\n  nameAttr,\n  convertType,\n});\n\nexport const updateTitle = title => ({\n  type: UPDATE_TITLE,\n  title,\n});\n\nexport const updateBody = body => ({\n  type: UPDATE_BODY,\n  body,\n});\n\nexport const updatePath = path => ({\n  type: UPDATE_PATH,\n  path,\n});\n\n// Reducer\nexport default function metadata( // TODO normalize the metadata\n  state = {\n    metadata: {},\n    new_field_count: 1,\n    key_prefix: '', // force children to be rerendered on sort\n    fieldChanged: false,\n  },\n  action\n) {\n  switch (action.type) {\n    case UPDATE_TITLE:\n      return {\n        ...state,\n        metadata: {\n          ...state.metadata,\n          title: action.title,\n        },\n        fieldChanged: true,\n      };\n    case UPDATE_BODY:\n      return {\n        ...state,\n        metadata: {\n          ...state.metadata,\n          raw_content: action.body,\n        },\n        fieldChanged: true,\n      };\n    case UPDATE_PATH:\n      return {\n        ...state,\n        metadata: {\n          ...state.metadata,\n          path: action.path,\n        },\n        fieldChanged: true,\n      };\n    case STORE_CONTENT_FIELDS:\n      return {\n        ...state,\n        metadata: action.content,\n      };\n    case ADD_METAFIELD:\n      return {\n        ...state,\n        metadata: addFieldToMetadata(state, action.namePrefix),\n        new_field_count: state.new_field_count + 1,\n      };\n    case REMOVE_METAFIELD:\n      return {\n        ...state,\n        metadata: removeFieldFromMetadata(state, action.namePrefix, action.key),\n        fieldChanged: true,\n        key_prefix: `${Math.random() * 100}`,\n      };\n    case UPDATE_FIELD_KEY:\n      return {\n        ...state,\n        metadata: updateMetadataFieldKey(\n          state,\n          action.namePrefix,\n          action.fieldKey,\n          action.newKey.trim()\n        ),\n        fieldChanged: true,\n      };\n    case UPDATE_FIELD_VALUE:\n      return {\n        ...state,\n        metadata: updateMetadataFieldValue(\n          state,\n          action.nameAttr,\n          action.value\n        ),\n        fieldChanged: true,\n      };\n    case MOVE_ARRAY_ITEM:\n      return {\n        ...state,\n        metadata: moveMetadataArrayItem(\n          state,\n          action.namePrefix,\n          action.srcInd,\n          action.targetInd\n        ),\n        key_prefix: `${Math.random() * 100}`,\n        fieldChanged: true,\n      };\n    case CONVERT_FIELD:\n      return {\n        ...state,\n        metadata: convertMetadataField(\n          state,\n          action.nameAttr,\n          action.convertType\n        ),\n        new_field_count: state.new_field_count + 1,\n        fieldChanged: true,\n      };\n    case ENABLE_FIELD:\n      return {\n        ...state,\n        metadata: updateMetadataFieldValue(\n          state,\n          action.nameAttr,\n          action.value\n        ),\n        fieldChanged: true,\n      };\n    default:\n      return {\n        ...state,\n        fieldChanged: false,\n      };\n  }\n}\n","import { getSiteMetaUrl } from '../constants/api';\nimport { get } from '../utils/fetch';\n\n// Action Types\nexport const FETCH_SITE_META_REQUEST = 'FETCH_SITE_META_REQUEST';\nexport const FETCH_SITE_META_SUCCESS = 'FETCH_SITE_META_SUCCESS';\nexport const FETCH_SITE_META_FAILURE = 'FETCH_SITE_META_FAILURE';\n\n// Actions\nexport const fetchSiteMeta = () => dispatch => {\n  dispatch({ type: FETCH_SITE_META_REQUEST });\n  return get(\n    getSiteMetaUrl(),\n    { type: FETCH_SITE_META_SUCCESS, name: 'site' },\n    { type: FETCH_SITE_META_FAILURE, name: 'error' },\n    dispatch\n  );\n};\n\n// Reducer\nexport default function siteMeta(\n  state = {\n    site: {},\n    isFetching: false,\n  },\n  action\n) {\n  switch (action.type) {\n    case FETCH_SITE_META_REQUEST:\n      return {\n        ...state,\n        isFetching: true,\n      };\n    case FETCH_SITE_META_SUCCESS:\n      return {\n        ...state,\n        site: action.site,\n        isFetching: false,\n      };\n    case FETCH_SITE_META_FAILURE:\n      return {\n        ...state,\n        isFetching: false,\n      };\n    default:\n      return state;\n  }\n}\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport _ from 'underscore';\nimport StaticMetaField from '../components/metadata/statics/StaticMetaField';\nimport MetaField from '../components/metadata/MetaField';\nimport Icon from '../components/Icon';\nimport {\n  storeContentFields,\n  addField,\n  removeField,\n  updateFieldKey,\n  updateFieldValue,\n  moveArrayItem,\n  convertField,\n  enableField,\n} from '../ducks/metadata';\nimport { fetchSiteMeta } from '../ducks/siteMeta';\nimport { computeFieldType } from '../utils/metadata';\n\nexport class MetaFields extends Component {\n  componentDidMount() {\n    const { storeContentFields, fields, fetchSiteMeta, dataview } = this.props;\n    if (!dataview) fetchSiteMeta();\n    storeContentFields(fields);\n  }\n\n  shouldComponentUpdate(nextProps) {\n    return !_.isEqual(nextProps.metadata, this.props.metadata);\n  }\n\n  render() {\n    const {\n      metadata,\n      addField,\n      enableField,\n      removeField,\n      updateFieldKey,\n      updateFieldValue,\n      moveArrayItem,\n      convertField,\n      key_prefix,\n      dataview,\n      site,\n      staticFields,\n    } = this.props;\n\n    let visibleKeys = { ...staticFields, ...metadata };\n\n    if (!dataview) {\n      visibleKeys = _.omit(visibleKeys, ['title', 'path', 'raw_content']);\n    }\n\n    const metafieldsClass = classnames({\n      datafields: dataview,\n      metafields: !dataview,\n    });\n\n    const defaultFieldsNotOverwritten = _.omit(\n      staticFields,\n      Object.keys(metadata)\n    );\n\n    const metafields = _.map(visibleKeys, (field, key) => {\n      const type = computeFieldType(field, key);\n      if (defaultFieldsNotOverwritten.hasOwnProperty(key)) {\n        return (\n          <StaticMetaField\n            key={key}\n            type={type}\n            fieldKey={key}\n            fieldValue={field}\n            enableField={enableField}\n          />\n        );\n      }\n\n      return (\n        <MetaField\n          key={key}\n          key_prefix={key_prefix}\n          type={type}\n          parentType=\"top\"\n          fieldKey={key}\n          fieldValue={field}\n          addField={addField}\n          removeField={removeField}\n          updateFieldKey={updateFieldKey}\n          updateFieldValue={updateFieldValue}\n          moveArrayItem={moveArrayItem}\n          convertField={convertField}\n          nameAttr={`metadata['${key}']`}\n          namePrefix={`metadata`}\n          siteMeta={dataview ? null : site}\n          isInDefaultState={defaultFieldsNotOverwritten.hasOwnProperty(key)}\n          isDefaultField={staticFields && staticFields.hasOwnProperty(key)}\n        />\n      );\n    });\n\n    const newWrapper = dataview ? (\n      <div className=\"data-new\">\n        <a onClick={() => addField('metadata')}>\n          <Icon name=\"plus-circle\" /> New data field\n        </a>\n      </div>\n    ) : (\n      <div className=\"meta-new\">\n        <a onClick={() => addField('metadata')} className=\"tooltip\">\n          <Icon name=\"plus-circle\" /> New metadata field\n          <span className=\"tooltip-text\">\n            Metadata will be stored as the <b>YAML front matter</b> within the\n            document.\n          </span>\n        </a>\n        <small className=\"tooltip pull-right\">\n          <Icon name=\"info-circle\" />\n          Special Keys\n          <span className=\"tooltip-text\">\n            You can use special keys like <b>date</b>, <b>file</b>, <b>image</b>\n            , <b>layout</b> or <b>tags</b> for user-friendly functionalities.\n          </span>\n        </small>\n      </div>\n    );\n\n    return (\n      <div className={metafieldsClass}>\n        {metafields}\n        {newWrapper}\n      </div>\n    );\n  }\n}\n\nMetaFields.propTypes = {\n  fields: PropTypes.object.isRequired,\n  metadata: PropTypes.object.isRequired,\n  key_prefix: PropTypes.string.isRequired,\n  storeContentFields: PropTypes.func.isRequired,\n  addField: PropTypes.func.isRequired,\n  removeField: PropTypes.func.isRequired,\n  updateFieldKey: PropTypes.func.isRequired,\n  updateFieldValue: PropTypes.func.isRequired,\n  moveArrayItem: PropTypes.func.isRequired,\n  convertField: PropTypes.func.isRequired,\n  fetchSiteMeta: PropTypes.func.isRequired,\n  dataview: PropTypes.bool,\n  site: PropTypes.object,\n  staticFields: PropTypes.object.isRequired,\n  enableField: PropTypes.func.isRequired,\n};\n\nconst mapStateToProps = state => ({\n  metadata: state.metadata.metadata,\n  key_prefix: state.metadata.key_prefix,\n  site: state.meta.site,\n});\n\nconst mapDispatchToProps = dispatch =>\n  bindActionCreators(\n    {\n      storeContentFields,\n      fetchSiteMeta,\n      addField,\n      enableField,\n      removeField,\n      updateFieldKey,\n      updateFieldValue,\n      moveArrayItem,\n      convertField,\n    },\n    dispatch\n  );\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MetaFields);\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport MetaFields from '../containers/MetaFields';\n\nclass DataGUI extends Component {\n  handleChange = e => this.props.onChange(e.target.value);\n\n  renderPathFields(slug, ext) {\n    return (\n      <form className=\"datafile-path\">\n        <fieldset className=\"filename\">\n          <legend>Path (without extension)</legend>\n          <input\n            type=\"text\"\n            id=\"path\"\n            defaultValue={slug}\n            placeholder=\"filename\"\n            onChange={this.handleChange}\n            ref=\"filepath\"\n          />\n        </fieldset>\n        <fieldset className=\"file-type\">\n          <legend>File Type</legend>\n          <select\n            id=\"extn\"\n            defaultValue={ext}\n            onChange={this.handleChange}\n            ref=\"extname\"\n          >\n            <option value=\".yml\">YAML</option>\n            <option value=\".json\">JSON</option>\n          </select>\n        </fieldset>\n      </form>\n    );\n  }\n\n  render() {\n    const { fields, slug, ext, restricted } = this.props;\n    return (\n      <div>\n        <div className=\"warning\">\n          CAUTION! Any existing comments will be lost when editing via this\n          view. Switch to the <strong>Raw Editor</strong> to preserve them.\n        </div>\n        {!restricted && this.renderPathFields(slug, ext)}\n        <MetaFields fields={fields} dataview />\n      </div>\n    );\n  }\n}\n\nDataGUI.defaultProps = {\n  fields: {},\n  slug: '',\n  ext: '',\n  restricted: false,\n};\n\nDataGUI.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  fields: PropTypes.object,\n  slug: PropTypes.string,\n  ext: PropTypes.string,\n  restricted: PropTypes.bool,\n};\n\nexport default DataGUI;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport AceEditor from 'react-ace';\nimport 'brace/mode/json';\nimport 'brace/mode/yaml';\nimport 'brace/theme/monokai';\n\nclass Editor extends Component {\n  shouldComponentUpdate(nextProps, nextState) {\n    return nextProps.content !== this.props.content;\n  }\n\n  handleChange = () => {\n    const { onEditorChange, editorChanged } = this.props;\n    !editorChanged && onEditorChange();\n  };\n\n  getValue() {\n    return this.refs.ace.editor.getValue();\n  }\n\n  render() {\n    const { content, type } = this.props;\n    const mode = /json/i.test(type) ? 'json' : 'yaml';\n    return (\n      <div>\n        <AceEditor\n          value={content}\n          mode={mode}\n          theme=\"monokai\"\n          width=\"100%\"\n          height=\"400px\"\n          showGutter={false}\n          showPrintMargin={false}\n          highlightActiveLine={false}\n          className=\"config-editor\"\n          fontSize={14}\n          scrollMargin={[15, 15, 15, 15]}\n          ref=\"ace\"\n          onChange={this.handleChange}\n        />\n        <div className=\"statusbar\">mode: {mode.toUpperCase()}</div>\n      </div>\n    );\n  }\n}\n\nEditor.propTypes = {\n  content: PropTypes.any.isRequired,\n  onEditorChange: PropTypes.func.isRequired,\n  editorChanged: PropTypes.bool.isRequired,\n  type: PropTypes.string,\n};\n\nexport default Editor;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport _ from 'underscore';\n\nconst Errors = ({ errors }) => (\n  <div className=\"error-messages\">\n    {_.map(errors, (error, i) => <div key={i}>{error}</div>)}\n  </div>\n);\n\nErrors.propTypes = {\n  errors: PropTypes.array.isRequired,\n};\n\nexport default Errors;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport Icon from './Icon';\n\nimport translations from '../translations';\nconst { labels } = translations;\n\nconst iconMap = {\n  create: 'plus-square',\n  delete: 'trash',\n  publish: 'send-o',\n  save: 'save',\n  upload: 'upload',\n  view: 'eye',\n};\n\nexport default function Button({\n  type,\n  active,\n  triggered,\n  onClick,\n  block,\n  thin,\n  icon,\n  to,\n}) {\n  const btnClass = classnames('btn', {\n    'btn-active': active,\n    'btn-success': active && (type === 'save' || type === 'create'),\n    'btn-delete': type === 'delete',\n    'btn-view': type === 'view' || type === 'publish',\n    'btn-inactive': !active,\n    'btn-fat': block,\n    'btn-thin': thin,\n  });\n\n  let label, triggeredLabel;\n  switch (type) {\n    case 'save':\n    case 'create':\n      label = labels[type].label;\n      triggeredLabel = labels[type].triggeredLabel;\n      break;\n    case 'view-toggle':\n      label = labels.viewToggle.label;\n      triggeredLabel = labels.viewToggle.triggeredLabel;\n      break;\n    case 'view':\n    case 'delete':\n    case 'upload':\n    case 'publish':\n      label = labels[type].label;\n      break;\n    default:\n      label = '<LABEL>';\n      triggeredLabel = '<NEXT LABEL>';\n  }\n\n  const iconName = icon || iconMap[type];\n  const iconNode = iconName && <Icon name={iconName} />;\n\n  if (to) {\n    return (\n      <a href={to} target=\"_blank\" rel=\"noopener noreferrer\" className={btnClass}>\n        {iconNode}\n        {label}\n      </a>\n    );\n  } else if (onClick) {\n    return (\n      <button onClick={onClick} className={btnClass}>\n        {iconNode}\n        {triggered ? triggeredLabel : label}\n      </button>\n    );\n  }\n\n  return null;\n}\n\nButton.propTypes = {\n  type: PropTypes.string.isRequired,\n  active: PropTypes.bool.isRequired,\n  onClick: PropTypes.func,\n  triggered: PropTypes.bool,\n  block: PropTypes.bool,\n  thin: PropTypes.bool,\n  icon: PropTypes.string,\n  to: PropTypes.string,\n};\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { withRouter } from 'react-router';\nimport { HotKeys } from 'react-hotkeys';\nimport DocumentTitle from 'react-document-title';\nimport DataGUI from '../../components/DataGUI';\nimport Editor from '../../components/Editor';\nimport Errors from '../../components/Errors';\nimport Button from '../../components/Button';\nimport { putConfig, onEditorChange } from '../../ducks/config';\nimport { clearErrors } from '../../ducks/utils';\nimport { preventDefault } from '../../utils/helpers';\n\nimport translations from '../../translations';\nconst { getLeaveMessage } = translations;\n\nexport class Configuration extends Component {\n  state = {\n    guiView: false,\n  };\n\n  componentDidMount() {\n    const { router, route } = this.props;\n    router.setRouteLeaveHook(route, this.routerWillLeave);\n  }\n\n  componentWillUnmount() {\n    const { clearErrors, errors } = this.props;\n    errors.length && clearErrors();\n  }\n\n  routerWillLeave = nextLocation => {\n    const { editorChanged, fieldChanged } = this.props;\n    if (editorChanged || fieldChanged) {\n      return getLeaveMessage();\n    }\n  };\n\n  toggleView = () => {\n    this.setState(state => {\n      return { guiView: !state.guiView };\n    });\n  };\n\n  handleClickSave = e => {\n    preventDefault(e);\n    const { editorChanged, fieldChanged, putConfig } = this.props;\n    if (editorChanged) {\n      const value = this.refs.editor.getValue();\n      putConfig(value);\n    } else if (fieldChanged) {\n      putConfig(null, 'gui');\n    }\n  };\n\n  renderContentBody() {\n    const { config, editorChanged, onEditorChange } = this.props;\n    const { raw_content, content } = config;\n\n    if (this.state.guiView && content) {\n      return <DataGUI fields={content} onChange={onEditorChange} restricted />;\n    }\n\n    return (\n      <Editor\n        editorChanged={editorChanged}\n        onEditorChange={onEditorChange}\n        content={raw_content}\n        ref=\"editor\"\n      />\n    );\n  }\n\n  render() {\n    const { editorChanged, fieldChanged, updated, errors } = this.props;\n\n    const keyboardHandlers = {\n      save: this.handleClickSave,\n    };\n\n    return (\n      <DocumentTitle title=\"Configuration\">\n        <HotKeys handlers={keyboardHandlers} className=\"single\">\n          {errors && errors.length > 0 && <Errors errors={errors} />}\n          <div className=\"content-header\">\n            <h1>Configuration</h1>\n            <div className=\"page-buttons multiple\">\n              <Button\n                onClick={this.toggleView}\n                type=\"view-toggle\"\n                triggered={this.state.guiView}\n                active\n                block\n              />\n              <Button\n                onClick={this.handleClickSave}\n                type=\"save\"\n                active={editorChanged || fieldChanged}\n                triggered={updated}\n                block\n              />\n            </div>\n          </div>\n          <div className=\"content-body\">{this.renderContentBody()}</div>\n        </HotKeys>\n      </DocumentTitle>\n    );\n  }\n}\n\nConfiguration.propTypes = {\n  config: PropTypes.object.isRequired,\n  onEditorChange: PropTypes.func.isRequired,\n  putConfig: PropTypes.func.isRequired,\n  updated: PropTypes.bool.isRequired,\n  editorChanged: PropTypes.bool.isRequired,\n  fieldChanged: PropTypes.bool.isRequired,\n  errors: PropTypes.array.isRequired,\n  clearErrors: PropTypes.func.isRequired,\n  router: PropTypes.object.isRequired,\n  route: PropTypes.object.isRequired,\n};\n\nconst mapStateToProps = state => ({\n  config: state.config.config,\n  updated: state.config.updated,\n  editorChanged: state.config.editorChanged,\n  fieldChanged: state.metadata.fieldChanged,\n  errors: state.utils.errors,\n});\n\nconst mapDispatchToProps = dispatch =>\n  bindActionCreators({ putConfig, onEditorChange, clearErrors }, dispatch);\n\nexport default withRouter(\n  connect(mapStateToProps, mapDispatchToProps)(Configuration)\n);\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { browserHistory, Link } from 'react-router';\nimport Breadcrumbs from './Breadcrumbs';\nimport Button from './Button';\nimport Icon from './Icon';\nimport InputSearch from './form/InputSearch';\nimport { ADMIN_PREFIX } from '../constants';\n\nimport translations from '../translations';\nconst { getDeleteMessage, getNotFoundMessage } = translations;\n\nexport default class Explorer extends Component {\n  handleClickDelete(filename) {\n    const { deleteItem, params, type } = this.props;\n    const confirm = window.confirm(getDeleteMessage(filename));\n    const dir = params.splat ? `/${params.splat}` : '';\n    if (confirm) {\n      deleteItem(params.splat, filename);\n      browserHistory.push(`${ADMIN_PREFIX}/${type}${dir}`);\n    }\n  }\n\n  renderTitleCell(name, icon, type, path) {\n    return (\n      <td className=\"row-title\">\n        <strong>\n          <Link to={`${ADMIN_PREFIX}/${type}/${path}`}>\n            <Icon name={icon} />\n            {name}\n          </Link>\n        </strong>\n      </td>\n    );\n  }\n\n  renderDirectoryRow(directory, type, index) {\n    const { name, relative_path } = directory;\n    return (\n      <tr key={index}>\n        {this.renderTitleCell(name, 'folder', type, relative_path)}\n        <td />\n      </tr>\n    );\n  }\n\n  renderFileRow(file, type, index) {\n    const { name, relative_path, http_url } = file;\n    return (\n      <tr key={index}>\n        {this.renderTitleCell(name, 'file-text-o', type, relative_path)}\n        <td>\n          <div className=\"row-actions\">\n            <Button\n              onClick={() => this.handleClickDelete(name)}\n              type=\"delete\"\n              active\n              thin\n            />\n            {http_url && <Button to={http_url} type=\"view\" active thin />}\n          </div>\n        </td>\n      </tr>\n    );\n  }\n\n  renderRows() {\n    const { items, type } = this.props;\n    return items.map((entry, index) =>\n      entry.type === 'directory'\n        ? this.renderDirectoryRow(entry, type, index)\n        : this.renderFileRow(entry, type, index)\n    );\n  }\n\n  render() {\n    const { items, type, newBtnLabel, search, params } = this.props;\n    const typeLabel = type === 'datafiles' ? 'data files' : type;\n\n    const to = params.splat\n      ? `${ADMIN_PREFIX}/${type}/${params.splat}/new`\n      : `${ADMIN_PREFIX}/${type}/new`;\n\n    const content = items.length ? (\n      <div className=\"content-table\">\n        <table>\n          <thead>\n            <tr>\n              <th>Filename</th>\n              <th className=\"th-actions\">Actions</th>\n            </tr>\n          </thead>\n          <tbody>{this.renderRows()}</tbody>\n        </table>\n      </div>\n    ) : (\n      <h1>{getNotFoundMessage(typeLabel)}</h1>\n    );\n\n    return (\n      <div>\n        <div className=\"content-header\">\n          <Breadcrumbs type={type} splat={params.splat} />\n          <div className=\"page-buttons\">\n            <Link className=\"btn btn-active\" to={to}>\n              {newBtnLabel}\n            </Link>\n          </div>\n          <div className=\"pull-right\">\n            <InputSearch searchBy=\"filename\" search={search} />\n          </div>\n        </div>\n        {content}\n      </div>\n    );\n  }\n}\n\nExplorer.propTypes = {\n  type: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n  params: PropTypes.object.isRequired,\n  newBtnLabel: PropTypes.string.isRequired,\n  deleteItem: PropTypes.func.isRequired,\n  search: PropTypes.func.isRequired,\n};\n","import _ from 'underscore';\nimport { CLEAR_ERRORS, validationError, filterDeleted } from './utils';\nimport { get, put, del } from '../utils/fetch';\nimport { validator } from '../utils/validation';\nimport { slugify, trimObject, computeRelativePath } from '../utils/helpers';\nimport { pagesAPIUrl, pageAPIUrl } from '../constants/api';\n\nimport translations from '../translations';\nconst { getTitleRequiredMessage, getFilenameNotValidMessage } = translations;\n\n// Action Types\nexport const FETCH_PAGES_REQUEST = 'FETCH_PAGES_REQUEST';\nexport const FETCH_PAGES_SUCCESS = 'FETCH_PAGES_SUCCESS';\nexport const FETCH_PAGES_FAILURE = 'FETCH_PAGES_FAILURE';\nexport const FETCH_PAGE_REQUEST = 'FETCH_PAGE_REQUEST';\nexport const FETCH_PAGE_SUCCESS = 'FETCH_PAGE_SUCCESS';\nexport const FETCH_PAGE_FAILURE = 'FETCH_PAGE_FAILURE';\nexport const PUT_PAGE_REQUEST = 'PUT_PAGE_REQUEST';\nexport const PUT_PAGE_SUCCESS = 'PUT_PAGE_SUCCESS';\nexport const PUT_PAGE_FAILURE = 'PUT_PAGE_FAILURE';\nexport const DELETE_PAGE_REQUEST = 'DELETE_PAGE_REQUEST';\nexport const DELETE_PAGE_SUCCESS = 'DELETE_PAGE_SUCCESS';\nexport const DELETE_PAGE_FAILURE = 'DELETE_PAGE_FAILURE';\n\n// Actions\nexport const fetchPages = (directory = '') => dispatch => {\n  dispatch({ type: FETCH_PAGES_REQUEST });\n  return get(\n    pagesAPIUrl(directory),\n    { type: FETCH_PAGES_SUCCESS, name: 'pages' },\n    { type: FETCH_PAGES_FAILURE, name: 'error' },\n    dispatch\n  );\n};\n\nexport const fetchPage = (directory, filename) => dispatch => {\n  dispatch({ type: FETCH_PAGE_REQUEST });\n  return get(\n    pageAPIUrl(directory, filename),\n    { type: FETCH_PAGE_SUCCESS, name: 'page' },\n    { type: FETCH_PAGE_FAILURE, name: 'error' },\n    dispatch\n  );\n};\n\nexport const createPage = directory => (dispatch, getState) => {\n  // get edited fields from metadata state\n  const metadata = getState().metadata.metadata;\n  let { path, raw_content, title } = metadata;\n  // if path is not given or equals to directory, generate filename from the title\n  if (!path && title) {\n    path = `${slugify(title)}.md`;\n  } else {\n    const errors = validatePage(metadata);\n    if (errors.length) {\n      return dispatch(validationError(errors));\n    }\n  }\n  // clear errors\n  dispatch({ type: CLEAR_ERRORS });\n  // omit raw_content, path and empty-value keys in metadata state from front_matter\n  const front_matter = _.omit(metadata, (value, key, object) => {\n    return key === 'raw_content' || key === 'path' || value === '';\n  });\n  //send the put request\n  return put(\n    pageAPIUrl(directory, path),\n    preparePayload({ front_matter, raw_content }),\n    { type: PUT_PAGE_SUCCESS, name: 'page' },\n    { type: PUT_PAGE_FAILURE, name: 'error' },\n    dispatch\n  );\n};\n\nexport const putPage = (directory, filename) => (dispatch, getState) => {\n  // get edited fields from metadata state\n  const metadata = getState().metadata.metadata;\n  let { path, raw_content, title } = metadata;\n  // if path is not given or equals to directory, generate filename from the title\n  if (!path && title) {\n    path = `${slugify(title)}.md`;\n  } else {\n    const errors = validatePage(metadata);\n    if (errors.length) {\n      return dispatch(validationError(errors));\n    }\n  }\n  // clear errors\n  dispatch({ type: CLEAR_ERRORS });\n  // omit raw_content, path and empty-value keys in metadata state from front_matter\n  const front_matter = _.omit(metadata, (value, key, object) => {\n    return key === 'raw_content' || key === 'path' || value === '';\n  });\n  const relative_path = directory ? `${directory}/${path}` : `${path}`;\n  //send the put request\n  return put(\n    // create or update page according to filename existence\n    pageAPIUrl(directory, filename),\n    preparePayload({ path: relative_path, front_matter, raw_content }),\n    { type: PUT_PAGE_SUCCESS, name: 'page' },\n    { type: PUT_PAGE_FAILURE, name: 'error' },\n    dispatch\n  );\n};\n\nexport const deletePage = (directory, filename) => dispatch => {\n  const relative_path = computeRelativePath(directory, filename);\n  return del(\n    pageAPIUrl(directory, filename),\n    { type: DELETE_PAGE_SUCCESS, name: 'page', id: relative_path },\n    { type: DELETE_PAGE_FAILURE, name: 'error' },\n    dispatch\n  );\n};\n\nconst validatePage = metadata =>\n  validator(\n    metadata,\n    { path: 'required|filename' },\n    {\n      'path.required': getTitleRequiredMessage(),\n      'path.filename': getFilenameNotValidMessage(),\n    }\n  );\n\nconst preparePayload = obj => JSON.stringify(trimObject(obj));\n\n// Reducer\nexport default function pages(\n  state = {\n    pages: [],\n    page: {},\n    isFetching: false,\n    updated: false,\n  },\n  action\n) {\n  switch (action.type) {\n    case FETCH_PAGES_REQUEST:\n    case FETCH_PAGE_REQUEST:\n      return {\n        ...state,\n        isFetching: true,\n      };\n    case FETCH_PAGES_SUCCESS:\n      return {\n        ...state,\n        pages: action.pages,\n        isFetching: false,\n        page: {},\n      };\n    case FETCH_PAGES_FAILURE:\n      return {\n        ...state,\n        isFetching: false,\n        pages: [],\n      };\n    case FETCH_PAGE_SUCCESS:\n      return {\n        ...state,\n        page: action.page,\n        isFetching: false,\n      };\n    case FETCH_PAGE_FAILURE:\n      return {\n        ...state,\n        page: {},\n        isFetching: false,\n      };\n    case PUT_PAGE_SUCCESS:\n      return {\n        ...state,\n        page: action.page,\n        updated: true,\n      };\n    case DELETE_PAGE_SUCCESS:\n      return {\n        ...state,\n        pages: filterDeleted(state.pages, action.id),\n      };\n    default:\n      return {\n        ...state,\n        updated: false,\n      };\n  }\n}\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport DocumentTitle from 'react-document-title';\nimport Explorer from '../../components/Explorer';\nimport { search, filterBySearchInput } from '../../ducks/utils';\nimport { fetchPages, deletePage } from '../../ducks/pages';\nimport { getDocumentTitle } from '../../utils/helpers';\n\nexport class Pages extends Component {\n  componentDidMount() {\n    const { fetchPages, params } = this.props;\n    fetchPages(params.splat);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const { fetchPages } = nextProps;\n    if (this.props.params.splat !== nextProps.params.splat) {\n      fetchPages(nextProps.params.splat);\n    }\n  }\n\n  render() {\n    const { isFetching, pages, search, params, deletePage } = this.props;\n\n    if (isFetching) {\n      return null;\n    }\n\n    const title = getDocumentTitle('pages', params.splat);\n\n    return (\n      <DocumentTitle title={title}>\n        <Explorer\n          type=\"pages\"\n          items={pages}\n          params={params}\n          newBtnLabel=\"New page\"\n          search={search}\n          deleteItem={deletePage}\n        />\n      </DocumentTitle>\n    );\n  }\n}\n\nPages.propTypes = {\n  pages: PropTypes.array.isRequired,\n  fetchPages: PropTypes.func.isRequired,\n  deletePage: PropTypes.func.isRequired,\n  isFetching: PropTypes.bool.isRequired,\n  search: PropTypes.func.isRequired,\n  params: PropTypes.object.isRequired,\n};\n\nconst mapStateToProps = state => ({\n  pages: filterBySearchInput(state.pages.pages, state.utils.input),\n  isFetching: state.pages.isFetching,\n});\n\nconst mapDispatchToProps = dispatch =>\n  bindActionCreators(\n    {\n      fetchPages,\n      deletePage,\n      search,\n    },\n    dispatch\n  );\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Pages);\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport TextareaAutosize from 'react-textarea-autosize';\nimport moment from 'moment';\nimport Icon from '../Icon';\n\nexport default class InputFilename extends Component {\n  handleChange = e => {\n    const { onChange } = this.props;\n\n    // The `TextareaAutosize` has a `value` attribute\n    // which is supposed to be set to its inner `TextArea`'s value\n    // but is always undefined\n    // So this is a workaround\n    this.refs.input.value = e.target.value;\n\n    onChange(e.target.value);\n  };\n\n  render() {\n    const { path, type } = this.props;\n\n    let placeholder = 'example.md';\n    if (type === 'posts') {\n      const date = moment().format('YYYY-MM-DD');\n      placeholder = `${date}-your-title.md`;\n    } else if (type === 'data files') {\n      placeholder = 'your-filename.yml';\n    }\n\n    let tooltip = null;\n    if (type !== 'data files') {\n      tooltip = (\n        <span className=\"tooltip\">\n          <Icon name=\"info-circle\" />\n          <span className=\"tooltip-text\">\n            If you leave <b>path</b> blank, it will be autogenerated from title.\n          </span>\n        </span>\n      );\n    }\n    return (\n      <div className=\"input-path\">\n        <label>Path {tooltip}</label>\n        <TextareaAutosize\n          key={path}\n          onChange={this.handleChange}\n          placeholder={placeholder}\n          defaultValue={path}\n          ref=\"input\"\n        />\n      </div>\n    );\n  }\n}\n\nInputFilename.propTypes = {\n  path: PropTypes.string.isRequired,\n  type: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired,\n};\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport TextareaAutosize from 'react-textarea-autosize';\n\nexport default class InputTitle extends Component {\n  shouldComponentUpdate(nextProps) {\n    return nextProps.title !== this.props.title;\n  }\n\n  handleChange = e => {\n    const { onChange } = this.props;\n    onChange(e.target.value);\n  };\n\n  render() {\n    const { title } = this.props;\n    return (\n      <div className=\"input-title\">\n        <label>Title</label>\n        <TextareaAutosize\n          onChange={this.handleChange}\n          placeholder=\"Title\"\n          defaultValue={title}\n          ref=\"input\"\n        />\n      </div>\n    );\n  }\n}\n\nInputTitle.propTypes = {\n  title: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired,\n};\n","/* eslint-disable */\n\nimport hljs from 'highlight.js/lib/highlight';\n\n// ---\n// Languages supported as of highlight.js v9.17.1.\n//\n// We can't have a dynamic require statement below because webpack doesn't\n// evaluate statements and will therefore include all languages in the final\n// bundle unless webpack is additionally configured to not include the languages\n// we don't intend to include.\n// ---\n\nhljs.registerLanguage('actionscript',      require('highlight.js/lib/languages/actionscript'));\nhljs.registerLanguage('apache',            require('highlight.js/lib/languages/apache'));\nhljs.registerLanguage('applescript',       require('highlight.js/lib/languages/applescript'));\nhljs.registerLanguage('asciidoc',          require('highlight.js/lib/languages/asciidoc'));\nhljs.registerLanguage('bash',              require('highlight.js/lib/languages/bash'));\nhljs.registerLanguage('basic',             require('highlight.js/lib/languages/basic'));\nhljs.registerLanguage('clojure',           require('highlight.js/lib/languages/clojure'));\nhljs.registerLanguage('clojure-repl',      require('highlight.js/lib/languages/clojure-repl'));\nhljs.registerLanguage('cmake',             require('highlight.js/lib/languages/cmake'));\nhljs.registerLanguage('coffeescript',      require('highlight.js/lib/languages/coffeescript'));\nhljs.registerLanguage('cpp',               require('highlight.js/lib/languages/cpp'));\nhljs.registerLanguage('crystal',           require('highlight.js/lib/languages/crystal'));\nhljs.registerLanguage('css',               require('highlight.js/lib/languages/css'));\nhljs.registerLanguage('dart',              require('highlight.js/lib/languages/dart'));\nhljs.registerLanguage('diff',              require('highlight.js/lib/languages/diff'));\nhljs.registerLanguage('django',            require('highlight.js/lib/languages/django'));\nhljs.registerLanguage('dns',               require('highlight.js/lib/languages/dns'));\nhljs.registerLanguage('dockerfile',        require('highlight.js/lib/languages/dockerfile'));\nhljs.registerLanguage('dos',               require('highlight.js/lib/languages/dos'));\nhljs.registerLanguage('dsconfig',          require('highlight.js/lib/languages/dsconfig'));\nhljs.registerLanguage('elixir',            require('highlight.js/lib/languages/elixir'));\nhljs.registerLanguage('elm',               require('highlight.js/lib/languages/elm'));\nhljs.registerLanguage('erb',               require('highlight.js/lib/languages/erb'));\nhljs.registerLanguage('erlang-repl',       require('highlight.js/lib/languages/erlang-repl'));\nhljs.registerLanguage('erlang',            require('highlight.js/lib/languages/erlang'));\nhljs.registerLanguage('excel',             require('highlight.js/lib/languages/excel'));\nhljs.registerLanguage('fortran',           require('highlight.js/lib/languages/fortran'));\nhljs.registerLanguage('fsharp',            require('highlight.js/lib/languages/fsharp'));\nhljs.registerLanguage('gherkin',           require('highlight.js/lib/languages/gherkin'));\nhljs.registerLanguage('go',                require('highlight.js/lib/languages/go'));\nhljs.registerLanguage('gradle',            require('highlight.js/lib/languages/gradle'));\nhljs.registerLanguage('groovy',            require('highlight.js/lib/languages/groovy'));\nhljs.registerLanguage('haml',              require('highlight.js/lib/languages/haml'));\nhljs.registerLanguage('handlebars',        require('highlight.js/lib/languages/handlebars'));\nhljs.registerLanguage('haskell',           require('highlight.js/lib/languages/haskell'));\nhljs.registerLanguage('htmlbars',          require('highlight.js/lib/languages/htmlbars'));\nhljs.registerLanguage('http',              require('highlight.js/lib/languages/http'));\nhljs.registerLanguage('ini',               require('highlight.js/lib/languages/ini'));\nhljs.registerLanguage('java',              require('highlight.js/lib/languages/java'));\nhljs.registerLanguage('javascript',        require('highlight.js/lib/languages/javascript'));\nhljs.registerLanguage('json',              require('highlight.js/lib/languages/json'));\nhljs.registerLanguage('julia',             require('highlight.js/lib/languages/julia'));\nhljs.registerLanguage('julia-repl',        require('highlight.js/lib/languages/julia-repl'));\nhljs.registerLanguage('kotlin',            require('highlight.js/lib/languages/kotlin'));\nhljs.registerLanguage('ldif',              require('highlight.js/lib/languages/ldif'));\nhljs.registerLanguage('less',              require('highlight.js/lib/languages/less'));\nhljs.registerLanguage('lisp',              require('highlight.js/lib/languages/lisp'));\nhljs.registerLanguage('livescript',        require('highlight.js/lib/languages/livescript'));\nhljs.registerLanguage('lua',               require('highlight.js/lib/languages/lua'));\nhljs.registerLanguage('makefile',          require('highlight.js/lib/languages/makefile'));\nhljs.registerLanguage('markdown',          require('highlight.js/lib/languages/markdown'));\nhljs.registerLanguage('mathematica',       require('highlight.js/lib/languages/mathematica'));\nhljs.registerLanguage('matlab',            require('highlight.js/lib/languages/matlab'));\nhljs.registerLanguage('perl',              require('highlight.js/lib/languages/perl'));\nhljs.registerLanguage('nginx',             require('highlight.js/lib/languages/nginx'));\nhljs.registerLanguage('nix',               require('highlight.js/lib/languages/nix'));\nhljs.registerLanguage('objectivec',        require('highlight.js/lib/languages/objectivec'));\nhljs.registerLanguage('ocaml',             require('highlight.js/lib/languages/ocaml'));\nhljs.registerLanguage('pgsql',             require('highlight.js/lib/languages/pgsql'));\nhljs.registerLanguage('php',               require('highlight.js/lib/languages/php'));\nhljs.registerLanguage('plaintext',         require('highlight.js/lib/languages/plaintext'));\nhljs.registerLanguage('powershell',        require('highlight.js/lib/languages/powershell'));\nhljs.registerLanguage('prolog',            require('highlight.js/lib/languages/prolog'));\nhljs.registerLanguage('python',            require('highlight.js/lib/languages/python'));\nhljs.registerLanguage('r',                 require('highlight.js/lib/languages/r'));\nhljs.registerLanguage('reasonml',          require('highlight.js/lib/languages/reasonml'));\nhljs.registerLanguage('ruby',              require('highlight.js/lib/languages/ruby'));\nhljs.registerLanguage('rust',              require('highlight.js/lib/languages/rust'));\nhljs.registerLanguage('scala',             require('highlight.js/lib/languages/scala'));\nhljs.registerLanguage('scss',              require('highlight.js/lib/languages/scss'));\nhljs.registerLanguage('shell',             require('highlight.js/lib/languages/shell'));\nhljs.registerLanguage('smalltalk',         require('highlight.js/lib/languages/smalltalk'));\nhljs.registerLanguage('sql',               require('highlight.js/lib/languages/sql'));\nhljs.registerLanguage('swift',             require('highlight.js/lib/languages/swift'));\nhljs.registerLanguage('typescript',        require('highlight.js/lib/languages/typescript'));\nhljs.registerLanguage('vbnet',             require('highlight.js/lib/languages/vbnet'));\nhljs.registerLanguage('vbscript',          require('highlight.js/lib/languages/vbscript'));\nhljs.registerLanguage('vim',               require('highlight.js/lib/languages/vim'));\nhljs.registerLanguage('yaml',              require('highlight.js/lib/languages/yaml'));\nhljs.registerLanguage('xml',               require('highlight.js/lib/languages/xml'));\n\n// ---\n// Uncomment below to include that language in the final build\n// ---\n\n// hljs.registerLanguage('1c',             require('highlight.js/lib/languages/1c'));\n// hljs.registerLanguage('abnf',           require('highlight.js/lib/languages/abnf'));\n// hljs.registerLanguage('accesslog',      require('highlight.js/lib/languages/accesslog'));\n// hljs.registerLanguage('ada',            require('highlight.js/lib/languages/ada'));\n// hljs.registerLanguage('angelscript',    require('highlight.js/lib/languages/angelscript'));\n// hljs.registerLanguage('arcade',         require('highlight.js/lib/languages/arcade'));\n// hljs.registerLanguage('arduino',        require('highlight.js/lib/languages/arduino'));\n// hljs.registerLanguage('armasm',         require('highlight.js/lib/languages/armasm'));\n// hljs.registerLanguage('aspectj',        require('highlight.js/lib/languages/aspectj'));\n// hljs.registerLanguage('autohotkey',     require('highlight.js/lib/languages/autohotkey'));\n// hljs.registerLanguage('autoit',         require('highlight.js/lib/languages/autoit'));\n// hljs.registerLanguage('avrasm',         require('highlight.js/lib/languages/avrasm'));\n// hljs.registerLanguage('awk',            require('highlight.js/lib/languages/awk'));\n// hljs.registerLanguage('axapta',         require('highlight.js/lib/languages/axapta'));\n// hljs.registerLanguage('bnf',            require('highlight.js/lib/languages/bnf'));\n// hljs.registerLanguage('brainfuck',      require('highlight.js/lib/languages/brainfuck'));\n// hljs.registerLanguage('cal',            require('highlight.js/lib/languages/cal'));\n// hljs.registerLanguage('capnproto',      require('highlight.js/lib/languages/capnproto'));\n// hljs.registerLanguage('ceylon',         require('highlight.js/lib/languages/ceylon'));\n// hljs.registerLanguage('clean',          require('highlight.js/lib/languages/clean'));\n// hljs.registerLanguage('coq',            require('highlight.js/lib/languages/coq'));\n// hljs.registerLanguage('cos',            require('highlight.js/lib/languages/cos'));\n// hljs.registerLanguage('crmsh',          require('highlight.js/lib/languages/crmsh'));\n// hljs.registerLanguage('cs',             require('highlight.js/lib/languages/cs'));\n// hljs.registerLanguage('csp',            require('highlight.js/lib/languages/csp'));\n// hljs.registerLanguage('d',              require('highlight.js/lib/languages/d'));\n// hljs.registerLanguage('delphi',         require('highlight.js/lib/languages/delphi'));\n// hljs.registerLanguage('dts',            require('highlight.js/lib/languages/dts'));\n// hljs.registerLanguage('dust',           require('highlight.js/lib/languages/dust'));\n// hljs.registerLanguage('ebnf',           require('highlight.js/lib/languages/ebnf'));\n// hljs.registerLanguage('fix',            require('highlight.js/lib/languages/fix'));\n// hljs.registerLanguage('flix',           require('highlight.js/lib/languages/flix'));\n// hljs.registerLanguage('gams',           require('highlight.js/lib/languages/gams'));\n// hljs.registerLanguage('gauss',          require('highlight.js/lib/languages/gauss'));\n// hljs.registerLanguage('gcode',          require('highlight.js/lib/languages/gcode'));\n// hljs.registerLanguage('glsl',           require('highlight.js/lib/languages/glsl'));\n// hljs.registerLanguage('gml',            require('highlight.js/lib/languages/gml'));\n// hljs.registerLanguage('golo',           require('highlight.js/lib/languages/golo'));\n// hljs.registerLanguage('haxe',           require('highlight.js/lib/languages/haxe'));\n// hljs.registerLanguage('hsp',            require('highlight.js/lib/languages/hsp'));\n// hljs.registerLanguage('hy',             require('highlight.js/lib/languages/hy'));\n// hljs.registerLanguage('inform7',        require('highlight.js/lib/languages/inform7'));\n// hljs.registerLanguage('irpf90',         require('highlight.js/lib/languages/irpf90'));\n// hljs.registerLanguage('isbl',           require('highlight.js/lib/languages/isbl'));\n// hljs.registerLanguage('jboss-cli',      require('highlight.js/lib/languages/jboss-cli'));\n// hljs.registerLanguage('lasso',          require('highlight.js/lib/languages/lasso'));\n// hljs.registerLanguage('leaf',           require('highlight.js/lib/languages/leaf'));\n// hljs.registerLanguage('livecodeserver', require('highlight.js/lib/languages/livecodeserver'));\n// hljs.registerLanguage('llvm',           require('highlight.js/lib/languages/llvm'));\n// hljs.registerLanguage('lsl',            require('highlight.js/lib/languages/lsl'));\n// hljs.registerLanguage('maxima',         require('highlight.js/lib/languages/maxima'));\n// hljs.registerLanguage('mel',            require('highlight.js/lib/languages/mel'));\n// hljs.registerLanguage('mercury',        require('highlight.js/lib/languages/mercury'));\n// hljs.registerLanguage('mipsasm',        require('highlight.js/lib/languages/mipsasm'));\n// hljs.registerLanguage('mizar',          require('highlight.js/lib/languages/mizar'));\n// hljs.registerLanguage('mojolicious',    require('highlight.js/lib/languages/mojolicious'));\n// hljs.registerLanguage('monkey',         require('highlight.js/lib/languages/monkey'));\n// hljs.registerLanguage('moonscript',     require('highlight.js/lib/languages/moonscript'));\n// hljs.registerLanguage('n1ql',           require('highlight.js/lib/languages/n1ql'));\n// hljs.registerLanguage('nimrod',         require('highlight.js/lib/languages/nimrod'));\n// hljs.registerLanguage('nsis',           require('highlight.js/lib/languages/nsis'));\n// hljs.registerLanguage('openscad',       require('highlight.js/lib/languages/openscad'));\n// hljs.registerLanguage('oxygene',        require('highlight.js/lib/languages/oxygene'));\n// hljs.registerLanguage('parser3',        require('highlight.js/lib/languages/parser3'));\n// hljs.registerLanguage('pf',             require('highlight.js/lib/languages/pf'));\n// hljs.registerLanguage('pony',           require('highlight.js/lib/languages/pony'));\n// hljs.registerLanguage('processing',     require('highlight.js/lib/languages/processing'));\n// hljs.registerLanguage('profile',        require('highlight.js/lib/languages/profile'));\n// hljs.registerLanguage('properties',     require('highlight.js/lib/languages/properties'));\n// hljs.registerLanguage('protobuf',       require('highlight.js/lib/languages/protobuf'));\n// hljs.registerLanguage('puppet',         require('highlight.js/lib/languages/puppet'));\n// hljs.registerLanguage('purebasic',      require('highlight.js/lib/languages/purebasic'));\n// hljs.registerLanguage('q',              require('highlight.js/lib/languages/q'));\n// hljs.registerLanguage('qml',            require('highlight.js/lib/languages/qml'));\n// hljs.registerLanguage('rib',            require('highlight.js/lib/languages/rib'));\n// hljs.registerLanguage('roboconf',       require('highlight.js/lib/languages/roboconf'));\n// hljs.registerLanguage('routeros',       require('highlight.js/lib/languages/routeros'));\n// hljs.registerLanguage('rsl',            require('highlight.js/lib/languages/rsl'));\n// hljs.registerLanguage('ruleslanguage',  require('highlight.js/lib/languages/ruleslanguage'));\n// hljs.registerLanguage('sas',            require('highlight.js/lib/languages/sas'));\n// hljs.registerLanguage('scheme',         require('highlight.js/lib/languages/scheme'));\n// hljs.registerLanguage('scilab',         require('highlight.js/lib/languages/scilab'));\n// hljs.registerLanguage('smali',          require('highlight.js/lib/languages/smali'));\n// hljs.registerLanguage('sml',            require('highlight.js/lib/languages/sml'));\n// hljs.registerLanguage('sqf',            require('highlight.js/lib/languages/sqf'));\n// hljs.registerLanguage('stan',           require('highlight.js/lib/languages/stan'));\n// hljs.registerLanguage('stata',          require('highlight.js/lib/languages/stata'));\n// hljs.registerLanguage('step21',         require('highlight.js/lib/languages/step21'));\n// hljs.registerLanguage('stylus',         require('highlight.js/lib/languages/stylus'));\n// hljs.registerLanguage('subunit',        require('highlight.js/lib/languages/subunit'));\n// hljs.registerLanguage('taggerscript',   require('highlight.js/lib/languages/taggerscript'));\n// hljs.registerLanguage('tap',            require('highlight.js/lib/languages/tap'));\n// hljs.registerLanguage('tcl',            require('highlight.js/lib/languages/tcl'));\n// hljs.registerLanguage('tex',            require('highlight.js/lib/languages/tex'));\n// hljs.registerLanguage('thrift',         require('highlight.js/lib/languages/thrift'));\n// hljs.registerLanguage('tp',             require('highlight.js/lib/languages/tp'));\n// hljs.registerLanguage('twig',           require('highlight.js/lib/languages/twig'));\n// hljs.registerLanguage('vala',           require('highlight.js/lib/languages/vala'));\n// hljs.registerLanguage('vbscript-html',  require('highlight.js/lib/languages/vbscript-html'));\n// hljs.registerLanguage('verilog',        require('highlight.js/lib/languages/verilog'));\n// hljs.registerLanguage('vhdl',           require('highlight.js/lib/languages/vhdl'));\n// hljs.registerLanguage('x86asm',         require('highlight.js/lib/languages/x86asm'));\n// hljs.registerLanguage('xl',             require('highlight.js/lib/languages/xl'));\n// hljs.registerLanguage('xquery',         require('highlight.js/lib/languages/xquery'));\n// hljs.registerLanguage('zephir',         require('highlight.js/lib/languages/zephir'));\n\nexport default hljs;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport SimpleMDE from 'simplemde';\nimport hljs from '../utils/highlighter';\nimport FilePicker from './FilePicker';\nimport { getExtensionFromPath } from '../utils/helpers';\n\nconst classNames = [\n  'editor-toolbar',\n  'CodeMirror',\n  'editor-preview-side',\n  'editor-statusbar',\n];\n\nclass MarkdownEditor extends Component {\n  componentDidMount() {\n    this.create();\n    window.hljs = hljs; // TODO: fix this after the next release of SimpleMDE\n  }\n\n  shouldComponentUpdate(nextProps) {\n    return nextProps.initialValue !== this.props.initialValue;\n  }\n\n  componentDidUpdate() {\n    this.destroy();\n    this.create();\n  }\n\n  componentWillUnmount() {\n    this.destroy();\n  }\n\n  create() {\n    const { onChange, onSave } = this.props;\n    let opts = Object.create(this.props);\n    opts['element'] = this.refs.text;\n    opts['autoDownloadFontAwesome'] = false;\n    opts['spellChecker'] = false;\n    opts['renderingConfig'] = {\n      codeSyntaxHighlighting: true,\n    };\n    opts['insertTexts'] = {\n      image: ['![', '](#url#)'],\n    };\n    let toolbarIcons = [\n      'bold',\n      'italic',\n      'heading',\n      '|',\n      'code',\n      'quote',\n      'unordered-list',\n      'ordered-list',\n      '|',\n      'link',\n      'image',\n      'table',\n      {\n        name: 'filepicker',\n        action: () => this.refs.filepicker.refs.trigger.click(),\n        className: 'fa fa-paperclip',\n        title: 'Insert Static File',\n      },\n      '|',\n      'preview',\n      'side-by-side',\n      'fullscreen',\n      '|',\n    ];\n    if (onSave) {\n      toolbarIcons.push({\n        name: 'save',\n        action: onSave,\n        className: 'fa fa-floppy-o',\n        title: 'Save',\n      });\n    }\n    opts['toolbar'] = toolbarIcons;\n    const editor = new SimpleMDE(opts);\n    if (editor.codemirror) {\n      editor.codemirror.on('change', () => {\n        onChange(editor.value());\n      });\n    }\n    this.editor = editor;\n  }\n\n  destroy() {\n    for (let i in classNames) {\n      let elementToRemove = this.refs.container.querySelector(\n        '.' + classNames[i]\n      );\n      elementToRemove && elementToRemove.remove();\n    }\n  }\n\n  // Adapted from an internal helper function within SimpleMDE package.\n  _replaceSelectedText = (cm, headNTail, url) => {\n    const startPoint = cm.getCursor('start');\n    const endPoint = cm.getCursor('end');\n    const text = cm.getSelection();\n\n    let [head, tail] = headNTail;\n    if (url) {\n      tail = tail.replace('#url#', url);\n    }\n\n    cm.replaceSelection(`${head}${text}${tail}`);\n    startPoint.ch += head.length;\n\n    if (startPoint !== endPoint) {\n      endPoint.ch += head.length;\n    }\n\n    cm.setSelection(startPoint, endPoint);\n    cm.focus();\n  };\n\n  handleFilePick = path => {\n    const { codemirror, options } = this.editor;\n    const { image, link } = options.insertTexts;\n    const url = `{{ '${path}' | relative_url }}`;\n    const ext = getExtensionFromPath(path);\n\n    const type = /png|jpg|gif|jpeg|svg|ico/i.test(ext) ? image : link;\n    this._replaceSelectedText(codemirror, type, url);\n  };\n\n  render() {\n    return (\n      <div>\n        <div style={{ display: 'none' }}>\n          <FilePicker ref=\"filepicker\" onPick={this.handleFilePick} />\n        </div>\n        <div ref=\"container\">\n          <textarea ref=\"text\" />\n        </div>\n      </div>\n    );\n  }\n}\n\nMarkdownEditor.propTypes = {\n  initialValue: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired,\n  onSave: PropTypes.func.isRequired,\n};\n\nexport default MarkdownEditor;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Splitter from './Splitter';\nimport InputPath from './form/InputPath';\nimport InputTitle from './form/InputTitle';\nimport MarkdownEditor from './MarkdownEditor';\nimport Metadata from '../containers/MetaFields';\n\nexport default function MarkdownPageBody({\n  type,\n  path,\n  body,\n  title,\n  onSave,\n  updateTitle,\n  updatePath,\n  updateBody,\n  metafields,\n  staticmetafields,\n}) {\n  return (\n    <div className=\"content-body\">\n      <InputPath onChange={updatePath} type={type} path={path} />\n      <InputTitle onChange={updateTitle} title={title} />\n      <MarkdownEditor\n        onChange={updateBody}\n        onSave={onSave}\n        placeholder=\"Body\"\n        initialValue={body}\n      />\n      <Splitter />\n      <Metadata fields={metafields} staticFields={staticmetafields} />\n    </div>\n  );\n}\n\nMarkdownPageBody.defaultProps = {\n  path: '',\n  body: '',\n  title: '',\n  metafields: {},\n  staticmetafields: {},\n};\n\nMarkdownPageBody.propTypes = {\n  updateBody: PropTypes.func.isRequired,\n  updatePath: PropTypes.func.isRequired,\n  updateTitle: PropTypes.func.isRequired,\n  onSave: PropTypes.func.isRequired,\n  type: PropTypes.string.isRequired,\n  path: PropTypes.string,\n  body: PropTypes.string,\n  title: PropTypes.string,\n  metafields: PropTypes.object,\n  staticmetafields: PropTypes.object,\n};\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { browserHistory, withRouter } from 'react-router';\nimport { HotKeys } from 'react-hotkeys';\nimport _ from 'underscore';\nimport DocumentTitle from 'react-document-title';\nimport Button from '../../components/Button';\nimport Errors from '../../components/Errors';\nimport Splitter from '../../components/Splitter';\nimport Breadcrumbs from '../../components/Breadcrumbs';\nimport MarkdownPageBody from '../../components/MarkdownPageBody';\nimport { fetchPage, deletePage, putPage } from '../../ducks/pages';\nimport { updateTitle, updateBody, updatePath } from '../../ducks/metadata';\nimport { clearErrors } from '../../ducks/utils';\nimport { preventDefault, getDocumentTitle } from '../../utils/helpers';\nimport { ADMIN_PREFIX } from '../../constants';\n\nimport translations from '../../translations';\nconst { getLeaveMessage, getDeleteMessage } = translations;\n\nexport class PageEdit extends Component {\n  componentDidMount() {\n    const { fetchPage, params, router, route } = this.props;\n    const [directory, ...rest] = params.splat;\n    const filename = rest.join('.');\n    fetchPage(directory, filename);\n\n    router.setRouteLeaveHook(route, this.routerWillLeave);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (this.props.updated !== nextProps.updated) {\n      const new_path = nextProps.page.path;\n      const path = this.props.page.path;\n      // redirect if the path is changed\n      if (new_path !== path) {\n        browserHistory.push(`${ADMIN_PREFIX}/pages/${new_path}`);\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    const { clearErrors, errors } = this.props;\n    errors.length && clearErrors();\n  }\n\n  routerWillLeave = nextLocation => {\n    if (this.props.fieldChanged) {\n      return getLeaveMessage();\n    }\n  };\n\n  handleClickSave = e => {\n    preventDefault(e);\n    const { putPage, fieldChanged, params } = this.props;\n    if (fieldChanged) {\n      const [directory, ...rest] = params.splat;\n      const filename = rest.join('.');\n      putPage(directory, filename);\n    }\n  };\n\n  handleClickDelete(name) {\n    const { deletePage, params } = this.props;\n    const confirm = window.confirm(getDeleteMessage(name));\n    if (confirm) {\n      const [directory, ...rest] = params.splat;\n      const filename = rest.join('.');\n      deletePage(directory, filename);\n      browserHistory.push(`${ADMIN_PREFIX}/pages/${directory || ''}`);\n    }\n  }\n\n  render() {\n    const {\n      isFetching,\n      page,\n      errors,\n      updateTitle,\n      updateBody,\n      updatePath,\n      updated,\n      fieldChanged,\n      params,\n    } = this.props;\n\n    if (isFetching) {\n      return null;\n    }\n\n    if (_.isEmpty(page)) {\n      return <h1>{`Could not find the page.`}</h1>;\n    }\n\n    const keyboardHandlers = {\n      save: this.handleClickSave,\n    };\n\n    const {\n      name,\n      raw_content,\n      http_url,\n      front_matter,\n      front_matter_defaults,\n    } = page;\n    const directory = params.splat[0];\n\n    const title = front_matter && front_matter.title ? front_matter.title : '';\n    const document_title = getDocumentTitle('pages', directory, title || name);\n\n    return (\n      <DocumentTitle title={document_title}>\n        <HotKeys handlers={keyboardHandlers} className=\"single\">\n          {errors.length > 0 && <Errors errors={errors} />}\n\n          <div className=\"content-header\">\n            <Breadcrumbs type=\"pages\" splat={directory} />\n          </div>\n\n          <div className=\"content-wrapper\">\n            <MarkdownPageBody\n              type=\"pages\"\n              updateTitle={updateTitle}\n              updatePath={updatePath}\n              updateBody={updateBody}\n              onSave={this.handleClickSave}\n              path={name}\n              title={title}\n              body={raw_content}\n              metafields={{ title, raw_content, path: name, ...front_matter }}\n              staticmetafields={front_matter_defaults}\n            />\n            <div className=\"content-side\">\n              <Button\n                onClick={this.handleClickSave}\n                type=\"save\"\n                active={fieldChanged}\n                triggered={updated}\n                block\n              />\n              <Button to={http_url} type=\"view\" active block />\n              <Splitter />\n              <Button\n                onClick={() => this.handleClickDelete(name)}\n                type=\"delete\"\n                active\n                block\n              />\n            </div>\n          </div>\n        </HotKeys>\n      </DocumentTitle>\n    );\n  }\n}\n\nPageEdit.propTypes = {\n  page: PropTypes.object.isRequired,\n  fetchPage: PropTypes.func.isRequired,\n  deletePage: PropTypes.func.isRequired,\n  putPage: PropTypes.func.isRequired,\n  updateTitle: PropTypes.func.isRequired,\n  updateBody: PropTypes.func.isRequired,\n  updatePath: PropTypes.func.isRequired,\n  clearErrors: PropTypes.func.isRequired,\n  isFetching: PropTypes.bool.isRequired,\n  errors: PropTypes.array.isRequired,\n  fieldChanged: PropTypes.bool.isRequired,\n  updated: PropTypes.bool.isRequired,\n  params: PropTypes.object.isRequired,\n  router: PropTypes.object.isRequired,\n  route: PropTypes.object.isRequired,\n};\n\nconst mapStateToProps = state => ({\n  page: state.pages.page,\n  isFetching: state.pages.isFetching,\n  fieldChanged: state.metadata.fieldChanged,\n  updated: state.pages.updated,\n  errors: state.utils.errors,\n});\n\nconst mapDispatchToProps = dispatch =>\n  bindActionCreators(\n    {\n      fetchPage,\n      deletePage,\n      putPage,\n      updateTitle,\n      updateBody,\n      updatePath,\n      clearErrors,\n    },\n    dispatch\n  );\n\nexport default withRouter(\n  connect(mapStateToProps, mapDispatchToProps)(PageEdit)\n);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { HotKeys } from 'react-hotkeys';\nimport Button from './Button';\nimport Errors from './Errors';\nimport Breadcrumbs from './Breadcrumbs';\nimport MarkdownPageBody from './MarkdownPageBody';\nimport { injectDefaultFields as defaultFields } from '../utils/metadata';\n\nexport default function CreateMarkdownPage({\n  type,\n  config,\n  errors,\n  updated,\n  updateBody,\n  updatePath,\n  updateTitle,\n  fieldChanged,\n  onClickSave,\n  params: { splat },\n}) {\n  const metaType = type === 'drafts' ? 'posts' : type;\n\n  return (\n    <HotKeys handlers={{ save: onClickSave }}>\n      {errors.length > 0 && <Errors errors={errors} />}\n\n      <div className=\"content-header\">\n        <Breadcrumbs type={type} splat={splat} />\n      </div>\n\n      <div className=\"content-wrapper\">\n        <MarkdownPageBody\n          type={type}\n          updatePath={updatePath}\n          updateTitle={updateTitle}\n          updateBody={updateBody}\n          onSave={onClickSave}\n          staticmetafields={defaultFields(config, splat, metaType)}\n        />\n        <div className=\"content-side\">\n          <Button\n            onClick={onClickSave}\n            type=\"create\"\n            active={fieldChanged}\n            triggered={updated}\n            block\n          />\n        </div>\n      </div>\n    </HotKeys>\n  );\n}\n\nCreateMarkdownPage.propTypes = {\n  type: PropTypes.string.isRequired,\n  config: PropTypes.object.isRequired,\n  params: PropTypes.object.isRequired,\n  errors: PropTypes.array.isRequired,\n  updated: PropTypes.bool.isRequired,\n  fieldChanged: PropTypes.bool.isRequired,\n  updateBody: PropTypes.func.isRequired,\n  updatePath: PropTypes.func.isRequired,\n  updateTitle: PropTypes.func.isRequired,\n  onClickSave: PropTypes.func.isRequired,\n};\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { browserHistory, withRouter } from 'react-router';\nimport DocumentTitle from 'react-document-title';\nimport CreateMarkdownPage from '../../components/CreateMarkdownPage';\nimport { updateTitle, updateBody, updatePath } from '../../ducks/metadata';\nimport { createPage } from '../../ducks/pages';\nimport { clearErrors } from '../../ducks/utils';\nimport { preventDefault, getDocumentTitle } from '../../utils/helpers';\nimport { ADMIN_PREFIX } from '../../constants';\n\nimport translations from '../../translations';\nconst { getLeaveMessage } = translations;\n\nexport class PageNew extends Component {\n  componentDidMount() {\n    const { router, route } = this.props;\n    router.setRouteLeaveHook(route, this.routerWillLeave);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (this.props.updated !== nextProps.updated) {\n      browserHistory.push(`${ADMIN_PREFIX}/pages/${nextProps.page.path}`);\n    }\n  }\n\n  componentWillUnmount() {\n    const { clearErrors, errors } = this.props;\n    errors.length && clearErrors();\n  }\n\n  routerWillLeave = nextLocation => {\n    if (this.props.fieldChanged) {\n      return getLeaveMessage();\n    }\n  };\n\n  handleClickSave = e => {\n    preventDefault(e);\n    const { fieldChanged, createPage, params } = this.props;\n    fieldChanged && createPage(params.splat);\n  };\n\n  render() {\n    const {\n      params,\n      config,\n      errors,\n      updated,\n      updateBody,\n      updatePath,\n      updateTitle,\n      fieldChanged,\n    } = this.props;\n\n    const title = getDocumentTitle('pages', params.splat, 'New page');\n\n    return (\n      <DocumentTitle title={title}>\n        <CreateMarkdownPage\n          type=\"pages\"\n          params={params}\n          config={config}\n          errors={errors}\n          updated={updated}\n          updateBody={updateBody}\n          updatePath={updatePath}\n          updateTitle={updateTitle}\n          fieldChanged={fieldChanged}\n          onClickSave={this.handleClickSave}\n        />\n      </DocumentTitle>\n    );\n  }\n}\n\nPageNew.propTypes = {\n  createPage: PropTypes.func.isRequired,\n  updateTitle: PropTypes.func.isRequired,\n  updateBody: PropTypes.func.isRequired,\n  updatePath: PropTypes.func.isRequired,\n  clearErrors: PropTypes.func.isRequired,\n  errors: PropTypes.array.isRequired,\n  fieldChanged: PropTypes.bool.isRequired,\n  updated: PropTypes.bool.isRequired,\n  router: PropTypes.object.isRequired,\n  route: PropTypes.object.isRequired,\n  params: PropTypes.object.isRequired,\n  config: PropTypes.object.isRequired,\n  page: PropTypes.object.isRequired,\n};\n\nconst mapStateToProps = state => ({\n  page: state.pages.page,\n  fieldChanged: state.metadata.fieldChanged,\n  errors: state.utils.errors,\n  updated: state.pages.updated,\n  config: state.config.config,\n});\n\nconst mapDispatchToProps = dispatch =>\n  bindActionCreators(\n    {\n      updateTitle,\n      updateBody,\n      updatePath,\n      createPage,\n      clearErrors,\n    },\n    dispatch\n  );\n\nexport default withRouter(\n  connect(mapStateToProps, mapDispatchToProps)(PageNew)\n);\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from 'react-router';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport _ from 'underscore';\nimport moment from 'moment';\nimport DocumentTitle from 'react-document-title';\nimport InputSearch from '../../components/form/InputSearch';\nimport Breadcrumbs from '../../components/Breadcrumbs';\nimport Button from '../../components/Button';\nimport Icon from '../../components/Icon';\nimport {\n  fetchCollection,\n  deleteDocument,\n  filterBySearchInput,\n} from '../../ducks/collections';\nimport { search } from '../../ducks/utils';\nimport { getDocumentTitle } from '../../utils/helpers';\nimport { ADMIN_PREFIX } from '../../constants';\n\nimport translations from '../../translations';\nconst { getDeleteMessage, getNotFoundMessage } = translations;\n\nexport class Documents extends Component {\n  componentDidMount() {\n    const { fetchCollection, params } = this.props;\n    fetchCollection(params.collection_name, params.splat);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const { fetchCollection, params } = nextProps;\n    // refetch the collection when navigating between collections or when splat is changed\n    if (\n      params.splat !== this.props.params.splat ||\n      params.collection_name !== this.props.params.collection_name\n    ) {\n      fetchCollection(params.collection_name, params.splat);\n    }\n  }\n\n  handleClickDelete(filename) {\n    const { deleteDocument, params } = this.props;\n    const confirm = window.confirm(getDeleteMessage(filename));\n    confirm && deleteDocument(params.collection_name, params.splat, filename);\n  }\n\n  renderTable() {\n    return (\n      <div className=\"content-table\">\n        <table>\n          <thead>\n            <tr>\n              <th>Name</th>\n              <th>Date</th>\n              <th className=\"th-actions\">Actions</th>\n            </tr>\n          </thead>\n          <tbody>{this.renderRows()}</tbody>\n        </table>\n      </div>\n    );\n  }\n\n  renderFileRow(doc) {\n    const { id, name, title, http_url, collection, relative_path } = doc;\n    const to = `${ADMIN_PREFIX}/collections/${collection}/${relative_path}`;\n    // date w/o timezone\n    let date = doc.date.substring(0, doc.date.lastIndexOf(' '));\n    date =\n      moment(date).format('hh:mm:ss') === '12:00:00'\n        ? moment(date).format('ll')\n        : moment(date).format('lll');\n\n    return (\n      <tr key={id}>\n        <td className=\"row-title\">\n          <strong>\n            <Link to={to}>\n              <Icon name=\"file-text-o\" />\n              {title || name}\n            </Link>\n          </strong>\n        </td>\n        <td>{date}</td>\n        <td>\n          <div className=\"row-actions\">\n            <Button\n              onClick={() => this.handleClickDelete(name)}\n              type=\"delete\"\n              active\n              thin\n            />\n            {http_url && <Button to={http_url} type=\"view\" active thin />}\n          </div>\n        </td>\n      </tr>\n    );\n  }\n\n  renderDirectoryRow(directory) {\n    const { params: { collection_name } } = this.props;\n    const { name, relative_path, modified_time } = directory;\n    const to = `${ADMIN_PREFIX}/collections/${collection_name}/${relative_path}`;\n    // date w/o timezone\n    let date = modified_time.substring(0, modified_time.lastIndexOf(' '));\n    date = moment(date).format('ll');\n    return (\n      <tr key={name}>\n        <td className=\"row-title\">\n          <strong>\n            <Link to={to}>\n              <Icon name=\"folder\" />\n              {name}\n            </Link>\n          </strong>\n        </td>\n        <td>{date}</td>\n        <td />\n      </tr>\n    );\n  }\n\n  renderRows() {\n    const { documents } = this.props;\n    return _.map(documents, entry => {\n      if (entry.type && entry.type === 'directory') {\n        return this.renderDirectoryRow(entry);\n      } else {\n        return this.renderFileRow(entry);\n      }\n    });\n  }\n\n  render() {\n    const { isFetching, documents, search, params } = this.props;\n    const { collection_name } = params;\n\n    if (isFetching) {\n      return null;\n    }\n\n    const splat = params.splat || '';\n    const to = params.splat\n      ? `${ADMIN_PREFIX}/collections/${collection_name}/${splat}/new`\n      : `${ADMIN_PREFIX}/collections/${collection_name}/new`;\n\n    const document_title = getDocumentTitle(collection_name, params.splat);\n\n    return (\n      <DocumentTitle title={document_title}>\n        <div>\n          <div className=\"content-header\">\n            <Breadcrumbs type={collection_name} splat={splat} />\n            <div className=\"page-buttons\">\n              <Link className=\"btn btn-active\" to={to}>\n                {collection_name === 'posts' ? 'New post' : 'New document'}\n              </Link>\n            </div>\n            <div className=\"pull-right\">\n              <InputSearch searchBy=\"title\" search={search} />\n            </div>\n          </div>\n          {documents.length > 0 && this.renderTable()}\n          {!documents.length && <h1>{getNotFoundMessage('documents')}</h1>}\n        </div>\n      </DocumentTitle>\n    );\n  }\n}\n\nDocuments.propTypes = {\n  isFetching: PropTypes.bool.isRequired,\n  documents: PropTypes.array.isRequired,\n  fetchCollection: PropTypes.func.isRequired,\n  deleteDocument: PropTypes.func.isRequired,\n  search: PropTypes.func.isRequired,\n  params: PropTypes.object.isRequired,\n};\n\nconst mapStateToProps = state => ({\n  documents: filterBySearchInput(state.collections.entries, state.utils.input),\n  isFetching: state.collections.isFetching,\n});\n\nconst mapDispatchToProps = dispatch =>\n  bindActionCreators(\n    {\n      fetchCollection,\n      deleteDocument,\n      search,\n    },\n    dispatch\n  );\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Documents);\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { browserHistory, withRouter } from 'react-router';\nimport { HotKeys } from 'react-hotkeys';\nimport _ from 'underscore';\nimport DocumentTitle from 'react-document-title';\nimport Button from '../../components/Button';\nimport Errors from '../../components/Errors';\nimport Splitter from '../../components/Splitter';\nimport Breadcrumbs from '../../components/Breadcrumbs';\nimport MarkdownPageBody from '../../components/MarkdownPageBody';\nimport {\n  fetchDocument,\n  deleteDocument,\n  putDocument,\n} from '../../ducks/collections';\nimport { updateTitle, updateBody, updatePath } from '../../ducks/metadata';\nimport { clearErrors } from '../../ducks/utils';\nimport { preventDefault, getDocumentTitle } from '../../utils/helpers';\nimport { ADMIN_PREFIX } from '../../constants';\n\nimport translations from '../../translations';\nconst { getLeaveMessage, getDeleteMessage, getNotFoundMessage } = translations;\n\nexport class DocumentEdit extends Component {\n  componentDidMount() {\n    const { fetchDocument, params, router, route } = this.props;\n    const [directory, ...rest] = params.splat;\n    const filename = rest.join('.');\n    fetchDocument(params.collection_name, directory, filename);\n    router.setRouteLeaveHook(route, this.routerWillLeave);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const { currentDocument } = this.props;\n    if (this.props.updated !== nextProps.updated) {\n      const new_path = nextProps.currentDocument.path;\n      const path = currentDocument.path;\n      // redirect if the path is changed\n      if (new_path !== path) {\n        browserHistory.push(\n          `${ADMIN_PREFIX}/collections/${new_path.substring(1)}` // remove `_`\n        );\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    const { clearErrors, errors } = this.props;\n    errors.length && clearErrors();\n  }\n\n  routerWillLeave = nextLocation => {\n    if (this.props.fieldChanged) {\n      return getLeaveMessage();\n    }\n  };\n\n  handleClickSave = e => {\n    preventDefault(e);\n    const { putDocument, fieldChanged, params } = this.props;\n    if (fieldChanged) {\n      const collection = params.collection_name;\n      const [directory, ...rest] = params.splat;\n      const filename = rest.join('.');\n      putDocument(collection, directory, filename);\n    }\n  };\n\n  handleClickDelete = () => {\n    const { deleteDocument, params } = this.props;\n    const [directory, ...rest] = params.splat;\n    const filename = rest.join('.');\n    const confirm = window.confirm(getDeleteMessage(filename));\n    if (confirm) {\n      const collection = params.collection_name;\n      deleteDocument(collection, directory, filename);\n      browserHistory.push(\n        `${ADMIN_PREFIX}/collections/${collection}/${directory || ''}`\n      );\n    }\n  };\n\n  render() {\n    const {\n      isFetching,\n      currentDocument,\n      errors,\n      updateTitle,\n      updateBody,\n      updatePath,\n      updated,\n      fieldChanged,\n      params,\n    } = this.props;\n\n    if (isFetching) {\n      return null;\n    }\n\n    if (_.isEmpty(currentDocument)) {\n      return <h1>{getNotFoundMessage('document')}</h1>;\n    }\n\n    const {\n      title,\n      raw_content,\n      http_url,\n      collection,\n      front_matter,\n      front_matter_defaults,\n      name,\n    } = currentDocument;\n    const directory = params.splat[0];\n\n    const keyboardHandlers = {\n      save: this.handleClickSave,\n    };\n\n    const document_title = getDocumentTitle(collection, directory, title);\n\n    return (\n      <DocumentTitle title={document_title}>\n        <HotKeys handlers={keyboardHandlers} className=\"single\">\n          {errors.length > 0 && <Errors errors={errors} />}\n\n          <div className=\"content-header\">\n            <Breadcrumbs type={collection} splat={directory} />\n          </div>\n\n          <div className=\"content-wrapper\">\n            <MarkdownPageBody\n              type={collection}\n              path={name}\n              title={title}\n              body={raw_content}\n              updatePath={updatePath}\n              updateTitle={updateTitle}\n              updateBody={updateBody}\n              onSave={this.handleClickSave}\n              metafields={{ title, path: name, raw_content, ...front_matter }}\n              staticmetafields={front_matter_defaults}\n            />\n            <div className=\"content-side\">\n              <Button\n                onClick={this.handleClickSave}\n                type=\"save\"\n                active={fieldChanged}\n                triggered={updated}\n                block\n              />\n              <Button to={http_url} type=\"view\" active block />\n              <Splitter />\n              <Button\n                onClick={this.handleClickDelete}\n                type=\"delete\"\n                active\n                block\n              />\n            </div>\n          </div>\n        </HotKeys>\n      </DocumentTitle>\n    );\n  }\n}\n\nDocumentEdit.propTypes = {\n  currentDocument: PropTypes.object.isRequired,\n  fetchDocument: PropTypes.func.isRequired,\n  deleteDocument: PropTypes.func.isRequired,\n  putDocument: PropTypes.func.isRequired,\n  updateTitle: PropTypes.func.isRequired,\n  updateBody: PropTypes.func.isRequired,\n  updatePath: PropTypes.func.isRequired,\n  clearErrors: PropTypes.func.isRequired,\n  isFetching: PropTypes.bool.isRequired,\n  errors: PropTypes.array.isRequired,\n  updated: PropTypes.bool.isRequired,\n  fieldChanged: PropTypes.bool.isRequired,\n  params: PropTypes.object.isRequired,\n  router: PropTypes.object.isRequired,\n  route: PropTypes.object.isRequired,\n};\n\nconst mapStateToProps = state => ({\n  currentDocument: state.collections.currentDocument,\n  isFetching: state.collections.isFetching,\n  fieldChanged: state.metadata.fieldChanged,\n  updated: state.collections.updated,\n  errors: state.utils.errors,\n});\n\nconst mapDispatchToProps = dispatch =>\n  bindActionCreators(\n    {\n      fetchDocument,\n      deleteDocument,\n      putDocument,\n      updateTitle,\n      updateBody,\n      updatePath,\n      clearErrors,\n    },\n    dispatch\n  );\n\nexport default withRouter(\n  connect(mapStateToProps, mapDispatchToProps)(DocumentEdit)\n);\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { browserHistory, withRouter } from 'react-router';\nimport DocumentTitle from 'react-document-title';\nimport CreateMarkdownPage from '../../components/CreateMarkdownPage';\nimport { updateTitle, updateBody, updatePath } from '../../ducks/metadata';\nimport { createDocument } from '../../ducks/collections';\nimport { clearErrors } from '../../ducks/utils';\nimport { preventDefault, getDocumentTitle } from '../../utils/helpers';\nimport { ADMIN_PREFIX } from '../../constants';\n\nimport translations from '../../translations';\nconst { getLeaveMessage } = translations;\n\nexport class DocumentNew extends Component {\n  componentDidMount() {\n    const { router, route } = this.props;\n    router.setRouteLeaveHook(route, this.routerWillLeave);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (this.props.updated !== nextProps.updated) {\n      const path = nextProps.currentDocument.path;\n      const splat = path.substr(path.indexOf('/') + 1, path.length);\n      browserHistory.push(\n        `${ADMIN_PREFIX}/collections/${nextProps.currentDocument.collection}/${splat}`\n      );\n    }\n  }\n\n  componentWillUnmount() {\n    const { clearErrors, errors } = this.props;\n    errors.length && clearErrors();\n  }\n\n  routerWillLeave = nextLocation => {\n    if (this.props.fieldChanged) {\n      return getLeaveMessage();\n    }\n  };\n\n  handleClickSave = e => {\n    preventDefault(e);\n    const { fieldChanged, createDocument, params } = this.props;\n    fieldChanged && createDocument(params.collection_name, params.splat);\n  };\n\n  render() {\n    const {\n      params,\n      config,\n      errors,\n      updated,\n      updateBody,\n      updatePath,\n      updateTitle,\n      fieldChanged,\n    } = this.props;\n\n    const collection = params.collection_name;\n    const title = getDocumentTitle(collection, params.splat, 'New document');\n\n    return (\n      <DocumentTitle title={title}>\n        <CreateMarkdownPage\n          type={collection}\n          params={params}\n          config={config}\n          errors={errors}\n          updated={updated}\n          updateBody={updateBody}\n          updatePath={updatePath}\n          updateTitle={updateTitle}\n          fieldChanged={fieldChanged}\n          onClickSave={this.handleClickSave}\n        />\n      </DocumentTitle>\n    );\n  }\n}\n\nDocumentNew.propTypes = {\n  createDocument: PropTypes.func.isRequired,\n  updateTitle: PropTypes.func.isRequired,\n  updateBody: PropTypes.func.isRequired,\n  updatePath: PropTypes.func.isRequired,\n  clearErrors: PropTypes.func.isRequired,\n  errors: PropTypes.array.isRequired,\n  fieldChanged: PropTypes.bool.isRequired,\n  updated: PropTypes.bool.isRequired,\n  params: PropTypes.object.isRequired,\n  router: PropTypes.object.isRequired,\n  route: PropTypes.object.isRequired,\n  config: PropTypes.object.isRequired,\n  currentDocument: PropTypes.object.isRequired,\n};\n\nconst mapStateToProps = state => ({\n  currentDocument: state.collections.currentDocument,\n  fieldChanged: state.metadata.fieldChanged,\n  errors: state.utils.errors,\n  updated: state.collections.updated,\n  config: state.config.config,\n});\n\nconst mapDispatchToProps = dispatch =>\n  bindActionCreators(\n    {\n      updateTitle,\n      updateBody,\n      updatePath,\n      createDocument,\n      clearErrors,\n    },\n    dispatch\n  );\n\nexport default withRouter(\n  connect(mapStateToProps, mapDispatchToProps)(DocumentNew)\n);\n","import { CLEAR_ERRORS, validationError, filterDeleted } from './utils';\nimport { get, put, del } from '../utils/fetch';\nimport { datafilesAPIUrl, datafileAPIUrl } from '../constants/api';\nimport {\n  toYAML,\n  trimObject,\n  computeRelativePath,\n  getExtensionFromPath,\n} from '../utils/helpers';\nimport { validator } from '../utils/validation';\n\nimport translations from '../translations';\nconst { getContentRequiredMessage, getFilenameRequiredMessage } = translations;\n\n// Action Types\nexport const FETCH_DATAFILES_REQUEST = 'FETCH_DATAFILES_REQUEST';\nexport const FETCH_DATAFILES_SUCCESS = 'FETCH_DATAFILES_SUCCESS';\nexport const FETCH_DATAFILES_FAILURE = 'FETCH_DATAFILES_FAILURE';\nexport const FETCH_DATAFILE_REQUEST = 'FETCH_DATAFILE_REQUEST';\nexport const FETCH_DATAFILE_SUCCESS = 'FETCH_DATAFILE_SUCCESS';\nexport const FETCH_DATAFILE_FAILURE = 'FETCH_DATAFILE_FAILURE';\nexport const PUT_DATAFILE_REQUEST = 'PUT_DATAFILE_REQUEST';\nexport const PUT_DATAFILE_SUCCESS = 'PUT_DATAFILE_SUCCESS';\nexport const PUT_DATAFILE_FAILURE = 'PUT_DATAFILE_FAILURE';\nexport const DELETE_DATAFILE_REQUEST = 'DELETE_DATAFILE_REQUEST';\nexport const DELETE_DATAFILE_SUCCESS = 'DELETE_DATAFILE_SUCCESS';\nexport const DELETE_DATAFILE_FAILURE = 'DELETE_DATAFILE_FAILURE';\nexport const DATAFILE_CHANGED = 'DATAFILE_CHANGED';\n\n// Actions\nexport const fetchDataFiles = (directory = '') => dispatch => {\n  dispatch({ type: FETCH_DATAFILES_REQUEST });\n  return get(\n    datafilesAPIUrl(directory),\n    { type: FETCH_DATAFILES_SUCCESS, name: 'files' },\n    { type: FETCH_DATAFILES_FAILURE, name: 'error' },\n    dispatch\n  );\n};\n\nexport const fetchDataFile = (directory, filename) => dispatch => {\n  dispatch({ type: FETCH_DATAFILE_REQUEST });\n  return get(\n    datafileAPIUrl(directory, filename),\n    { type: FETCH_DATAFILE_SUCCESS, name: 'file' },\n    { type: FETCH_DATAFILE_FAILURE, name: 'error' },\n    dispatch\n  );\n};\n\n/**\n * Creates and updates a data file.\n * @param {String} directory : Dirname of data file\n * @param {String} filename  : The data file\n * @param {Object} data      : Content to be written to data file\n * @param {String} new_path  : File path relative to config['source']\n * @param {String} source    : Point of origin of file-content data.\n *                             Either the default `#brace-editor`, or `<DataGUI/>`\n */\nexport const putDataFile = (\n  directory,\n  filename,\n  data,\n  new_path = '',\n  source = 'editor'\n) => (dispatch, getState) => {\n  const ext = getExtensionFromPath(new_path || filename);\n\n  if (source === 'gui') {\n    const json = /json/i.test(ext);\n    let metadata = getState().metadata.metadata;\n    metadata = trimObject(metadata);\n    data = json ? JSON.stringify(metadata, null, 2) : toYAML(metadata);\n  }\n\n  const payload = new_path\n    ? { path: new_path, raw_content: data }\n    : { raw_content: data };\n\n  // handle errors\n  const errors = validateDatafile(filename, data);\n  if (errors.length) {\n    return dispatch(validationError(errors));\n  }\n  dispatch({ type: CLEAR_ERRORS });\n\n  return put(\n    datafileAPIUrl(directory, filename),\n    JSON.stringify(payload),\n    { type: PUT_DATAFILE_SUCCESS, name: 'file' },\n    { type: PUT_DATAFILE_FAILURE, name: 'error' },\n    dispatch\n  );\n};\n\nexport const deleteDataFile = (directory, filename) => dispatch => {\n  const relative_path = computeRelativePath(directory, filename);\n  return del(\n    datafileAPIUrl(directory, filename),\n    { type: DELETE_DATAFILE_SUCCESS, name: 'file', id: relative_path },\n    { type: DELETE_DATAFILE_FAILURE, name: 'error' },\n    dispatch\n  );\n};\n\nexport const onDataFileChanged = () => ({\n  type: DATAFILE_CHANGED,\n});\n\nconst validateDatafile = (filename, data) =>\n  validator(\n    { filename, data },\n    { filename: 'required', data: 'required' },\n    {\n      'filename.required': getFilenameRequiredMessage(),\n      'data.required': getContentRequiredMessage(),\n    }\n  );\n\n// Reducer\nexport default function datafiles(\n  state = {\n    files: [],\n    currentFile: {},\n    isFetching: false,\n    updated: false,\n    datafileChanged: false,\n    fieldChanged: false,\n  },\n  action\n) {\n  switch (action.type) {\n    case FETCH_DATAFILES_REQUEST:\n    case FETCH_DATAFILE_REQUEST:\n      return {\n        ...state,\n        isFetching: true,\n      };\n    case FETCH_DATAFILES_SUCCESS:\n      return {\n        ...state,\n        files: action.files,\n        isFetching: false,\n        currentFile: {},\n      };\n    case FETCH_DATAFILES_FAILURE:\n      return {\n        ...state,\n        isFetching: false,\n        currentFile: {},\n      };\n    case FETCH_DATAFILE_SUCCESS:\n      return {\n        ...state,\n        currentFile: action.file,\n        isFetching: false,\n      };\n    case FETCH_DATAFILE_FAILURE:\n      return {\n        ...state,\n        currentFile: {},\n        isFetching: false,\n      };\n    case PUT_DATAFILE_SUCCESS:\n      return {\n        ...state,\n        currentFile: action.file,\n        updated: true,\n        datafileChanged: false,\n      };\n    case PUT_DATAFILE_FAILURE:\n      return {\n        ...state,\n        datafileChanged: false,\n      };\n    case DELETE_DATAFILE_SUCCESS:\n      return {\n        ...state,\n        files: filterDeleted(state.files, action.id),\n      };\n    case DATAFILE_CHANGED:\n      return {\n        ...state,\n        datafileChanged: true,\n        updated: false,\n      };\n    default:\n      return {\n        ...state,\n        updated: false,\n        datafileChanged: false,\n      };\n  }\n}\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport DocumentTitle from 'react-document-title';\nimport Explorer from '../../components/Explorer';\nimport { search, filterBySearchInput } from '../../ducks/utils';\nimport { fetchDataFiles, deleteDataFile } from '../../ducks/datafiles';\nimport { getDocumentTitle } from '../../utils/helpers';\n\nexport class DataFiles extends Component {\n  componentDidMount() {\n    const { fetchDataFiles, params } = this.props;\n    fetchDataFiles(params.splat);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const { fetchDataFiles } = nextProps;\n    if (this.props.params.splat !== nextProps.params.splat) {\n      fetchDataFiles(nextProps.params.splat);\n    }\n  }\n\n  render() {\n    const { isFetching, files, search, params, deleteDataFile } = this.props;\n\n    if (isFetching) {\n      return null;\n    }\n\n    const title = getDocumentTitle('data files', params.splat);\n\n    return (\n      <DocumentTitle title={title}>\n        <Explorer\n          type=\"datafiles\"\n          items={files}\n          params={params}\n          newBtnLabel=\"New data file\"\n          search={search}\n          deleteItem={deleteDataFile}\n        />\n      </DocumentTitle>\n    );\n  }\n}\n\nDataFiles.propTypes = {\n  files: PropTypes.array.isRequired,\n  fetchDataFiles: PropTypes.func.isRequired,\n  deleteDataFile: PropTypes.func.isRequired,\n  isFetching: PropTypes.bool.isRequired,\n  search: PropTypes.func.isRequired,\n  params: PropTypes.object.isRequired,\n};\n\nconst mapStateToProps = state => ({\n  files: filterBySearchInput(state.datafiles.files, state.utils.input),\n  isFetching: state.datafiles.isFetching,\n});\n\nconst mapDispatchToProps = dispatch =>\n  bindActionCreators(\n    {\n      fetchDataFiles,\n      deleteDataFile,\n      search,\n    },\n    dispatch\n  );\n\nexport default connect(mapStateToProps, mapDispatchToProps)(DataFiles);\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { browserHistory, withRouter } from 'react-router';\nimport _ from 'underscore';\nimport { HotKeys } from 'react-hotkeys';\nimport DocumentTitle from 'react-document-title';\nimport DataGUI from '../../components/DataGUI';\nimport Breadcrumbs from '../../components/Breadcrumbs';\nimport InputPath from '../../components/form/InputPath';\nimport Splitter from '../../components/Splitter';\nimport Errors from '../../components/Errors';\nimport Editor from '../../components/Editor';\nimport Button from '../../components/Button';\nimport { clearErrors } from '../../ducks/utils';\nimport {\n  getFilenameFromPath,\n  getExtensionFromPath,\n  preventDefault,\n  getDocumentTitle,\n} from '../../utils/helpers';\nimport {\n  fetchDataFile,\n  putDataFile,\n  deleteDataFile,\n  onDataFileChanged,\n} from '../../ducks/datafiles';\nimport { ADMIN_PREFIX } from '../../constants';\n\nimport translations from '../../translations';\nconst { getLeaveMessage, getDeleteMessage, getNotFoundMessage } = translations;\n\nexport class DataFileEdit extends Component {\n  state = {\n    guiView: false,\n  };\n\n  componentDidMount() {\n    const { fetchDataFile, params, router, route } = this.props;\n    const [directory, ...rest] = params.splat;\n    const filename = rest.join('.');\n    router.setRouteLeaveHook(route, this.routerWillLeave);\n    fetchDataFile(directory, filename);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (this.props.updated !== nextProps.updated) {\n      const new_path = nextProps.datafile.path;\n      const path = this.props.datafile.path;\n\n      // redirect if the path is changed\n      if (new_path !== path) {\n        browserHistory.push(\n          `${ADMIN_PREFIX}/datafiles/${nextProps.datafile.relative_path}`\n        );\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    const { clearErrors, errors } = this.props;\n    errors.length && clearErrors();\n  }\n\n  routerWillLeave = nextLocation => {\n    const { datafileChanged, fieldChanged } = this.props;\n    if (datafileChanged || fieldChanged) {\n      return getLeaveMessage();\n    }\n  };\n\n  toggleView = () => {\n    this.setState(state => {\n      return { guiView: !state.guiView };\n    });\n  };\n\n  handleClickSave = e => {\n    preventDefault(e);\n    const {\n      datafile,\n      datafileChanged,\n      fieldChanged,\n      putDataFile,\n      params,\n    } = this.props;\n    const { path, relative_path } = datafile;\n    const data_dir = path.replace(relative_path, '');\n\n    let name, data, mode;\n    const [directory, ...rest] = params.splat;\n    const filename = rest.join('.');\n    if (datafileChanged || fieldChanged) {\n      if (this.state.guiView) {\n        const { filepath, extname } = this.refs.gui.refs;\n        name = filepath.value + extname.value;\n        data = null;\n        mode = 'gui';\n      } else {\n        const { input } = this.refs.inputpath.refs;\n        name = input.value || input.props.defaultValue;\n        data = this.refs.editor.getValue();\n        mode = 'editor';\n      }\n\n      const data_path = directory\n        ? data_dir + `${directory}/` + name\n        : data_dir + name;\n\n      const new_path = data_path !== path ? data_path : '';\n      putDataFile(directory, filename, data, new_path, mode);\n    }\n  };\n\n  handleClickDelete(path) {\n    const { deleteDataFile, params } = this.props;\n    const confirm = window.confirm(getDeleteMessage(path));\n\n    if (confirm) {\n      const directory = params.splat[0];\n      const filename = getFilenameFromPath(path);\n      deleteDataFile(directory, filename);\n      const dir = directory ? `/${directory}` : '';\n      browserHistory.push(`${ADMIN_PREFIX}/datafiles${dir}`);\n    }\n  }\n\n  renderAside() {\n    const { datafile, datafileChanged, fieldChanged, updated } = this.props;\n    const { path } = datafile;\n    const filename = getFilenameFromPath(path);\n    const ext = getExtensionFromPath(path);\n    const guiSupport = /ya?ml|json/i.test(ext);\n\n    return (\n      <div className=\"content-side\">\n        <Button\n          onClick={this.handleClickSave}\n          type=\"save\"\n          active={datafileChanged || fieldChanged}\n          triggered={updated}\n          block\n        />\n        {guiSupport && (\n          <Button\n            onClick={this.toggleView}\n            type=\"view-toggle\"\n            triggered={this.state.guiView}\n            active\n            block\n          />\n        )}\n        <Splitter />\n        <Button\n          onClick={() => this.handleClickDelete(filename)}\n          type=\"delete\"\n          active\n          block\n        />\n      </div>\n    );\n  }\n\n  renderContentBody(filename) {\n    const { datafile, datafileChanged, onDataFileChanged } = this.props;\n    const { raw_content, content, slug, ext } = datafile;\n    const { guiView } = this.state;\n\n    if (guiView && content) {\n      return (\n        <div className=\"content-body\">\n          <DataGUI\n            fields={content}\n            slug={slug}\n            ext={ext}\n            onChange={onDataFileChanged}\n            ref=\"gui\"\n          />\n        </div>\n      );\n    } else if (!guiView && raw_content) {\n      return (\n        <div className=\"content-body\">\n          <InputPath\n            onChange={onDataFileChanged}\n            type=\"data files\"\n            path={filename}\n            ref=\"inputpath\"\n          />\n          <Editor\n            editorChanged={datafileChanged}\n            onEditorChange={onDataFileChanged}\n            content={raw_content}\n            type={ext}\n            ref=\"editor\"\n          />\n        </div>\n      );\n    }\n  }\n\n  render() {\n    const { datafile, isFetching, params, errors } = this.props;\n\n    if (isFetching) {\n      return null;\n    }\n\n    if (_.isEmpty(datafile.content)) {\n      return <h1>{getNotFoundMessage('content')}</h1>;\n    }\n\n    const directory = params.splat[0];\n    const filename = getFilenameFromPath(datafile.path);\n\n    const keyboardHandlers = {\n      save: this.handleClickSave,\n    };\n\n    const document_title = getDocumentTitle('data files', directory, filename);\n\n    return (\n      <DocumentTitle title={document_title}>\n        <HotKeys handlers={keyboardHandlers} className=\"single\">\n          {errors.length > 0 && <Errors errors={errors} />}\n\n          <div className=\"content-header\">\n            <Breadcrumbs type=\"datafiles\" splat={directory} />\n          </div>\n\n          <div className=\"content-wrapper\">\n            {this.renderContentBody(filename)}\n            {this.renderAside()}\n          </div>\n        </HotKeys>\n      </DocumentTitle>\n    );\n  }\n}\n\nDataFileEdit.propTypes = {\n  fetchDataFile: PropTypes.func.isRequired,\n  putDataFile: PropTypes.func.isRequired,\n  deleteDataFile: PropTypes.func.isRequired,\n  clearErrors: PropTypes.func.isRequired,\n  datafile: PropTypes.object.isRequired,\n  onDataFileChanged: PropTypes.func.isRequired,\n  isFetching: PropTypes.bool.isRequired,\n  updated: PropTypes.bool.isRequired,\n  datafileChanged: PropTypes.bool.isRequired,\n  fieldChanged: PropTypes.bool.isRequired,\n  errors: PropTypes.array.isRequired,\n  params: PropTypes.object.isRequired,\n  router: PropTypes.object.isRequired,\n  route: PropTypes.object.isRequired,\n};\n\nconst mapStateToProps = state => ({\n  datafile: state.datafiles.currentFile,\n  isFetching: state.datafiles.isFetching,\n  updated: state.datafiles.updated,\n  datafileChanged: state.datafiles.datafileChanged,\n  fieldChanged: state.metadata.fieldChanged,\n  errors: state.utils.errors,\n});\n\nconst mapDispatchToProps = dispatch =>\n  bindActionCreators(\n    {\n      fetchDataFile,\n      putDataFile,\n      deleteDataFile,\n      onDataFileChanged,\n      clearErrors,\n    },\n    dispatch\n  );\n\nexport default withRouter(\n  connect(mapStateToProps, mapDispatchToProps)(DataFileEdit)\n);\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { browserHistory, withRouter } from 'react-router';\nimport { HotKeys } from 'react-hotkeys';\nimport DocumentTitle from 'react-document-title';\nimport DataGUI from '../../components/DataGUI';\nimport Errors from '../../components/Errors';\nimport Editor from '../../components/Editor';\nimport Button from '../../components/Button';\nimport Breadcrumbs from '../../components/Breadcrumbs';\nimport InputPath from '../../components/form/InputPath';\nimport { clearErrors } from '../../ducks/utils';\nimport { putDataFile, onDataFileChanged } from '../../ducks/datafiles';\nimport { preventDefault, getDocumentTitle } from '../../utils/helpers';\nimport { ADMIN_PREFIX } from '../../constants';\n\nimport translations from '../../translations';\nconst { getLeaveMessage } = translations;\n\nexport class DataFileNew extends Component {\n  state = {\n    guiView: false,\n  };\n\n  componentDidMount() {\n    const { router, route } = this.props;\n    router.setRouteLeaveHook(route, this.routerWillLeave);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (this.props.updated !== nextProps.updated) {\n      browserHistory.push(\n        `${ADMIN_PREFIX}/datafiles/${nextProps.datafile.relative_path}`\n      );\n    }\n  }\n\n  componentWillUnmount() {\n    const { clearErrors, errors } = this.props;\n    errors.length && clearErrors();\n  }\n\n  routerWillLeave = nextLocation => {\n    if (!this.state.guiView && this.props.datafileChanged) {\n      return getLeaveMessage();\n    }\n  };\n\n  toggleView = () => {\n    this.setState(state => {\n      return { guiView: !state.guiView };\n    });\n  };\n\n  handleClickSave = e => {\n    preventDefault(e);\n    const { datafileChanged, fieldChanged, putDataFile, params } = this.props;\n    let filename;\n\n    if (datafileChanged || fieldChanged) {\n      if (this.state.guiView) {\n        const { filepath, extname } = this.refs.gui.refs;\n        filename = filepath.value + extname.value;\n        putDataFile(params.splat, filename, null, null, 'gui');\n      } else {\n        filename = this.refs.inputpath.refs.input.value;\n        putDataFile(params.splat, filename, this.refs.editor.getValue());\n      }\n    }\n  };\n\n  renderAside() {\n    const { datafileChanged, fieldChanged, updated } = this.props;\n\n    return (\n      <div className=\"content-side\">\n        <Button\n          onClick={this.handleClickSave}\n          type=\"create\"\n          active={datafileChanged || fieldChanged}\n          triggered={updated}\n          block\n        />\n        <Button\n          onClick={this.toggleView}\n          type=\"view-toggle\"\n          triggered={this.state.guiView}\n          active\n          block\n        />\n      </div>\n    );\n  }\n\n  renderContentBody() {\n    const { datafileChanged, onDataFileChanged } = this.props;\n\n    if (this.state.guiView) {\n      return (\n        <div className=\"content-body\">\n          <DataGUI onChange={onDataFileChanged} ref=\"gui\" />\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"content-body\">\n        <InputPath\n          onChange={onDataFileChanged}\n          type=\"data files\"\n          path=\"\"\n          ref=\"inputpath\"\n        />\n        <Editor\n          editorChanged={datafileChanged}\n          onEditorChange={onDataFileChanged}\n          content=\"\"\n          ref=\"editor\"\n        />\n      </div>\n    );\n  }\n\n  render() {\n    const { errors, params } = this.props;\n\n    const keyboardHandlers = {\n      save: this.handleClickSave,\n    };\n\n    const title = getDocumentTitle('data files', params.splat, 'New data file');\n\n    return (\n      <DocumentTitle title={title}>\n        <HotKeys handlers={keyboardHandlers}>\n          {errors.length > 0 && <Errors errors={errors} />}\n\n          <div className=\"content-header\">\n            <Breadcrumbs type=\"datafiles\" splat={params.splat} />\n          </div>\n\n          <div className=\"content-wrapper\">\n            {this.renderContentBody()}\n            {this.renderAside()}\n          </div>\n        </HotKeys>\n      </DocumentTitle>\n    );\n  }\n}\n\nDataFileNew.propTypes = {\n  putDataFile: PropTypes.func.isRequired,\n  datafile: PropTypes.object.isRequired,\n  onDataFileChanged: PropTypes.func.isRequired,\n  clearErrors: PropTypes.func.isRequired,\n  errors: PropTypes.array.isRequired,\n  updated: PropTypes.bool.isRequired,\n  datafileChanged: PropTypes.bool.isRequired,\n  router: PropTypes.object.isRequired,\n  route: PropTypes.object.isRequired,\n  params: PropTypes.object.isRequired,\n  fieldChanged: PropTypes.bool,\n};\n\nconst mapStateToProps = state => ({\n  datafile: state.datafiles.currentFile,\n  updated: state.datafiles.updated,\n  datafileChanged: state.datafiles.datafileChanged,\n  fieldChanged: state.metadata.fieldChanged,\n  errors: state.utils.errors,\n});\n\nconst mapDispatchToProps = dispatch =>\n  bindActionCreators(\n    {\n      putDataFile,\n      onDataFileChanged,\n      clearErrors,\n    },\n    dispatch\n  );\n\nexport default withRouter(\n  connect(mapStateToProps, mapDispatchToProps)(DataFileNew)\n);\n","import _ from 'underscore';\nimport { CLEAR_ERRORS, validationError, filterDeleted } from './utils';\nimport { PUT_DOCUMENT_SUCCESS, PUT_DOCUMENT_FAILURE } from './collections';\nimport { get, put, del } from '../utils/fetch';\nimport { validator } from '../utils/validation';\nimport { slugify, trimObject, computeRelativePath } from '../utils/helpers';\nimport { draftsAPIUrl, draftAPIUrl, documentAPIUrl } from '../constants/api';\n\nimport translations from '../translations';\nconst { getTitleRequiredMessage, getFilenameNotValidMessage } = translations;\n\nexport const FETCH_DRAFTS_REQUEST = 'FETCH_DRAFTS_REQUEST';\nexport const FETCH_DRAFTS_SUCCESS = 'FETCH_DRAFTS_SUCCESS';\nexport const FETCH_DRAFTS_FAILURE = 'FETCH_DRAFTS_FAILURE';\n\nexport const FETCH_DRAFT_REQUEST = 'FETCH_DRAFT_REQUEST';\nexport const FETCH_DRAFT_SUCCESS = 'FETCH_DRAFT_SUCCESS';\nexport const FETCH_DRAFT_FAILURE = 'FETCH_DRAFT_FAILURE';\n\nexport const PUT_DRAFT_REQUEST = 'PUT_DRAFT_REQUEST';\nexport const PUT_DRAFT_SUCCESS = 'PUT_DRAFT_SUCCESS';\nexport const PUT_DRAFT_FAILURE = 'PUT_DRAFT_FAILURE';\n\nexport const DELETE_DRAFT_REQUEST = 'DELETE_DRAFT_REQUEST';\nexport const DELETE_DRAFT_SUCCESS = 'DELETE_DRAFT_SUCCESS';\nexport const DELETE_DRAFT_FAILURE = 'DELETE_DRAFT_FAILURE';\n\nexport const fetchDrafts = (directory = '') => dispatch => {\n  dispatch({ type: FETCH_DRAFTS_REQUEST });\n  return get(\n    draftsAPIUrl(directory),\n    { type: FETCH_DRAFTS_SUCCESS, name: 'drafts' },\n    { type: FETCH_DRAFTS_FAILURE, name: 'error' },\n    dispatch\n  );\n};\n\nexport const fetchDraft = (directory, filename) => dispatch => {\n  dispatch({ type: FETCH_DRAFT_REQUEST });\n  return get(\n    draftAPIUrl(directory, filename),\n    { type: FETCH_DRAFT_SUCCESS, name: 'draft' },\n    { type: FETCH_DRAFT_FAILURE, name: 'error' },\n    dispatch\n  );\n};\n\nexport const putDraft = (mode, directory, filename = '') => (\n  dispatch,\n  getState\n) => {\n  // get edited fields from metadata state\n  const metadata = getState().metadata.metadata;\n  let { path, raw_content, title } = metadata;\n\n  // if path is not given or equals to directory, generate filename from the title\n  if (!path && title) {\n    path = `${slugify(title)}.md`;\n  } else if (!path && !title) {\n    return dispatch(validationError(validateDraft(metadata)));\n  }\n  // clear errors\n  dispatch({ type: CLEAR_ERRORS });\n\n  // omit raw_content, path and empty-value keys in metadata state from front_matter\n  const front_matter = _.omit(metadata, (value, key, object) => {\n    return key === 'raw_content' || key === 'path' || value === '';\n  });\n\n  let payload;\n  if (mode === 'create') {\n    // strip '_drafts/' from path when provided\n    filename = path.replace('_drafts/', '');\n    payload = { front_matter, raw_content };\n  } else {\n    let writePath = directory\n      ? `_drafts/${directory}/${path}`\n      : `_drafts/${path}`;\n    payload = { path: writePath, front_matter, raw_content };\n  }\n\n  //send the put request\n  return put(\n    draftAPIUrl(directory, filename),\n    preparePayload(payload),\n    { type: PUT_DRAFT_SUCCESS, name: 'draft' },\n    { type: PUT_DRAFT_FAILURE, name: 'error' },\n    dispatch\n  );\n};\n\nexport const deleteDraft = (directory, filename) => dispatch => {\n  const relative_path = computeRelativePath(directory, filename);\n  return del(\n    draftAPIUrl(directory, filename),\n    { type: DELETE_DRAFT_SUCCESS, name: 'draft', id: relative_path },\n    { type: DELETE_DRAFT_FAILURE, name: 'error' },\n    dispatch\n  );\n};\n\nexport const publishDraft = (directory, filename) => (dispatch, getState) => {\n  const metadata = getState().metadata.metadata;\n  const { raw_content } = metadata;\n\n  // omit raw_content, path and empty-value keys in metadata state from front_matter\n  const front_matter = _.omit(metadata, (value, key, object) => {\n    return key === 'raw_content' || key === 'path' || value === '';\n  });\n\n  return put(\n    documentAPIUrl('posts', directory, filename),\n    preparePayload({ raw_content, front_matter }),\n    { type: PUT_DOCUMENT_SUCCESS, name: 'doc' },\n    { type: PUT_DOCUMENT_FAILURE, name: 'error' },\n    dispatch\n  );\n};\n\nconst validateDraft = metadata =>\n  validator(\n    metadata,\n    { path: 'required|filename' },\n    {\n      'path.required': getTitleRequiredMessage(),\n      'path.filename': getFilenameNotValidMessage(),\n    }\n  );\n\nconst preparePayload = obj => JSON.stringify(trimObject(obj));\n\nexport default function drafts(\n  state = {\n    drafts: [],\n    draft: {},\n    isFetching: false,\n    updated: false,\n  },\n  action\n) {\n  switch (action.type) {\n    case FETCH_DRAFTS_REQUEST:\n    case FETCH_DRAFT_REQUEST:\n      return {\n        ...state,\n        isFetching: true,\n      };\n    case FETCH_DRAFTS_SUCCESS:\n      return {\n        ...state,\n        drafts: action.drafts,\n        isFetching: false,\n        draft: {},\n      };\n    case FETCH_DRAFTS_FAILURE:\n      return {\n        ...state,\n        isFetching: false,\n        drafts: [],\n      };\n    case FETCH_DRAFT_SUCCESS:\n      return {\n        ...state,\n        draft: action.draft,\n        isFetching: false,\n      };\n    case FETCH_DRAFT_FAILURE:\n      return {\n        ...state,\n        draft: {},\n        isFetching: false,\n      };\n    case PUT_DRAFT_SUCCESS:\n      return {\n        ...state,\n        draft: action.draft,\n        updated: true,\n      };\n    case DELETE_DRAFT_SUCCESS:\n      return {\n        ...state,\n        drafts: filterDeleted(state.drafts, action.id),\n      };\n    default:\n      return {\n        ...state,\n        updated: false,\n      };\n  }\n}\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport DocumentTitle from 'react-document-title';\nimport Explorer from '../../components/Explorer';\nimport { search, filterBySearchInput } from '../../ducks/utils';\nimport { fetchDrafts, deleteDraft } from '../../ducks/drafts';\nimport { getDocumentTitle } from '../../utils/helpers';\n\nexport class Drafts extends Component {\n  componentDidMount() {\n    const { fetchDrafts, params } = this.props;\n    fetchDrafts(params.splat);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const { fetchDrafts } = nextProps;\n    if (this.props.params.splat !== nextProps.params.splat) {\n      fetchDrafts(nextProps.params.splat);\n    }\n  }\n\n  render() {\n    const { isFetching, drafts, search, params, deleteDraft } = this.props;\n\n    if (isFetching) {\n      return null;\n    }\n\n    const title = getDocumentTitle('drafts', params.splat);\n\n    return (\n      <DocumentTitle title={title}>\n        <Explorer\n          type=\"drafts\"\n          items={drafts}\n          params={params}\n          newBtnLabel=\"New draft\"\n          search={search}\n          deleteItem={deleteDraft}\n        />\n      </DocumentTitle>\n    );\n  }\n}\n\nDrafts.propTypes = {\n  drafts: PropTypes.array.isRequired,\n  fetchDrafts: PropTypes.func.isRequired,\n  deleteDraft: PropTypes.func.isRequired,\n  isFetching: PropTypes.bool.isRequired,\n  search: PropTypes.func.isRequired,\n  params: PropTypes.object.isRequired,\n};\n\nconst mapStateToProps = state => ({\n  drafts: filterBySearchInput(state.drafts.drafts, state.utils.input),\n  isFetching: state.drafts.isFetching,\n});\n\nconst mapDispatchToProps = dispatch =>\n  bindActionCreators(\n    {\n      fetchDrafts,\n      deleteDraft,\n      search,\n    },\n    dispatch\n  );\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Drafts);\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { browserHistory, withRouter } from 'react-router';\nimport { HotKeys } from 'react-hotkeys';\nimport _ from 'underscore';\nimport moment from 'moment';\nimport DocumentTitle from 'react-document-title';\nimport Button from '../../components/Button';\nimport Errors from '../../components/Errors';\nimport Splitter from '../../components/Splitter';\nimport Breadcrumbs from '../../components/Breadcrumbs';\nimport MarkdownPageBody from '../../components/MarkdownPageBody';\nimport {\n  fetchDraft,\n  deleteDraft,\n  putDraft,\n  publishDraft,\n} from '../../ducks/drafts';\nimport { updateTitle, updateBody, updatePath } from '../../ducks/metadata';\nimport { clearErrors } from '../../ducks/utils';\nimport { preventDefault, getDocumentTitle } from '../../utils/helpers';\nimport { ADMIN_PREFIX } from '../../constants';\n\nimport translations from '../../translations';\nconst {\n  getLeaveMessage,\n  getDeleteMessage,\n  getPublishDraftMessage,\n} = translations;\n\nexport class DraftEdit extends Component {\n  componentDidMount() {\n    const { fetchDraft, params, router, route } = this.props;\n    const [directory, ...rest] = params.splat;\n    const filename = rest.join('.');\n    fetchDraft(directory, filename);\n\n    router.setRouteLeaveHook(route, this.routerWillLeave);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (this.props.updated !== nextProps.updated) {\n      const new_path = nextProps.draft.path;\n      const path = this.props.draft.path;\n      // redirect if the path is changed\n      if (new_path !== path) {\n        browserHistory.push(\n          `${ADMIN_PREFIX}/drafts/${nextProps.draft.relative_path}`\n        );\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    const { clearErrors, errors } = this.props;\n    errors.length && clearErrors();\n  }\n\n  routerWillLeave = nextLocation => {\n    if (this.props.fieldChanged) {\n      return getLeaveMessage();\n    }\n  };\n\n  handleClickSave = e => {\n    preventDefault(e);\n    const { putDraft, fieldChanged, params } = this.props;\n    if (fieldChanged) {\n      const [directory, ...rest] = params.splat;\n      const filename = rest.join('.');\n      putDraft('edit', directory, filename);\n    }\n  };\n\n  handleClickPublish(path) {\n    const { deleteDraft, publishDraft, params } = this.props;\n\n    const [directory, ...rest] = params.splat;\n    const filename = rest.join('.');\n    const today = moment().format('YYYY-MM-DD');\n    const datedfilename = `${today}-${filename}`;\n    const postPath = directory\n      ? `_posts/${directory}/${datedfilename}`\n      : `_posts/${datedfilename}`;\n\n    const confirm = window.confirm(getPublishDraftMessage(path, postPath));\n    if (confirm) {\n      const goTo = directory ? `/${directory}` : '';\n      deleteDraft(directory, filename);\n      publishDraft(directory, datedfilename);\n      browserHistory.push(`${ADMIN_PREFIX}/drafts${goTo}`);\n    }\n  }\n\n  handleClickDelete(name) {\n    const { deleteDraft, params } = this.props;\n    const confirm = window.confirm(getDeleteMessage(name));\n    if (confirm) {\n      const [directory, ...rest] = params.splat;\n      const filename = rest.join('.');\n      const goTo = directory ? `/${directory}` : '';\n      deleteDraft(directory, filename);\n      browserHistory.push(`${ADMIN_PREFIX}/drafts${goTo}`);\n    }\n  }\n\n  render() {\n    const {\n      isFetching,\n      draft,\n      errors,\n      updateTitle,\n      updateBody,\n      updatePath,\n      updated,\n      fieldChanged,\n      params,\n    } = this.props;\n\n    if (isFetching) {\n      return null;\n    } else if (_.isEmpty(draft)) {\n      return <h1>Could not find the draft.</h1>;\n    }\n\n    const keyboardHandlers = {\n      save: this.handleClickSave,\n    };\n\n    const {\n      name,\n      path,\n      raw_content,\n      http_url,\n      front_matter,\n      front_matter_defaults,\n    } = draft;\n    const directory = params.splat[0];\n    const title = front_matter && front_matter.title ? front_matter.title : '';\n    const document_title = getDocumentTitle('drafts', directory, title || name);\n\n    return (\n      <DocumentTitle title={document_title}>\n        <HotKeys handlers={keyboardHandlers} className=\"single\">\n          {errors.length > 0 && <Errors errors={errors} />}\n          <div className=\"content-header\">\n            <Breadcrumbs type=\"drafts\" splat={directory} />\n          </div>\n\n          <div className=\"content-wrapper\">\n            <MarkdownPageBody\n              type=\"drafts\"\n              path={name}\n              title={title}\n              body={raw_content}\n              updatePath={updatePath}\n              updateBody={updateBody}\n              updateTitle={updateTitle}\n              onSave={this.handleClickSave}\n              metafields={{ title, raw_content, path: name, ...front_matter }}\n              staticmetafields={front_matter_defaults}\n            />\n            <div className=\"content-side\">\n              <Button\n                onClick={this.handleClickSave}\n                type=\"save\"\n                active={fieldChanged}\n                triggered={updated}\n                block\n              />\n              <Button to={http_url} type=\"view\" active block />\n              <Splitter />\n              <Button\n                onClick={() => this.handleClickPublish(path)}\n                type=\"publish\"\n                active\n                block\n              />\n              <Button\n                onClick={() => this.handleClickDelete(name)}\n                type=\"delete\"\n                active\n                block\n              />\n            </div>\n          </div>\n        </HotKeys>\n      </DocumentTitle>\n    );\n  }\n}\n\nDraftEdit.propTypes = {\n  draft: PropTypes.object.isRequired,\n  fetchDraft: PropTypes.func.isRequired,\n  deleteDraft: PropTypes.func.isRequired,\n  putDraft: PropTypes.func.isRequired,\n  updateTitle: PropTypes.func.isRequired,\n  updateBody: PropTypes.func.isRequired,\n  updatePath: PropTypes.func.isRequired,\n  clearErrors: PropTypes.func.isRequired,\n  publishDraft: PropTypes.func.isRequired,\n  isFetching: PropTypes.bool.isRequired,\n  errors: PropTypes.array.isRequired,\n  fieldChanged: PropTypes.bool.isRequired,\n  updated: PropTypes.bool.isRequired,\n  params: PropTypes.object.isRequired,\n  router: PropTypes.object.isRequired,\n  route: PropTypes.object.isRequired,\n};\n\nconst mapStateToProps = state => ({\n  draft: state.drafts.draft,\n  isFetching: state.drafts.isFetching,\n  fieldChanged: state.metadata.fieldChanged,\n  updated: state.drafts.updated,\n  errors: state.utils.errors,\n});\n\nconst mapDispatchToProps = dispatch =>\n  bindActionCreators(\n    {\n      fetchDraft,\n      deleteDraft,\n      putDraft,\n      publishDraft,\n      updateTitle,\n      updateBody,\n      updatePath,\n      clearErrors,\n    },\n    dispatch\n  );\n\nexport default withRouter(\n  connect(mapStateToProps, mapDispatchToProps)(DraftEdit)\n);\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { browserHistory, withRouter } from 'react-router';\nimport DocumentTitle from 'react-document-title';\nimport CreateMarkdownPage from '../../components/CreateMarkdownPage';\nimport { updateTitle, updateBody, updatePath } from '../../ducks/metadata';\nimport { putDraft } from '../../ducks/drafts';\nimport { clearErrors } from '../../ducks/utils';\nimport { preventDefault, getDocumentTitle } from '../../utils/helpers';\nimport { ADMIN_PREFIX } from '../../constants';\n\nimport translations from '../../translations';\nconst { getLeaveMessage } = translations;\n\nexport class DraftNew extends Component {\n  componentDidMount() {\n    const { router, route } = this.props;\n    router.setRouteLeaveHook(route, this.routerWillLeave);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (this.props.updated !== nextProps.updated) {\n      browserHistory.push(\n        `${ADMIN_PREFIX}/drafts/${nextProps.draft.relative_path}`\n      );\n    }\n  }\n\n  componentWillUnmount() {\n    const { clearErrors, errors } = this.props;\n    errors.length && clearErrors();\n  }\n\n  routerWillLeave = nextLocation => {\n    if (this.props.fieldChanged) {\n      return getLeaveMessage();\n    }\n  };\n\n  handleClickSave = e => {\n    preventDefault(e);\n    const { fieldChanged, putDraft, params } = this.props;\n    fieldChanged && putDraft('create', params.splat);\n  };\n\n  render() {\n    const {\n      params,\n      config,\n      errors,\n      updated,\n      updateBody,\n      updatePath,\n      updateTitle,\n      fieldChanged,\n    } = this.props;\n\n    const title = getDocumentTitle('drafts', params.splat, 'New draft');\n\n    return (\n      <DocumentTitle title={title}>\n        <CreateMarkdownPage\n          type=\"drafts\"\n          params={params}\n          config={config}\n          errors={errors}\n          updated={updated}\n          updateBody={updateBody}\n          updatePath={updatePath}\n          updateTitle={updateTitle}\n          fieldChanged={fieldChanged}\n          onClickSave={this.handleClickSave}\n        />\n      </DocumentTitle>\n    );\n  }\n}\n\nDraftNew.propTypes = {\n  putDraft: PropTypes.func.isRequired,\n  updateTitle: PropTypes.func.isRequired,\n  updateBody: PropTypes.func.isRequired,\n  updatePath: PropTypes.func.isRequired,\n  clearErrors: PropTypes.func.isRequired,\n  errors: PropTypes.array.isRequired,\n  fieldChanged: PropTypes.bool.isRequired,\n  updated: PropTypes.bool.isRequired,\n  router: PropTypes.object.isRequired,\n  route: PropTypes.object.isRequired,\n  params: PropTypes.object.isRequired,\n  config: PropTypes.object.isRequired,\n  draft: PropTypes.object.isRequired,\n};\n\nconst mapStateToProps = state => ({\n  draft: state.drafts.draft,\n  fieldChanged: state.metadata.fieldChanged,\n  errors: state.utils.errors,\n  updated: state.drafts.updated,\n  config: state.config.config,\n});\n\nconst mapDispatchToProps = dispatch =>\n  bindActionCreators(\n    {\n      updateTitle,\n      updateBody,\n      updatePath,\n      putDraft,\n      clearErrors,\n    },\n    dispatch\n  );\n\nexport default withRouter(\n  connect(mapStateToProps, mapDispatchToProps)(DraftNew)\n);\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport _ from 'underscore';\nimport ReactDropzone from 'react-dropzone';\nimport FilePreview from './FilePreview';\nimport Splitter from './Splitter';\nimport Icon from './Icon';\n\nexport class Dropzone extends Component {\n  openDropzone() {\n    this.refs.ReactDropzone.open();\n  }\n\n  render() {\n    const { files, splat, onDrop, onClickDelete, onClickItem } = this.props;\n    return (\n      <ReactDropzone\n        onDrop={onDrop}\n        ref=\"ReactDropzone\"\n        className=\"dropzone\"\n        activeClassName=\"dropzone-active\"\n        multiple\n        disableClick\n      >\n        {files.length ? (\n          <div className=\"preview-container\">\n            {_.map(files, (file, i) => (\n              <FilePreview\n                key={i}\n                onClick={onClickItem}\n                onClickDelete={onClickDelete}\n                splat={splat}\n                file={file}\n              />\n            ))}\n            <Splitter />\n            <div className=\"preview-tip\">\n              <div>Drag and drop file(s) here to upload</div>\n            </div>\n          </div>\n        ) : (\n          <div className=\"preview-info\">\n            <Icon name=\"upload\" />\n            <p>Drag and drop file(s) here to upload</p>\n          </div>\n        )}\n      </ReactDropzone>\n    );\n  }\n}\n\nDropzone.propTypes = {\n  files: PropTypes.array.isRequired,\n  splat: PropTypes.string.isRequired,\n  onDrop: PropTypes.func.isRequired,\n  onClickDelete: PropTypes.func.isRequired,\n  onClickItem: PropTypes.func,\n};\n\nexport default Dropzone;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from 'react-router';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport DocumentTitle from 'react-document-title';\nimport Dropzone from '../../components/Dropzone';\nimport Button from '../../components/Button';\nimport Icon from '../../components/Icon';\nimport Breadcrumbs from '../../components/Breadcrumbs';\nimport InputSearch from '../../components/form/InputSearch';\nimport { search } from '../../ducks/utils';\nimport {\n  existingUploadedFilenames,\n  getDocumentTitle,\n} from '../../utils/helpers';\nimport {\n  fetchStaticFiles,\n  uploadStaticFiles,\n  deleteStaticFile,\n  filterByFilename,\n} from '../../ducks/staticfiles';\nimport { ADMIN_PREFIX } from '../../constants';\n\nimport translations from '../../translations';\nconst { getOverrideMessage } = translations;\n\nexport class StaticFiles extends Component {\n  componentDidMount() {\n    const { fetchStaticFiles, params } = this.props;\n    fetchStaticFiles(params.splat);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const { fetchStaticFiles } = nextProps;\n    if (this.props.params.splat !== nextProps.params.splat) {\n      fetchStaticFiles(nextProps.params.splat);\n    }\n  }\n\n  onDrop(uploadedFiles) {\n    const { uploadStaticFiles, files, params } = this.props;\n    const existingFiles = existingUploadedFilenames(uploadedFiles, files);\n    if (existingFiles.length > 0) {\n      const confirm = window.confirm(\n        getOverrideMessage(existingFiles.join(', '))\n      );\n      if (!confirm) {\n        return false;\n      }\n    }\n    uploadStaticFiles(params.splat, uploadedFiles);\n  }\n\n  openDropzone = () => {\n    this.refs.dropzone.openDropzone();\n  };\n\n  renderFilePreviewRow(static_files, key) {\n    const { params, onClickStaticFile, deleteStaticFile } = this.props;\n    return (\n      <tr key={key}>\n        <td>\n          <Dropzone\n            ref=\"dropzone\"\n            splat={params.splat || ''}\n            files={static_files}\n            onClickItem={onClickStaticFile}\n            onClickDelete={deleteStaticFile}\n            onDrop={static_files => this.onDrop(static_files)}\n          />\n        </td>\n      </tr>\n    );\n  }\n\n  renderDirectoryRow(directory, index) {\n    const { name, path } = directory;\n    const to = `${ADMIN_PREFIX}/staticfiles/${path}`;\n    return (\n      <tr key={index}>\n        <td className=\"row-title\">\n          <strong>\n            <Link to={to}>\n              <Icon name=\"folder\" />\n              {name}\n            </Link>\n          </strong>\n        </td>\n      </tr>\n    );\n  }\n\n  renderRows() {\n    const { files } = this.props;\n    const dirs = files.filter(entity => entity.type === 'directory');\n    const static_files = files.filter(entity => !entity.type);\n\n    return dirs\n      .map((entry, index) => this.renderDirectoryRow(entry, index))\n      .concat(this.renderFilePreviewRow(static_files, dirs.length + 1));\n  }\n\n  renderTable() {\n    return (\n      <div className=\"content-table\">\n        <table>\n          <thead>\n            <tr>\n              <th>Directory Contents</th>\n            </tr>\n          </thead>\n          <tbody>{this.renderRows()}</tbody>\n        </table>\n      </div>\n    );\n  }\n\n  render() {\n    const { isFetching, params, search } = this.props;\n\n    if (isFetching) {\n      return null;\n    }\n\n    const to = `${ADMIN_PREFIX}/staticfiles/index`;\n    const title = getDocumentTitle('static files', params.splat);\n\n    return (\n      <DocumentTitle title={title}>\n        <div>\n          <div className=\"content-header\">\n            <Breadcrumbs type=\"staticfiles\" splat={params.splat} />\n            <div className=\"page-buttons multiple\">\n              <Link className=\"btn btn-view\" to={to}>\n                Index Listing\n              </Link>\n              <Button\n                onClick={() => this.openDropzone()}\n                type=\"upload\"\n                active\n              />\n            </div>\n            <div className=\"pull-right\">\n              <InputSearch searchBy=\"filename\" search={search} />\n            </div>\n          </div>\n          {this.renderTable()}\n        </div>\n      </DocumentTitle>\n    );\n  }\n}\n\nStaticFiles.propTypes = {\n  files: PropTypes.array.isRequired,\n  isFetching: PropTypes.bool.isRequired,\n  fetchStaticFiles: PropTypes.func.isRequired,\n  uploadStaticFiles: PropTypes.func.isRequired,\n  deleteStaticFile: PropTypes.func.isRequired,\n  onClickStaticFile: PropTypes.func,\n  search: PropTypes.func.isRequired,\n  params: PropTypes.object.isRequired,\n};\n\nconst mapStateToProps = state => ({\n  files: filterByFilename(state.staticfiles.files, state.utils.input),\n  isFetching: state.staticfiles.isFetching,\n});\n\nconst mapDispatchToProps = dispatch =>\n  bindActionCreators(\n    {\n      fetchStaticFiles,\n      uploadStaticFiles,\n      deleteStaticFile,\n      search,\n    },\n    dispatch\n  );\n\nexport default connect(mapStateToProps, mapDispatchToProps)(StaticFiles);\n","import React from 'react';\n\nconst NotFound = () => (\n  <div className=\"notfound\">\n    <img src={require('../../assets/images/logo-black-red.png')} alt=\"Jekyll Admin\" />\n    <h1>Huh. It seems that page is Hyde-ing...</h1>\n    <h2>The resource you requested was not found.</h2>\n  </div>\n);\n\nexport default NotFound;\n","import React from 'react';\nimport { Route, IndexRoute } from 'react-router';\nimport { ADMIN_PREFIX } from './constants';\n\nimport App from './containers/App';\nimport Configuration from './containers/views/Configuration';\nimport Pages from './containers/views/Pages';\nimport PageEdit from './containers/views/PageEdit';\nimport PageNew from './containers/views/PageNew';\nimport Documents from './containers/views/Documents';\nimport DocumentEdit from './containers/views/DocumentEdit';\nimport DocumentNew from './containers/views/DocumentNew';\nimport DataFiles from './containers/views/DataFiles';\nimport DataFileEdit from './containers/views/DataFileEdit';\nimport DataFileNew from './containers/views/DataFileNew';\nimport Drafts from './containers/views/Drafts';\nimport DraftEdit from './containers/views/DraftEdit';\nimport DraftNew from './containers/views/DraftNew';\nimport StaticFiles from './containers/views/StaticFiles';\nimport StaticIndex from './containers/views/StaticIndex';\nimport NotFound from './containers/views/NotFound';\n\nexport default (\n  <Route path={`${ADMIN_PREFIX}`} component={App}>\n    <IndexRoute component={Pages} />\n    <Route path=\"configuration\" component={Configuration} />\n    <Route path=\"pages\">\n      <IndexRoute component={Pages} />\n      <Route path=\"(**/)new\" component={PageNew} />\n      <Route path=\"(**/)*.*\" component={PageEdit} />\n      <Route path=\"**\" component={Pages} />\n    </Route>\n    <Route path=\"collections\">\n      <Route path=\":collection_name\">\n        <IndexRoute component={Documents} />\n        <Route path=\"(**/)new\" component={DocumentNew} />\n        <Route path=\"(**/)*.*\" component={DocumentEdit} />\n        <Route path=\"**\" component={Documents} />\n      </Route>\n    </Route>\n    <Route path=\"drafts\">\n      <IndexRoute component={Drafts} />\n      <Route path=\"(**/)new\" component={DraftNew} />\n      <Route path=\"(**/)*.*\" component={DraftEdit} />\n      <Route path=\"**\" component={Drafts} />\n    </Route>\n    <Route path=\"datafiles\">\n      <IndexRoute component={DataFiles} />\n      <Route path=\"(**/)new\" component={DataFileNew} />\n      <Route path=\"(**/)*.*\" component={DataFileEdit} />\n      <Route path=\"**\" component={DataFiles} />\n    </Route>\n    <Route path=\"staticfiles\">\n      <IndexRoute component={StaticFiles} />\n      <Route path=\"index\" component={StaticIndex} />\n      <Route path=\"**\" component={StaticFiles} />\n    </Route>\n    <Route path={`${ADMIN_PREFIX}/*`} component={NotFound} />\n  </Route>\n);\n","import { combineReducers } from 'redux';\nimport { routerReducer } from 'react-router-redux';\n\nimport config from './config';\nimport pages from './pages';\nimport collections from './collections';\nimport metadata from './metadata';\nimport drafts from './drafts';\nimport datafiles from './datafiles';\nimport staticfiles from './staticfiles';\nimport utils from './utils';\nimport siteMeta from './siteMeta';\nimport notifications from './notifications';\n\nexport default combineReducers({\n  routing: routerReducer,\n  meta: siteMeta,\n  config,\n  pages,\n  collections,\n  metadata,\n  drafts,\n  datafiles,\n  staticfiles,\n  utils,\n  notifications,\n});\n","import { createStore, compose, applyMiddleware } from 'redux';\nimport reduxImmutableStateInvariant from 'redux-immutable-state-invariant';\nimport thunk from 'redux-thunk';\nimport createLogger from 'redux-logger';\nimport rootReducer from './ducks';\n\nconst logger = createLogger();\n\nconst configureStoreProd = initialState => {\n  const middlewares = [thunk];\n\n  return createStore(\n    rootReducer,\n    initialState,\n    compose(applyMiddleware(...middlewares))\n  );\n};\n\nconst configureStoreDev = initialState => {\n  const middlewares = [reduxImmutableStateInvariant(), thunk, logger];\n\n  const composeEnhancers =\n    window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n  const store = createStore(\n    rootReducer,\n    initialState,\n    composeEnhancers(applyMiddleware(...middlewares))\n  );\n\n  if (module.hot) {\n    module.hot.accept('./ducks', () => {\n      const nextReducer = require('./ducks').default;\n      store.replaceReducer(nextReducer);\n    });\n  }\n\n  return store;\n};\n\nconst configureStore =\n  process.env.NODE_ENV === 'production'\n    ? configureStoreProd\n    : configureStoreDev;\n\nexport default configureStore;\n","/* eslint-disable import/default */\nimport React from 'react';\nimport { syncHistoryWithStore } from 'react-router-redux';\nimport { render } from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { Router, browserHistory, Redirect } from 'react-router';\nimport routes from './routes';\nimport configureStore from './store';\nimport { ADMIN_PREFIX } from './constants';\nimport './styles/main.scss';\n\nconst store = configureStore();\nconst history = syncHistoryWithStore(browserHistory, store);\n\nrender(\n  <Provider store={store}>\n    <Router history={history} routes={routes}>\n      <Redirect from={`${ADMIN_PREFIX}/`} to={`${ADMIN_PREFIX}/pages/`} />\n    </Router>\n  </Provider>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}